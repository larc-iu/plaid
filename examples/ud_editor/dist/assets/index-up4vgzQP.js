var Kd=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var My=Kd((zy,Ls)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Yd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xu={exports:{}},ao={},wu={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qr=Symbol.for("react.element"),Xd=Symbol.for("react.portal"),Zd=Symbol.for("react.fragment"),ef=Symbol.for("react.strict_mode"),tf=Symbol.for("react.profiler"),nf=Symbol.for("react.provider"),rf=Symbol.for("react.context"),sf=Symbol.for("react.forward_ref"),of=Symbol.for("react.suspense"),af=Symbol.for("react.memo"),lf=Symbol.for("react.lazy"),Zi=Symbol.iterator;function uf(e){return e===null||typeof e!="object"?null:(e=Zi&&e[Zi]||e["@@iterator"],typeof e=="function"?e:null)}var vu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Tu=Object.assign,ku={};function er(e,t,n){this.props=e,this.context=t,this.refs=ku,this.updater=n||vu}er.prototype.isReactComponent={};er.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};er.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bu(){}bu.prototype=er.prototype;function Ya(e,t,n){this.props=e,this.context=t,this.refs=ku,this.updater=n||vu}var Xa=Ya.prototype=new bu;Xa.constructor=Ya;Tu(Xa,er.prototype);Xa.isPureReactComponent=!0;var el=Array.isArray,ju=Object.prototype.hasOwnProperty,Za={current:null},Su={key:!0,ref:!0,__self:!0,__source:!0};function Eu(e,t,n){var r,s={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)ju.call(t,r)&&!Su.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:qr,type:e,key:o,ref:i,props:s,_owner:Za.current}}function cf(e,t){return{$$typeof:qr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ei(e){return typeof e=="object"&&e!==null&&e.$$typeof===qr}function df(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var tl=/\/+/g;function Co(e,t){return typeof e=="object"&&e!==null&&e.key!=null?df(""+e.key):t.toString(36)}function ws(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case qr:case Xd:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+Co(i,0):r,el(s)?(n="",e!=null&&(n=e.replace(tl,"$&/")+"/"),ws(s,t,n,"",function(u){return u})):s!=null&&(ei(s)&&(s=cf(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(tl,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",el(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+Co(o,a);i+=ws(o,t,n,l,s)}else if(l=uf(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+Co(o,a++),i+=ws(o,t,n,l,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function es(e,t,n){if(e==null)return e;var r=[],s=0;return ws(e,r,"","",function(o){return t.call(n,o,s++)}),r}function ff(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ve={current:null},vs={transition:null},pf={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:vs,ReactCurrentOwner:Za};function Cu(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:es,forEach:function(e,t,n){es(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return es(e,function(){t++}),t},toArray:function(e){return es(e,function(t){return t})||[]},only:function(e){if(!ei(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ce.Component=er;ce.Fragment=Zd;ce.Profiler=tf;ce.PureComponent=Ya;ce.StrictMode=ef;ce.Suspense=of;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pf;ce.act=Cu;ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Tu({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=Za.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)ju.call(t,l)&&!Su.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:qr,type:e.type,key:s,ref:o,props:r,_owner:i}};ce.createContext=function(e){return e={$$typeof:rf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:nf,_context:e},e.Consumer=e};ce.createElement=Eu;ce.createFactory=function(e){var t=Eu.bind(null,e);return t.type=e,t};ce.createRef=function(){return{current:null}};ce.forwardRef=function(e){return{$$typeof:sf,render:e}};ce.isValidElement=ei;ce.lazy=function(e){return{$$typeof:lf,_payload:{_status:-1,_result:e},_init:ff}};ce.memo=function(e,t){return{$$typeof:af,type:e,compare:t===void 0?null:t}};ce.startTransition=function(e){var t=vs.transition;vs.transition={};try{e()}finally{vs.transition=t}};ce.unstable_act=Cu;ce.useCallback=function(e,t){return Ve.current.useCallback(e,t)};ce.useContext=function(e){return Ve.current.useContext(e)};ce.useDebugValue=function(){};ce.useDeferredValue=function(e){return Ve.current.useDeferredValue(e)};ce.useEffect=function(e,t){return Ve.current.useEffect(e,t)};ce.useId=function(){return Ve.current.useId()};ce.useImperativeHandle=function(e,t,n){return Ve.current.useImperativeHandle(e,t,n)};ce.useInsertionEffect=function(e,t){return Ve.current.useInsertionEffect(e,t)};ce.useLayoutEffect=function(e,t){return Ve.current.useLayoutEffect(e,t)};ce.useMemo=function(e,t){return Ve.current.useMemo(e,t)};ce.useReducer=function(e,t,n){return Ve.current.useReducer(e,t,n)};ce.useRef=function(e){return Ve.current.useRef(e)};ce.useState=function(e){return Ve.current.useState(e)};ce.useSyncExternalStore=function(e,t,n){return Ve.current.useSyncExternalStore(e,t,n)};ce.useTransition=function(){return Ve.current.useTransition()};ce.version="18.3.1";wu.exports=ce;var x=wu.exports;const io=Yd(x);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hf=x,mf=Symbol.for("react.element"),yf=Symbol.for("react.fragment"),gf=Object.prototype.hasOwnProperty,xf=hf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wf={key:!0,ref:!0,__self:!0,__source:!0};function $u(e,t,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)gf.call(t,r)&&!wf.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:mf,type:e,key:o,ref:i,props:s,_owner:xf.current}}ao.Fragment=yf;ao.jsx=$u;ao.jsxs=$u;xu.exports=ao;var d=xu.exports,Nu={exports:{}},rt={},Pu={exports:{}},_u={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,U){var A=H.length;H.push(U);e:for(;0<A;){var R=A-1>>>1,L=H[R];if(0<s(L,U))H[R]=U,H[A]=L,A=R;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var U=H[0],A=H.pop();if(A!==U){H[0]=A;e:for(var R=0,L=H.length,I=L>>>1;R<I;){var q=2*(R+1)-1,Z=H[q],J=q+1,ee=H[J];if(0>s(Z,A))J<L&&0>s(ee,Z)?(H[R]=ee,H[J]=A,R=J):(H[R]=Z,H[q]=A,R=q);else if(J<L&&0>s(ee,A))H[R]=ee,H[J]=A,R=J;else break e}}return U}function s(H,U){var A=H.sortIndex-U.sortIndex;return A!==0?A:H.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var l=[],u=[],c=1,f=null,p=3,g=!1,k=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(H){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=H)r(u),U.sortIndex=U.expirationTime,t(l,U);else break;U=n(u)}}function w(H){if(v=!1,m(H),!k)if(n(l)!==null)k=!0,ye(j);else{var U=n(u);U!==null&&pe(w,U.startTime-H)}}function j(H,U){k=!1,v&&(v=!1,y(E),E=-1),g=!0;var A=p;try{for(m(U),f=n(l);f!==null&&(!(f.expirationTime>U)||H&&!F());){var R=f.callback;if(typeof R=="function"){f.callback=null,p=f.priorityLevel;var L=R(f.expirationTime<=U);U=e.unstable_now(),typeof L=="function"?f.callback=L:f===n(l)&&r(l),m(U)}else r(l);f=n(l)}if(f!==null)var I=!0;else{var q=n(u);q!==null&&pe(w,q.startTime-U),I=!1}return I}finally{f=null,p=A,g=!1}}var C=!1,P=null,E=-1,O=5,B=-1;function F(){return!(e.unstable_now()-B<O)}function re(){if(P!==null){var H=e.unstable_now();B=H;var U=!0;try{U=P(!0,H)}finally{U?Y():(C=!1,P=null)}}else C=!1}var Y;if(typeof h=="function")Y=function(){h(re)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,ie=de.port2;de.port1.onmessage=re,Y=function(){ie.postMessage(null)}}else Y=function(){b(re,0)};function ye(H){P=H,C||(C=!0,Y())}function pe(H,U){E=b(function(){H(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){k||g||(k=!0,ye(j))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(H){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var A=p;p=U;try{return H()}finally{p=A}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,U){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var A=p;p=H;try{return U()}finally{p=A}},e.unstable_scheduleCallback=function(H,U,A){var R=e.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?R+A:R):A=R,H){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=A+L,H={id:c++,callback:U,priorityLevel:H,startTime:A,expirationTime:L,sortIndex:-1},A>R?(H.sortIndex=A,t(u,H),n(l)===null&&H===n(u)&&(v?(y(E),E=-1):v=!0,pe(w,A-R))):(H.sortIndex=L,t(l,H),k||g||(k=!0,ye(j))),H},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(H){var U=p;return function(){var A=p;p=U;try{return H.apply(this,arguments)}finally{p=A}}}})(_u);Pu.exports=_u;var vf=Pu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tf=x,nt=vf;function V(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ou=new Set,$r={};function jn(e,t){Jn(e,t),Jn(e+"Capture",t)}function Jn(e,t){for($r[e]=t,e=0;e<t.length;e++)Ou.add(t[e])}var Mt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),na=Object.prototype.hasOwnProperty,kf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nl={},rl={};function bf(e){return na.call(rl,e)?!0:na.call(nl,e)?!1:kf.test(e)?rl[e]=!0:(nl[e]=!0,!1)}function jf(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Sf(e,t,n,r){if(t===null||typeof t>"u"||jf(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qe(e,t,n,r,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var De={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){De[e]=new qe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];De[t]=new qe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){De[e]=new qe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){De[e]=new qe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){De[e]=new qe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){De[e]=new qe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){De[e]=new qe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){De[e]=new qe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){De[e]=new qe(e,5,!1,e.toLowerCase(),null,!1,!1)});var ti=/[\-:]([a-z])/g;function ni(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ti,ni);De[t]=new qe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ti,ni);De[t]=new qe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ti,ni);De[t]=new qe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){De[e]=new qe(e,1,!1,e.toLowerCase(),null,!1,!1)});De.xlinkHref=new qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){De[e]=new qe(e,1,!1,e.toLowerCase(),null,!0,!0)});function ri(e,t,n,r){var s=De.hasOwnProperty(t)?De[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Sf(t,n,s,r)&&(n=null),r||s===null?bf(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ht=Tf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ts=Symbol.for("react.element"),Nn=Symbol.for("react.portal"),Pn=Symbol.for("react.fragment"),si=Symbol.for("react.strict_mode"),ra=Symbol.for("react.profiler"),Lu=Symbol.for("react.provider"),Uu=Symbol.for("react.context"),oi=Symbol.for("react.forward_ref"),sa=Symbol.for("react.suspense"),oa=Symbol.for("react.suspense_list"),ai=Symbol.for("react.memo"),Vt=Symbol.for("react.lazy"),Ru=Symbol.for("react.offscreen"),sl=Symbol.iterator;function ar(e){return e===null||typeof e!="object"?null:(e=sl&&e[sl]||e["@@iterator"],typeof e=="function"?e:null)}var Ee=Object.assign,$o;function mr(e){if($o===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$o=t&&t[1]||""}return`
`+$o+e}var No=!1;function Po(e,t){if(!e||No)return"";No=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,a=o.length-1;1<=i&&0<=a&&s[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==o[a]){var l=`
`+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=a);break}}}finally{No=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?mr(e):""}function Ef(e){switch(e.tag){case 5:return mr(e.type);case 16:return mr("Lazy");case 13:return mr("Suspense");case 19:return mr("SuspenseList");case 0:case 2:case 15:return e=Po(e.type,!1),e;case 11:return e=Po(e.type.render,!1),e;case 1:return e=Po(e.type,!0),e;default:return""}}function aa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pn:return"Fragment";case Nn:return"Portal";case ra:return"Profiler";case si:return"StrictMode";case sa:return"Suspense";case oa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Uu:return(e.displayName||"Context")+".Consumer";case Lu:return(e._context.displayName||"Context")+".Provider";case oi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ai:return t=e.displayName||null,t!==null?t:aa(e.type)||"Memo";case Vt:t=e._payload,e=e._init;try{return aa(e(t))}catch{}}return null}function Cf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return aa(t);case 8:return t===si?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function on(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Bu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $f(e){var t=Bu(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ns(e){e._valueTracker||(e._valueTracker=$f(e))}function Du(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Bu(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Us(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ia(e,t){var n=t.checked;return Ee({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ol(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=on(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Mu(e,t){t=t.checked,t!=null&&ri(e,"checked",t,!1)}function la(e,t){Mu(e,t);var n=on(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ua(e,t.type,n):t.hasOwnProperty("defaultValue")&&ua(e,t.type,on(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function al(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ua(e,t,n){(t!=="number"||Us(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var yr=Array.isArray;function An(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+on(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ca(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(V(91));return Ee({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function il(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(V(92));if(yr(n)){if(1<n.length)throw Error(V(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:on(n)}}function Iu(e,t){var n=on(t.value),r=on(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ll(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function zu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function da(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?zu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var rs,Au=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(rs=rs||document.createElement("div"),rs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Nr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nf=["Webkit","ms","Moz","O"];Object.keys(wr).forEach(function(e){Nf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wr[t]=wr[e]})});function Fu(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||wr.hasOwnProperty(e)&&wr[e]?(""+t).trim():t+"px"}function Hu(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Fu(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Pf=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fa(e,t){if(t){if(Pf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(V(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(V(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(V(61))}if(t.style!=null&&typeof t.style!="object")throw Error(V(62))}}function pa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ha=null;function ii(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ma=null,Fn=null,Hn=null;function ul(e){if(e=Qr(e)){if(typeof ma!="function")throw Error(V(280));var t=e.stateNode;t&&(t=po(t),ma(e.stateNode,e.type,t))}}function Wu(e){Fn?Hn?Hn.push(e):Hn=[e]:Fn=e}function Vu(){if(Fn){var e=Fn,t=Hn;if(Hn=Fn=null,ul(e),t)for(e=0;e<t.length;e++)ul(t[e])}}function qu(e,t){return e(t)}function Ju(){}var _o=!1;function Gu(e,t,n){if(_o)return e(t,n);_o=!0;try{return qu(e,t,n)}finally{_o=!1,(Fn!==null||Hn!==null)&&(Ju(),Vu())}}function Pr(e,t){var n=e.stateNode;if(n===null)return null;var r=po(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(V(231,t,typeof n));return n}var ya=!1;if(Mt)try{var ir={};Object.defineProperty(ir,"passive",{get:function(){ya=!0}}),window.addEventListener("test",ir,ir),window.removeEventListener("test",ir,ir)}catch{ya=!1}function _f(e,t,n,r,s,o,i,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var vr=!1,Rs=null,Bs=!1,ga=null,Of={onError:function(e){vr=!0,Rs=e}};function Lf(e,t,n,r,s,o,i,a,l){vr=!1,Rs=null,_f.apply(Of,arguments)}function Uf(e,t,n,r,s,o,i,a,l){if(Lf.apply(this,arguments),vr){if(vr){var u=Rs;vr=!1,Rs=null}else throw Error(V(198));Bs||(Bs=!0,ga=u)}}function Sn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Qu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cl(e){if(Sn(e)!==e)throw Error(V(188))}function Rf(e){var t=e.alternate;if(!t){if(t=Sn(e),t===null)throw Error(V(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return cl(s),e;if(o===r)return cl(s),t;o=o.sibling}throw Error(V(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i)throw Error(V(189))}}if(n.alternate!==r)throw Error(V(190))}if(n.tag!==3)throw Error(V(188));return n.stateNode.current===n?e:t}function Ku(e){return e=Rf(e),e!==null?Yu(e):null}function Yu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Yu(e);if(t!==null)return t;e=e.sibling}return null}var Xu=nt.unstable_scheduleCallback,dl=nt.unstable_cancelCallback,Bf=nt.unstable_shouldYield,Df=nt.unstable_requestPaint,Ne=nt.unstable_now,Mf=nt.unstable_getCurrentPriorityLevel,li=nt.unstable_ImmediatePriority,Zu=nt.unstable_UserBlockingPriority,Ds=nt.unstable_NormalPriority,If=nt.unstable_LowPriority,ec=nt.unstable_IdlePriority,lo=null,$t=null;function zf(e){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(lo,e,void 0,(e.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:Hf,Af=Math.log,Ff=Math.LN2;function Hf(e){return e>>>=0,e===0?32:31-(Af(e)/Ff|0)|0}var ss=64,os=4194304;function gr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ms(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~s;a!==0?r=gr(a):(o&=i,o!==0&&(r=gr(o)))}else i=n&~s,i!==0?r=gr(i):o!==0&&(r=gr(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-vt(t),s=1<<n,r|=e[n],t&=~s;return r}function Wf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vf(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-vt(o),a=1<<i,l=s[i];l===-1?(!(a&n)||a&r)&&(s[i]=Wf(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function xa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function tc(){var e=ss;return ss<<=1,!(ss&4194240)&&(ss=64),e}function Oo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Jr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vt(t),e[t]=n}function qf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-vt(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function ui(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-vt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ge=0;function nc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var rc,ci,sc,oc,ac,wa=!1,as=[],Yt=null,Xt=null,Zt=null,_r=new Map,Or=new Map,Jt=[],Jf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fl(e,t){switch(e){case"focusin":case"focusout":Yt=null;break;case"dragenter":case"dragleave":Xt=null;break;case"mouseover":case"mouseout":Zt=null;break;case"pointerover":case"pointerout":_r.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Or.delete(t.pointerId)}}function lr(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Qr(t),t!==null&&ci(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Gf(e,t,n,r,s){switch(t){case"focusin":return Yt=lr(Yt,e,t,n,r,s),!0;case"dragenter":return Xt=lr(Xt,e,t,n,r,s),!0;case"mouseover":return Zt=lr(Zt,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return _r.set(o,lr(_r.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Or.set(o,lr(Or.get(o)||null,e,t,n,r,s)),!0}return!1}function ic(e){var t=hn(e.target);if(t!==null){var n=Sn(t);if(n!==null){if(t=n.tag,t===13){if(t=Qu(n),t!==null){e.blockedOn=t,ac(e.priority,function(){sc(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ts(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=va(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ha=r,n.target.dispatchEvent(r),ha=null}else return t=Qr(n),t!==null&&ci(t),e.blockedOn=n,!1;t.shift()}return!0}function pl(e,t,n){Ts(e)&&n.delete(t)}function Qf(){wa=!1,Yt!==null&&Ts(Yt)&&(Yt=null),Xt!==null&&Ts(Xt)&&(Xt=null),Zt!==null&&Ts(Zt)&&(Zt=null),_r.forEach(pl),Or.forEach(pl)}function ur(e,t){e.blockedOn===t&&(e.blockedOn=null,wa||(wa=!0,nt.unstable_scheduleCallback(nt.unstable_NormalPriority,Qf)))}function Lr(e){function t(s){return ur(s,e)}if(0<as.length){ur(as[0],e);for(var n=1;n<as.length;n++){var r=as[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Yt!==null&&ur(Yt,e),Xt!==null&&ur(Xt,e),Zt!==null&&ur(Zt,e),_r.forEach(t),Or.forEach(t),n=0;n<Jt.length;n++)r=Jt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Jt.length&&(n=Jt[0],n.blockedOn===null);)ic(n),n.blockedOn===null&&Jt.shift()}var Wn=Ht.ReactCurrentBatchConfig,Is=!0;function Kf(e,t,n,r){var s=ge,o=Wn.transition;Wn.transition=null;try{ge=1,di(e,t,n,r)}finally{ge=s,Wn.transition=o}}function Yf(e,t,n,r){var s=ge,o=Wn.transition;Wn.transition=null;try{ge=4,di(e,t,n,r)}finally{ge=s,Wn.transition=o}}function di(e,t,n,r){if(Is){var s=va(e,t,n,r);if(s===null)Fo(e,t,r,zs,n),fl(e,r);else if(Gf(s,e,t,n,r))r.stopPropagation();else if(fl(e,r),t&4&&-1<Jf.indexOf(e)){for(;s!==null;){var o=Qr(s);if(o!==null&&rc(o),o=va(e,t,n,r),o===null&&Fo(e,t,r,zs,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Fo(e,t,r,null,n)}}var zs=null;function va(e,t,n,r){if(zs=null,e=ii(r),e=hn(e),e!==null)if(t=Sn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Qu(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zs=e,null}function lc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mf()){case li:return 1;case Zu:return 4;case Ds:case If:return 16;case ec:return 536870912;default:return 16}default:return 16}}var Qt=null,fi=null,ks=null;function uc(){if(ks)return ks;var e,t=fi,n=t.length,r,s="value"in Qt?Qt.value:Qt.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[o-r];r++);return ks=s.slice(e,1<r?1-r:void 0)}function bs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function is(){return!0}function hl(){return!1}function st(e){function t(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?is:hl,this.isPropagationStopped=hl,this}return Ee(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=is)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=is)},persist:function(){},isPersistent:is}),t}var tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pi=st(tr),Gr=Ee({},tr,{view:0,detail:0}),Xf=st(Gr),Lo,Uo,cr,uo=Ee({},Gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cr&&(cr&&e.type==="mousemove"?(Lo=e.screenX-cr.screenX,Uo=e.screenY-cr.screenY):Uo=Lo=0,cr=e),Lo)},movementY:function(e){return"movementY"in e?e.movementY:Uo}}),ml=st(uo),Zf=Ee({},uo,{dataTransfer:0}),ep=st(Zf),tp=Ee({},Gr,{relatedTarget:0}),Ro=st(tp),np=Ee({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),rp=st(np),sp=Ee({},tr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),op=st(sp),ap=Ee({},tr,{data:0}),yl=st(ap),ip={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},up={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=up[e])?!!t[e]:!1}function hi(){return cp}var dp=Ee({},Gr,{key:function(e){if(e.key){var t=ip[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hi,charCode:function(e){return e.type==="keypress"?bs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fp=st(dp),pp=Ee({},uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gl=st(pp),hp=Ee({},Gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hi}),mp=st(hp),yp=Ee({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),gp=st(yp),xp=Ee({},uo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wp=st(xp),vp=[9,13,27,32],mi=Mt&&"CompositionEvent"in window,Tr=null;Mt&&"documentMode"in document&&(Tr=document.documentMode);var Tp=Mt&&"TextEvent"in window&&!Tr,cc=Mt&&(!mi||Tr&&8<Tr&&11>=Tr),xl=" ",wl=!1;function dc(e,t){switch(e){case"keyup":return vp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _n=!1;function kp(e,t){switch(e){case"compositionend":return fc(t);case"keypress":return t.which!==32?null:(wl=!0,xl);case"textInput":return e=t.data,e===xl&&wl?null:e;default:return null}}function bp(e,t){if(_n)return e==="compositionend"||!mi&&dc(e,t)?(e=uc(),ks=fi=Qt=null,_n=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return cc&&t.locale!=="ko"?null:t.data;default:return null}}var jp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jp[e.type]:t==="textarea"}function pc(e,t,n,r){Wu(r),t=As(t,"onChange"),0<t.length&&(n=new pi("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var kr=null,Ur=null;function Sp(e){jc(e,0)}function co(e){var t=Un(e);if(Du(t))return e}function Ep(e,t){if(e==="change")return t}var hc=!1;if(Mt){var Bo;if(Mt){var Do="oninput"in document;if(!Do){var Tl=document.createElement("div");Tl.setAttribute("oninput","return;"),Do=typeof Tl.oninput=="function"}Bo=Do}else Bo=!1;hc=Bo&&(!document.documentMode||9<document.documentMode)}function kl(){kr&&(kr.detachEvent("onpropertychange",mc),Ur=kr=null)}function mc(e){if(e.propertyName==="value"&&co(Ur)){var t=[];pc(t,Ur,e,ii(e)),Gu(Sp,t)}}function Cp(e,t,n){e==="focusin"?(kl(),kr=t,Ur=n,kr.attachEvent("onpropertychange",mc)):e==="focusout"&&kl()}function $p(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return co(Ur)}function Np(e,t){if(e==="click")return co(t)}function Pp(e,t){if(e==="input"||e==="change")return co(t)}function _p(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kt=typeof Object.is=="function"?Object.is:_p;function Rr(e,t){if(kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!na.call(t,s)||!kt(e[s],t[s]))return!1}return!0}function bl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jl(e,t){var n=bl(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bl(n)}}function yc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gc(){for(var e=window,t=Us();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Us(e.document)}return t}function yi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Op(e){var t=gc(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&yc(n.ownerDocument.documentElement,n)){if(r!==null&&yi(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=jl(n,o);var i=jl(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Lp=Mt&&"documentMode"in document&&11>=document.documentMode,On=null,Ta=null,br=null,ka=!1;function Sl(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ka||On==null||On!==Us(r)||(r=On,"selectionStart"in r&&yi(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),br&&Rr(br,r)||(br=r,r=As(Ta,"onSelect"),0<r.length&&(t=new pi("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=On)))}function ls(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ln={animationend:ls("Animation","AnimationEnd"),animationiteration:ls("Animation","AnimationIteration"),animationstart:ls("Animation","AnimationStart"),transitionend:ls("Transition","TransitionEnd")},Mo={},xc={};Mt&&(xc=document.createElement("div").style,"AnimationEvent"in window||(delete Ln.animationend.animation,delete Ln.animationiteration.animation,delete Ln.animationstart.animation),"TransitionEvent"in window||delete Ln.transitionend.transition);function fo(e){if(Mo[e])return Mo[e];if(!Ln[e])return e;var t=Ln[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in xc)return Mo[e]=t[n];return e}var wc=fo("animationend"),vc=fo("animationiteration"),Tc=fo("animationstart"),kc=fo("transitionend"),bc=new Map,El="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ln(e,t){bc.set(e,t),jn(t,[e])}for(var Io=0;Io<El.length;Io++){var zo=El[Io],Up=zo.toLowerCase(),Rp=zo[0].toUpperCase()+zo.slice(1);ln(Up,"on"+Rp)}ln(wc,"onAnimationEnd");ln(vc,"onAnimationIteration");ln(Tc,"onAnimationStart");ln("dblclick","onDoubleClick");ln("focusin","onFocus");ln("focusout","onBlur");ln(kc,"onTransitionEnd");Jn("onMouseEnter",["mouseout","mouseover"]);Jn("onMouseLeave",["mouseout","mouseover"]);Jn("onPointerEnter",["pointerout","pointerover"]);Jn("onPointerLeave",["pointerout","pointerover"]);jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jn("onBeforeInput",["compositionend","keypress","textInput","paste"]);jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bp=new Set("cancel close invalid load scroll toggle".split(" ").concat(xr));function Cl(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Uf(r,t,void 0,e),e.currentTarget=null}function jc(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&s.isPropagationStopped())break e;Cl(s,a,u),o=l}else for(i=0;i<r.length;i++){if(a=r[i],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&s.isPropagationStopped())break e;Cl(s,a,u),o=l}}}if(Bs)throw e=ga,Bs=!1,ga=null,e}function ve(e,t){var n=t[Ca];n===void 0&&(n=t[Ca]=new Set);var r=e+"__bubble";n.has(r)||(Sc(t,e,2,!1),n.add(r))}function Ao(e,t,n){var r=0;t&&(r|=4),Sc(n,e,r,t)}var us="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[us]){e[us]=!0,Ou.forEach(function(n){n!=="selectionchange"&&(Bp.has(n)||Ao(n,!1,e),Ao(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[us]||(t[us]=!0,Ao("selectionchange",!1,t))}}function Sc(e,t,n,r){switch(lc(t)){case 1:var s=Kf;break;case 4:s=Yf;break;default:s=di}n=s.bind(null,t,n,e),s=void 0,!ya||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Fo(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;i=i.return}for(;a!==null;){if(i=hn(a),i===null)return;if(l=i.tag,l===5||l===6){r=o=i;continue e}a=a.parentNode}}r=r.return}Gu(function(){var u=o,c=ii(n),f=[];e:{var p=bc.get(e);if(p!==void 0){var g=pi,k=e;switch(e){case"keypress":if(bs(n)===0)break e;case"keydown":case"keyup":g=fp;break;case"focusin":k="focus",g=Ro;break;case"focusout":k="blur",g=Ro;break;case"beforeblur":case"afterblur":g=Ro;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=ml;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=ep;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=mp;break;case wc:case vc:case Tc:g=rp;break;case kc:g=gp;break;case"scroll":g=Xf;break;case"wheel":g=wp;break;case"copy":case"cut":case"paste":g=op;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=gl}var v=(t&4)!==0,b=!v&&e==="scroll",y=v?p!==null?p+"Capture":null:p;v=[];for(var h=u,m;h!==null;){m=h;var w=m.stateNode;if(m.tag===5&&w!==null&&(m=w,y!==null&&(w=Pr(h,y),w!=null&&v.push(Dr(h,w,m)))),b)break;h=h.return}0<v.length&&(p=new g(p,k,null,n,c),f.push({event:p,listeners:v}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",p&&n!==ha&&(k=n.relatedTarget||n.fromElement)&&(hn(k)||k[It]))break e;if((g||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,g?(k=n.relatedTarget||n.toElement,g=u,k=k?hn(k):null,k!==null&&(b=Sn(k),k!==b||k.tag!==5&&k.tag!==6)&&(k=null)):(g=null,k=u),g!==k)){if(v=ml,w="onMouseLeave",y="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(v=gl,w="onPointerLeave",y="onPointerEnter",h="pointer"),b=g==null?p:Un(g),m=k==null?p:Un(k),p=new v(w,h+"leave",g,n,c),p.target=b,p.relatedTarget=m,w=null,hn(c)===u&&(v=new v(y,h+"enter",k,n,c),v.target=m,v.relatedTarget=b,w=v),b=w,g&&k)t:{for(v=g,y=k,h=0,m=v;m;m=Cn(m))h++;for(m=0,w=y;w;w=Cn(w))m++;for(;0<h-m;)v=Cn(v),h--;for(;0<m-h;)y=Cn(y),m--;for(;h--;){if(v===y||y!==null&&v===y.alternate)break t;v=Cn(v),y=Cn(y)}v=null}else v=null;g!==null&&$l(f,p,g,v,!1),k!==null&&b!==null&&$l(f,b,k,v,!0)}}e:{if(p=u?Un(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var j=Ep;else if(vl(p))if(hc)j=Pp;else{j=$p;var C=Cp}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=Np);if(j&&(j=j(e,u))){pc(f,j,n,c);break e}C&&C(e,p,u),e==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&ua(p,"number",p.value)}switch(C=u?Un(u):window,e){case"focusin":(vl(C)||C.contentEditable==="true")&&(On=C,Ta=u,br=null);break;case"focusout":br=Ta=On=null;break;case"mousedown":ka=!0;break;case"contextmenu":case"mouseup":case"dragend":ka=!1,Sl(f,n,c);break;case"selectionchange":if(Lp)break;case"keydown":case"keyup":Sl(f,n,c)}var P;if(mi)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else _n?dc(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(cc&&n.locale!=="ko"&&(_n||E!=="onCompositionStart"?E==="onCompositionEnd"&&_n&&(P=uc()):(Qt=c,fi="value"in Qt?Qt.value:Qt.textContent,_n=!0)),C=As(u,E),0<C.length&&(E=new yl(E,e,null,n,c),f.push({event:E,listeners:C}),P?E.data=P:(P=fc(n),P!==null&&(E.data=P)))),(P=Tp?kp(e,n):bp(e,n))&&(u=As(u,"onBeforeInput"),0<u.length&&(c=new yl("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=P))}jc(f,t)})}function Dr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function As(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Pr(e,n),o!=null&&r.unshift(Dr(e,o,s)),o=Pr(e,t),o!=null&&r.push(Dr(e,o,s))),e=e.return}return r}function Cn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $l(e,t,n,r,s){for(var o=t._reactName,i=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Pr(n,o),l!=null&&i.unshift(Dr(n,l,a))):s||(l=Pr(n,o),l!=null&&i.push(Dr(n,l,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Dp=/\r\n?/g,Mp=/\u0000|\uFFFD/g;function Nl(e){return(typeof e=="string"?e:""+e).replace(Dp,`
`).replace(Mp,"")}function cs(e,t,n){if(t=Nl(t),Nl(e)!==t&&n)throw Error(V(425))}function Fs(){}var ba=null,ja=null;function Sa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ea=typeof setTimeout=="function"?setTimeout:void 0,Ip=typeof clearTimeout=="function"?clearTimeout:void 0,Pl=typeof Promise=="function"?Promise:void 0,zp=typeof queueMicrotask=="function"?queueMicrotask:typeof Pl<"u"?function(e){return Pl.resolve(null).then(e).catch(Ap)}:Ea;function Ap(e){setTimeout(function(){throw e})}function Ho(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Lr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Lr(t)}function en(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _l(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var nr=Math.random().toString(36).slice(2),Ct="__reactFiber$"+nr,Mr="__reactProps$"+nr,It="__reactContainer$"+nr,Ca="__reactEvents$"+nr,Fp="__reactListeners$"+nr,Hp="__reactHandles$"+nr;function hn(e){var t=e[Ct];if(t)return t;for(var n=e.parentNode;n;){if(t=n[It]||n[Ct]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_l(e);e!==null;){if(n=e[Ct])return n;e=_l(e)}return t}e=n,n=e.parentNode}return null}function Qr(e){return e=e[Ct]||e[It],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Un(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(V(33))}function po(e){return e[Mr]||null}var $a=[],Rn=-1;function un(e){return{current:e}}function Te(e){0>Rn||(e.current=$a[Rn],$a[Rn]=null,Rn--)}function xe(e,t){Rn++,$a[Rn]=e.current,e.current=t}var an={},Ae=un(an),Qe=un(!1),wn=an;function Gn(e,t){var n=e.type.contextTypes;if(!n)return an;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ke(e){return e=e.childContextTypes,e!=null}function Hs(){Te(Qe),Te(Ae)}function Ol(e,t,n){if(Ae.current!==an)throw Error(V(168));xe(Ae,t),xe(Qe,n)}function Ec(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(V(108,Cf(e)||"Unknown",s));return Ee({},n,r)}function Ws(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||an,wn=Ae.current,xe(Ae,e),xe(Qe,Qe.current),!0}function Ll(e,t,n){var r=e.stateNode;if(!r)throw Error(V(169));n?(e=Ec(e,t,wn),r.__reactInternalMemoizedMergedChildContext=e,Te(Qe),Te(Ae),xe(Ae,e)):Te(Qe),xe(Qe,n)}var Lt=null,ho=!1,Wo=!1;function Cc(e){Lt===null?Lt=[e]:Lt.push(e)}function Wp(e){ho=!0,Cc(e)}function cn(){if(!Wo&&Lt!==null){Wo=!0;var e=0,t=ge;try{var n=Lt;for(ge=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Lt=null,ho=!1}catch(s){throw Lt!==null&&(Lt=Lt.slice(e+1)),Xu(li,cn),s}finally{ge=t,Wo=!1}}return null}var Bn=[],Dn=0,Vs=null,qs=0,lt=[],ut=0,vn=null,Ut=1,Rt="";function fn(e,t){Bn[Dn++]=qs,Bn[Dn++]=Vs,Vs=e,qs=t}function $c(e,t,n){lt[ut++]=Ut,lt[ut++]=Rt,lt[ut++]=vn,vn=e;var r=Ut;e=Rt;var s=32-vt(r)-1;r&=~(1<<s),n+=1;var o=32-vt(t)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Ut=1<<32-vt(t)+s|n<<s|r,Rt=o+e}else Ut=1<<o|n<<s|r,Rt=e}function gi(e){e.return!==null&&(fn(e,1),$c(e,1,0))}function xi(e){for(;e===Vs;)Vs=Bn[--Dn],Bn[Dn]=null,qs=Bn[--Dn],Bn[Dn]=null;for(;e===vn;)vn=lt[--ut],lt[ut]=null,Rt=lt[--ut],lt[ut]=null,Ut=lt[--ut],lt[ut]=null}var tt=null,et=null,ke=!1,wt=null;function Nc(e,t){var n=ct(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ul(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,tt=e,et=en(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,tt=e,et=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=vn!==null?{id:Ut,overflow:Rt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ct(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,tt=e,et=null,!0):!1;default:return!1}}function Na(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Pa(e){if(ke){var t=et;if(t){var n=t;if(!Ul(e,t)){if(Na(e))throw Error(V(418));t=en(n.nextSibling);var r=tt;t&&Ul(e,t)?Nc(r,n):(e.flags=e.flags&-4097|2,ke=!1,tt=e)}}else{if(Na(e))throw Error(V(418));e.flags=e.flags&-4097|2,ke=!1,tt=e}}}function Rl(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tt=e}function ds(e){if(e!==tt)return!1;if(!ke)return Rl(e),ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Sa(e.type,e.memoizedProps)),t&&(t=et)){if(Na(e))throw Pc(),Error(V(418));for(;t;)Nc(e,t),t=en(t.nextSibling)}if(Rl(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(V(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){et=en(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}et=null}}else et=tt?en(e.stateNode.nextSibling):null;return!0}function Pc(){for(var e=et;e;)e=en(e.nextSibling)}function Qn(){et=tt=null,ke=!1}function wi(e){wt===null?wt=[e]:wt.push(e)}var Vp=Ht.ReactCurrentBatchConfig;function dr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(V(309));var r=n.stateNode}if(!r)throw Error(V(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=s.refs;i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(V(284));if(!n._owner)throw Error(V(290,e))}return e}function fs(e,t){throw e=Object.prototype.toString.call(t),Error(V(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Bl(e){var t=e._init;return t(e._payload)}function _c(e){function t(y,h){if(e){var m=y.deletions;m===null?(y.deletions=[h],y.flags|=16):m.push(h)}}function n(y,h){if(!e)return null;for(;h!==null;)t(y,h),h=h.sibling;return null}function r(y,h){for(y=new Map;h!==null;)h.key!==null?y.set(h.key,h):y.set(h.index,h),h=h.sibling;return y}function s(y,h){return y=sn(y,h),y.index=0,y.sibling=null,y}function o(y,h,m){return y.index=m,e?(m=y.alternate,m!==null?(m=m.index,m<h?(y.flags|=2,h):m):(y.flags|=2,h)):(y.flags|=1048576,h)}function i(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,h,m,w){return h===null||h.tag!==6?(h=Yo(m,y.mode,w),h.return=y,h):(h=s(h,m),h.return=y,h)}function l(y,h,m,w){var j=m.type;return j===Pn?c(y,h,m.props.children,w,m.key):h!==null&&(h.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Vt&&Bl(j)===h.type)?(w=s(h,m.props),w.ref=dr(y,h,m),w.return=y,w):(w=Ps(m.type,m.key,m.props,null,y.mode,w),w.ref=dr(y,h,m),w.return=y,w)}function u(y,h,m,w){return h===null||h.tag!==4||h.stateNode.containerInfo!==m.containerInfo||h.stateNode.implementation!==m.implementation?(h=Xo(m,y.mode,w),h.return=y,h):(h=s(h,m.children||[]),h.return=y,h)}function c(y,h,m,w,j){return h===null||h.tag!==7?(h=xn(m,y.mode,w,j),h.return=y,h):(h=s(h,m),h.return=y,h)}function f(y,h,m){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Yo(""+h,y.mode,m),h.return=y,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case ts:return m=Ps(h.type,h.key,h.props,null,y.mode,m),m.ref=dr(y,null,h),m.return=y,m;case Nn:return h=Xo(h,y.mode,m),h.return=y,h;case Vt:var w=h._init;return f(y,w(h._payload),m)}if(yr(h)||ar(h))return h=xn(h,y.mode,m,null),h.return=y,h;fs(y,h)}return null}function p(y,h,m,w){var j=h!==null?h.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return j!==null?null:a(y,h,""+m,w);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ts:return m.key===j?l(y,h,m,w):null;case Nn:return m.key===j?u(y,h,m,w):null;case Vt:return j=m._init,p(y,h,j(m._payload),w)}if(yr(m)||ar(m))return j!==null?null:c(y,h,m,w,null);fs(y,m)}return null}function g(y,h,m,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(m)||null,a(h,y,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ts:return y=y.get(w.key===null?m:w.key)||null,l(h,y,w,j);case Nn:return y=y.get(w.key===null?m:w.key)||null,u(h,y,w,j);case Vt:var C=w._init;return g(y,h,m,C(w._payload),j)}if(yr(w)||ar(w))return y=y.get(m)||null,c(h,y,w,j,null);fs(h,w)}return null}function k(y,h,m,w){for(var j=null,C=null,P=h,E=h=0,O=null;P!==null&&E<m.length;E++){P.index>E?(O=P,P=null):O=P.sibling;var B=p(y,P,m[E],w);if(B===null){P===null&&(P=O);break}e&&P&&B.alternate===null&&t(y,P),h=o(B,h,E),C===null?j=B:C.sibling=B,C=B,P=O}if(E===m.length)return n(y,P),ke&&fn(y,E),j;if(P===null){for(;E<m.length;E++)P=f(y,m[E],w),P!==null&&(h=o(P,h,E),C===null?j=P:C.sibling=P,C=P);return ke&&fn(y,E),j}for(P=r(y,P);E<m.length;E++)O=g(P,y,E,m[E],w),O!==null&&(e&&O.alternate!==null&&P.delete(O.key===null?E:O.key),h=o(O,h,E),C===null?j=O:C.sibling=O,C=O);return e&&P.forEach(function(F){return t(y,F)}),ke&&fn(y,E),j}function v(y,h,m,w){var j=ar(m);if(typeof j!="function")throw Error(V(150));if(m=j.call(m),m==null)throw Error(V(151));for(var C=j=null,P=h,E=h=0,O=null,B=m.next();P!==null&&!B.done;E++,B=m.next()){P.index>E?(O=P,P=null):O=P.sibling;var F=p(y,P,B.value,w);if(F===null){P===null&&(P=O);break}e&&P&&F.alternate===null&&t(y,P),h=o(F,h,E),C===null?j=F:C.sibling=F,C=F,P=O}if(B.done)return n(y,P),ke&&fn(y,E),j;if(P===null){for(;!B.done;E++,B=m.next())B=f(y,B.value,w),B!==null&&(h=o(B,h,E),C===null?j=B:C.sibling=B,C=B);return ke&&fn(y,E),j}for(P=r(y,P);!B.done;E++,B=m.next())B=g(P,y,E,B.value,w),B!==null&&(e&&B.alternate!==null&&P.delete(B.key===null?E:B.key),h=o(B,h,E),C===null?j=B:C.sibling=B,C=B);return e&&P.forEach(function(re){return t(y,re)}),ke&&fn(y,E),j}function b(y,h,m,w){if(typeof m=="object"&&m!==null&&m.type===Pn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case ts:e:{for(var j=m.key,C=h;C!==null;){if(C.key===j){if(j=m.type,j===Pn){if(C.tag===7){n(y,C.sibling),h=s(C,m.props.children),h.return=y,y=h;break e}}else if(C.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Vt&&Bl(j)===C.type){n(y,C.sibling),h=s(C,m.props),h.ref=dr(y,C,m),h.return=y,y=h;break e}n(y,C);break}else t(y,C);C=C.sibling}m.type===Pn?(h=xn(m.props.children,y.mode,w,m.key),h.return=y,y=h):(w=Ps(m.type,m.key,m.props,null,y.mode,w),w.ref=dr(y,h,m),w.return=y,y=w)}return i(y);case Nn:e:{for(C=m.key;h!==null;){if(h.key===C)if(h.tag===4&&h.stateNode.containerInfo===m.containerInfo&&h.stateNode.implementation===m.implementation){n(y,h.sibling),h=s(h,m.children||[]),h.return=y,y=h;break e}else{n(y,h);break}else t(y,h);h=h.sibling}h=Xo(m,y.mode,w),h.return=y,y=h}return i(y);case Vt:return C=m._init,b(y,h,C(m._payload),w)}if(yr(m))return k(y,h,m,w);if(ar(m))return v(y,h,m,w);fs(y,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,h!==null&&h.tag===6?(n(y,h.sibling),h=s(h,m),h.return=y,y=h):(n(y,h),h=Yo(m,y.mode,w),h.return=y,y=h),i(y)):n(y,h)}return b}var Kn=_c(!0),Oc=_c(!1),Js=un(null),Gs=null,Mn=null,vi=null;function Ti(){vi=Mn=Gs=null}function ki(e){var t=Js.current;Te(Js),e._currentValue=t}function _a(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Vn(e,t){Gs=e,vi=Mn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ge=!0),e.firstContext=null)}function ft(e){var t=e._currentValue;if(vi!==e)if(e={context:e,memoizedValue:t,next:null},Mn===null){if(Gs===null)throw Error(V(308));Mn=e,Gs.dependencies={lanes:0,firstContext:e}}else Mn=Mn.next=e;return t}var mn=null;function bi(e){mn===null?mn=[e]:mn.push(e)}function Lc(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,bi(t)):(n.next=s.next,s.next=n),t.interleaved=n,zt(e,r)}function zt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var qt=!1;function ji(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function tn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,zt(e,n)}return s=r.interleaved,s===null?(t.next=t,bi(r)):(t.next=s.next,s.next=t),r.interleaved=t,zt(e,n)}function js(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ui(e,n)}}function Dl(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Qs(e,t,n,r){var s=e.updateQueue;qt=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,i===null?o=u:i.next=u,i=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==i&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var f=s.baseState;i=0,c=u=l=null,a=o;do{var p=a.lane,g=a.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=e,v=a;switch(p=t,g=n,v.tag){case 1:if(k=v.payload,typeof k=="function"){f=k.call(g,f,p);break e}f=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=v.payload,p=typeof k=="function"?k.call(g,f,p):k,p==null)break e;f=Ee({},f,p);break e;case 2:qt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=g,l=f):c=c.next=g,i|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(c===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);kn|=i,e.lanes=i,e.memoizedState=f}}function Ml(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(V(191,s));s.call(r)}}}var Kr={},Nt=un(Kr),Ir=un(Kr),zr=un(Kr);function yn(e){if(e===Kr)throw Error(V(174));return e}function Si(e,t){switch(xe(zr,t),xe(Ir,e),xe(Nt,Kr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:da(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=da(t,e)}Te(Nt),xe(Nt,t)}function Yn(){Te(Nt),Te(Ir),Te(zr)}function Rc(e){yn(zr.current);var t=yn(Nt.current),n=da(t,e.type);t!==n&&(xe(Ir,e),xe(Nt,n))}function Ei(e){Ir.current===e&&(Te(Nt),Te(Ir))}var je=un(0);function Ks(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vo=[];function Ci(){for(var e=0;e<Vo.length;e++)Vo[e]._workInProgressVersionPrimary=null;Vo.length=0}var Ss=Ht.ReactCurrentDispatcher,qo=Ht.ReactCurrentBatchConfig,Tn=0,Se=null,_e=null,Le=null,Ys=!1,jr=!1,Ar=0,qp=0;function Me(){throw Error(V(321))}function $i(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!kt(e[n],t[n]))return!1;return!0}function Ni(e,t,n,r,s,o){if(Tn=o,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ss.current=e===null||e.memoizedState===null?Kp:Yp,e=n(r,s),jr){o=0;do{if(jr=!1,Ar=0,25<=o)throw Error(V(301));o+=1,Le=_e=null,t.updateQueue=null,Ss.current=Xp,e=n(r,s)}while(jr)}if(Ss.current=Xs,t=_e!==null&&_e.next!==null,Tn=0,Le=_e=Se=null,Ys=!1,t)throw Error(V(300));return e}function Pi(){var e=Ar!==0;return Ar=0,e}function Et(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?Se.memoizedState=Le=e:Le=Le.next=e,Le}function pt(){if(_e===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=_e.next;var t=Le===null?Se.memoizedState:Le.next;if(t!==null)Le=t,_e=e;else{if(e===null)throw Error(V(310));_e=e,e={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},Le===null?Se.memoizedState=Le=e:Le=Le.next=e}return Le}function Fr(e,t){return typeof t=="function"?t(e):t}function Jo(e){var t=pt(),n=t.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=e;var r=_e,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var a=i=null,l=null,u=o;do{var c=u.lane;if((Tn&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,i=r):l=l.next=f,Se.lanes|=c,kn|=c}u=u.next}while(u!==null&&u!==o);l===null?i=r:l.next=a,kt(r,t.memoizedState)||(Ge=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Se.lanes|=o,kn|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Go(e){var t=pt(),n=t.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);kt(o,t.memoizedState)||(Ge=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Bc(){}function Dc(e,t){var n=Se,r=pt(),s=t(),o=!kt(r.memoizedState,s);if(o&&(r.memoizedState=s,Ge=!0),r=r.queue,_i(zc.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,Hr(9,Ic.bind(null,n,r,s,t),void 0,null),Ue===null)throw Error(V(349));Tn&30||Mc(n,t,s)}return s}function Mc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ic(e,t,n,r){t.value=n,t.getSnapshot=r,Ac(t)&&Fc(e)}function zc(e,t,n){return n(function(){Ac(t)&&Fc(e)})}function Ac(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!kt(e,n)}catch{return!0}}function Fc(e){var t=zt(e,1);t!==null&&Tt(t,e,1,-1)}function Il(e){var t=Et();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fr,lastRenderedState:e},t.queue=e,e=e.dispatch=Qp.bind(null,Se,e),[t.memoizedState,e]}function Hr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Hc(){return pt().memoizedState}function Es(e,t,n,r){var s=Et();Se.flags|=e,s.memoizedState=Hr(1|t,n,void 0,r===void 0?null:r)}function mo(e,t,n,r){var s=pt();r=r===void 0?null:r;var o=void 0;if(_e!==null){var i=_e.memoizedState;if(o=i.destroy,r!==null&&$i(r,i.deps)){s.memoizedState=Hr(t,n,o,r);return}}Se.flags|=e,s.memoizedState=Hr(1|t,n,o,r)}function zl(e,t){return Es(8390656,8,e,t)}function _i(e,t){return mo(2048,8,e,t)}function Wc(e,t){return mo(4,2,e,t)}function Vc(e,t){return mo(4,4,e,t)}function qc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jc(e,t,n){return n=n!=null?n.concat([e]):null,mo(4,4,qc.bind(null,t,e),n)}function Oi(){}function Gc(e,t){var n=pt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$i(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qc(e,t){var n=pt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$i(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Kc(e,t,n){return Tn&21?(kt(n,t)||(n=tc(),Se.lanes|=n,kn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ge=!0),e.memoizedState=n)}function Jp(e,t){var n=ge;ge=n!==0&&4>n?n:4,e(!0);var r=qo.transition;qo.transition={};try{e(!1),t()}finally{ge=n,qo.transition=r}}function Yc(){return pt().memoizedState}function Gp(e,t,n){var r=rn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xc(e))Zc(t,n);else if(n=Lc(e,t,n,r),n!==null){var s=We();Tt(n,e,r,s),ed(n,t,r)}}function Qp(e,t,n){var r=rn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xc(e))Zc(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,a=o(i,n);if(s.hasEagerState=!0,s.eagerState=a,kt(a,i)){var l=t.interleaved;l===null?(s.next=s,bi(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=Lc(e,t,s,r),n!==null&&(s=We(),Tt(n,e,r,s),ed(n,t,r))}}function Xc(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function Zc(e,t){jr=Ys=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ed(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ui(e,n)}}var Xs={readContext:ft,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useInsertionEffect:Me,useLayoutEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useMutableSource:Me,useSyncExternalStore:Me,useId:Me,unstable_isNewReconciler:!1},Kp={readContext:ft,useCallback:function(e,t){return Et().memoizedState=[e,t===void 0?null:t],e},useContext:ft,useEffect:zl,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Es(4194308,4,qc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Es(4194308,4,e,t)},useInsertionEffect:function(e,t){return Es(4,2,e,t)},useMemo:function(e,t){var n=Et();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Et();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gp.bind(null,Se,e),[r.memoizedState,e]},useRef:function(e){var t=Et();return e={current:e},t.memoizedState=e},useState:Il,useDebugValue:Oi,useDeferredValue:function(e){return Et().memoizedState=e},useTransition:function(){var e=Il(!1),t=e[0];return e=Jp.bind(null,e[1]),Et().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Se,s=Et();if(ke){if(n===void 0)throw Error(V(407));n=n()}else{if(n=t(),Ue===null)throw Error(V(349));Tn&30||Mc(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,zl(zc.bind(null,r,o,e),[e]),r.flags|=2048,Hr(9,Ic.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Et(),t=Ue.identifierPrefix;if(ke){var n=Rt,r=Ut;n=(r&~(1<<32-vt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ar++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=qp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Yp={readContext:ft,useCallback:Gc,useContext:ft,useEffect:_i,useImperativeHandle:Jc,useInsertionEffect:Wc,useLayoutEffect:Vc,useMemo:Qc,useReducer:Jo,useRef:Hc,useState:function(){return Jo(Fr)},useDebugValue:Oi,useDeferredValue:function(e){var t=pt();return Kc(t,_e.memoizedState,e)},useTransition:function(){var e=Jo(Fr)[0],t=pt().memoizedState;return[e,t]},useMutableSource:Bc,useSyncExternalStore:Dc,useId:Yc,unstable_isNewReconciler:!1},Xp={readContext:ft,useCallback:Gc,useContext:ft,useEffect:_i,useImperativeHandle:Jc,useInsertionEffect:Wc,useLayoutEffect:Vc,useMemo:Qc,useReducer:Go,useRef:Hc,useState:function(){return Go(Fr)},useDebugValue:Oi,useDeferredValue:function(e){var t=pt();return _e===null?t.memoizedState=e:Kc(t,_e.memoizedState,e)},useTransition:function(){var e=Go(Fr)[0],t=pt().memoizedState;return[e,t]},useMutableSource:Bc,useSyncExternalStore:Dc,useId:Yc,unstable_isNewReconciler:!1};function gt(e,t){if(e&&e.defaultProps){t=Ee({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Oa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ee({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var yo={isMounted:function(e){return(e=e._reactInternals)?Sn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=We(),s=rn(e),o=Bt(r,s);o.payload=t,n!=null&&(o.callback=n),t=tn(e,o,s),t!==null&&(Tt(t,e,s,r),js(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=We(),s=rn(e),o=Bt(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=tn(e,o,s),t!==null&&(Tt(t,e,s,r),js(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=We(),r=rn(e),s=Bt(n,r);s.tag=2,t!=null&&(s.callback=t),t=tn(e,s,r),t!==null&&(Tt(t,e,r,n),js(t,e,r))}};function Al(e,t,n,r,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!Rr(n,r)||!Rr(s,o):!0}function td(e,t,n){var r=!1,s=an,o=t.contextType;return typeof o=="object"&&o!==null?o=ft(o):(s=Ke(t)?wn:Ae.current,r=t.contextTypes,o=(r=r!=null)?Gn(e,s):an),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Fl(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yo.enqueueReplaceState(t,t.state,null)}function La(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ji(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=ft(o):(o=Ke(t)?wn:Ae.current,s.context=Gn(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Oa(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&yo.enqueueReplaceState(s,s.state,null),Qs(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Xn(e,t){try{var n="",r=t;do n+=Ef(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Qo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ua(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Zp=typeof WeakMap=="function"?WeakMap:Map;function nd(e,t,n){n=Bt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){eo||(eo=!0,Wa=r),Ua(e,t)},n}function rd(e,t,n){n=Bt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ua(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Ua(e,t),typeof r!="function"&&(nn===null?nn=new Set([this]):nn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Hl(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Zp;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=ph.bind(null,e,t,n),t.then(e,e))}function Wl(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vl(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Bt(-1,1),t.tag=2,tn(n,t,1))),n.lanes|=1),e)}var eh=Ht.ReactCurrentOwner,Ge=!1;function Fe(e,t,n,r){t.child=e===null?Oc(t,null,n,r):Kn(t,e.child,n,r)}function ql(e,t,n,r,s){n=n.render;var o=t.ref;return Vn(t,s),r=Ni(e,t,n,r,o,s),n=Pi(),e!==null&&!Ge?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,At(e,t,s)):(ke&&n&&gi(t),t.flags|=1,Fe(e,t,r,s),t.child)}function Jl(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!zi(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,sd(e,t,o,r,s)):(e=Ps(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Rr,n(i,r)&&e.ref===t.ref)return At(e,t,s)}return t.flags|=1,e=sn(o,r),e.ref=t.ref,e.return=t,t.child=e}function sd(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Rr(o,r)&&e.ref===t.ref)if(Ge=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(Ge=!0);else return t.lanes=e.lanes,At(e,t,s)}return Ra(e,t,n,r,s)}function od(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(zn,Ze),Ze|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xe(zn,Ze),Ze|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,xe(zn,Ze),Ze|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,xe(zn,Ze),Ze|=r;return Fe(e,t,s,n),t.child}function ad(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ra(e,t,n,r,s){var o=Ke(n)?wn:Ae.current;return o=Gn(t,o),Vn(t,s),n=Ni(e,t,n,r,o,s),r=Pi(),e!==null&&!Ge?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,At(e,t,s)):(ke&&r&&gi(t),t.flags|=1,Fe(e,t,n,s),t.child)}function Gl(e,t,n,r,s){if(Ke(n)){var o=!0;Ws(t)}else o=!1;if(Vn(t,s),t.stateNode===null)Cs(e,t),td(t,n,r),La(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var l=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=ft(u):(u=Ke(n)?wn:Ae.current,u=Gn(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Fl(t,i,r,u),qt=!1;var p=t.memoizedState;i.state=p,Qs(t,r,i,s),l=t.memoizedState,a!==r||p!==l||Qe.current||qt?(typeof c=="function"&&(Oa(t,n,c,r),l=t.memoizedState),(a=qt||Al(t,n,a,r,p,l,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=u,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Uc(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:gt(t.type,a),i.props=u,f=t.pendingProps,p=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=ft(l):(l=Ke(n)?wn:Ae.current,l=Gn(t,l));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==f||p!==l)&&Fl(t,i,r,l),qt=!1,p=t.memoizedState,i.state=p,Qs(t,r,i,s);var k=t.memoizedState;a!==f||p!==k||Qe.current||qt?(typeof g=="function"&&(Oa(t,n,g,r),k=t.memoizedState),(u=qt||Al(t,n,u,r,p,k,l)||!1)?(c||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,k,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,k,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),i.props=r,i.state=k,i.context=l,r=u):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Ba(e,t,n,r,o,s)}function Ba(e,t,n,r,s,o){ad(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&Ll(t,n,!1),At(e,t,o);r=t.stateNode,eh.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=Kn(t,e.child,null,o),t.child=Kn(t,null,a,o)):Fe(e,t,a,o),t.memoizedState=r.state,s&&Ll(t,n,!0),t.child}function id(e){var t=e.stateNode;t.pendingContext?Ol(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ol(e,t.context,!1),Si(e,t.containerInfo)}function Ql(e,t,n,r,s){return Qn(),wi(s),t.flags|=256,Fe(e,t,n,r),t.child}var Da={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function ld(e,t,n){var r=t.pendingProps,s=je.current,o=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),xe(je,s&1),e===null)return Pa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=wo(i,r,0,null),e=xn(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ma(n),t.memoizedState=Da,e):Li(t,i));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return th(e,t,i,r,a,s,n);if(o){o=r.fallback,i=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(i&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=sn(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=sn(a,o):(o=xn(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?Ma(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=Da,r}return o=e.child,e=o.sibling,r=sn(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Li(e,t){return t=wo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ps(e,t,n,r){return r!==null&&wi(r),Kn(t,e.child,null,n),e=Li(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function th(e,t,n,r,s,o,i){if(n)return t.flags&256?(t.flags&=-257,r=Qo(Error(V(422))),ps(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=wo({mode:"visible",children:r.children},s,0,null),o=xn(o,s,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Kn(t,e.child,null,i),t.child.memoizedState=Ma(i),t.memoizedState=Da,o);if(!(t.mode&1))return ps(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(V(419)),r=Qo(o,r,void 0),ps(e,t,i,r)}if(a=(i&e.childLanes)!==0,Ge||a){if(r=Ue,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,zt(e,s),Tt(r,e,s,-1))}return Ii(),r=Qo(Error(V(421))),ps(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=hh.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,et=en(s.nextSibling),tt=t,ke=!0,wt=null,e!==null&&(lt[ut++]=Ut,lt[ut++]=Rt,lt[ut++]=vn,Ut=e.id,Rt=e.overflow,vn=t),t=Li(t,r.children),t.flags|=4096,t)}function Kl(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),_a(e.return,t,n)}function Ko(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function ud(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(Fe(e,t,r.children,n),r=je.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Kl(e,n,t);else if(e.tag===19)Kl(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xe(je,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ks(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ko(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ks(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ko(t,!0,n,null,o);break;case"together":Ko(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function At(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),kn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(V(153));if(t.child!==null){for(e=t.child,n=sn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=sn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function nh(e,t,n){switch(t.tag){case 3:id(t),Qn();break;case 5:Rc(t);break;case 1:Ke(t.type)&&Ws(t);break;case 4:Si(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;xe(Js,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(xe(je,je.current&1),t.flags|=128,null):n&t.child.childLanes?ld(e,t,n):(xe(je,je.current&1),e=At(e,t,n),e!==null?e.sibling:null);xe(je,je.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return ud(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),xe(je,je.current),r)break;return null;case 22:case 23:return t.lanes=0,od(e,t,n)}return At(e,t,n)}var cd,Ia,dd,fd;cd=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ia=function(){};dd=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,yn(Nt.current);var o=null;switch(n){case"input":s=ia(e,s),r=ia(e,r),o=[];break;case"select":s=Ee({},s,{value:void 0}),r=Ee({},r,{value:void 0}),o=[];break;case"textarea":s=ca(e,s),r=ca(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Fs)}fa(n,r);var i;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&($r.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&($r.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ve("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};fd=function(e,t,n,r){n!==r&&(t.flags|=4)};function fr(e,t){if(!ke)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ie(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rh(e,t,n){var r=t.pendingProps;switch(xi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(t),null;case 1:return Ke(t.type)&&Hs(),Ie(t),null;case 3:return r=t.stateNode,Yn(),Te(Qe),Te(Ae),Ci(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ds(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wt!==null&&(Ja(wt),wt=null))),Ia(e,t),Ie(t),null;case 5:Ei(t);var s=yn(zr.current);if(n=t.type,e!==null&&t.stateNode!=null)dd(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(V(166));return Ie(t),null}if(e=yn(Nt.current),ds(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Ct]=t,r[Mr]=o,e=(t.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(s=0;s<xr.length;s++)ve(xr[s],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":ol(r,o),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ve("invalid",r);break;case"textarea":il(r,o),ve("invalid",r)}fa(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&cs(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&cs(r.textContent,a,e),s=["children",""+a]):$r.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&ve("scroll",r)}switch(n){case"input":ns(r),al(r,o,!0);break;case"textarea":ns(r),ll(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Fs)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=zu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Ct]=t,e[Mr]=r,cd(e,t,!1,!1),t.stateNode=e;e:{switch(i=pa(n,r),n){case"dialog":ve("cancel",e),ve("close",e),s=r;break;case"iframe":case"object":case"embed":ve("load",e),s=r;break;case"video":case"audio":for(s=0;s<xr.length;s++)ve(xr[s],e);s=r;break;case"source":ve("error",e),s=r;break;case"img":case"image":case"link":ve("error",e),ve("load",e),s=r;break;case"details":ve("toggle",e),s=r;break;case"input":ol(e,r),s=ia(e,r),ve("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ee({},r,{value:void 0}),ve("invalid",e);break;case"textarea":il(e,r),s=ca(e,r),ve("invalid",e);break;default:s=r}fa(n,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?Hu(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Au(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Nr(e,l):typeof l=="number"&&Nr(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&($r.hasOwnProperty(o)?l!=null&&o==="onScroll"&&ve("scroll",e):l!=null&&ri(e,o,l,i))}switch(n){case"input":ns(e),al(e,r,!1);break;case"textarea":ns(e),ll(e);break;case"option":r.value!=null&&e.setAttribute("value",""+on(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?An(e,!!r.multiple,o,!1):r.defaultValue!=null&&An(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Fs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ie(t),null;case 6:if(e&&t.stateNode!=null)fd(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(V(166));if(n=yn(zr.current),yn(Nt.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ct]=t,(o=r.nodeValue!==n)&&(e=tt,e!==null))switch(e.tag){case 3:cs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&cs(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ct]=t,t.stateNode=r}return Ie(t),null;case 13:if(Te(je),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ke&&et!==null&&t.mode&1&&!(t.flags&128))Pc(),Qn(),t.flags|=98560,o=!1;else if(o=ds(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(V(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(V(317));o[Ct]=t}else Qn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ie(t),o=!1}else wt!==null&&(Ja(wt),wt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||je.current&1?Oe===0&&(Oe=3):Ii())),t.updateQueue!==null&&(t.flags|=4),Ie(t),null);case 4:return Yn(),Ia(e,t),e===null&&Br(t.stateNode.containerInfo),Ie(t),null;case 10:return ki(t.type._context),Ie(t),null;case 17:return Ke(t.type)&&Hs(),Ie(t),null;case 19:if(Te(je),o=t.memoizedState,o===null)return Ie(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)fr(o,!1);else{if(Oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Ks(e),i!==null){for(t.flags|=128,fr(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xe(je,je.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ne()>Zn&&(t.flags|=128,r=!0,fr(o,!1),t.lanes=4194304)}else{if(!r)if(e=Ks(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),fr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!ke)return Ie(t),null}else 2*Ne()-o.renderingStartTime>Zn&&n!==1073741824&&(t.flags|=128,r=!0,fr(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ne(),t.sibling=null,n=je.current,xe(je,r?n&1|2:n&1),t):(Ie(t),null);case 22:case 23:return Mi(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ze&1073741824&&(Ie(t),t.subtreeFlags&6&&(t.flags|=8192)):Ie(t),null;case 24:return null;case 25:return null}throw Error(V(156,t.tag))}function sh(e,t){switch(xi(t),t.tag){case 1:return Ke(t.type)&&Hs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yn(),Te(Qe),Te(Ae),Ci(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ei(t),null;case 13:if(Te(je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(V(340));Qn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Te(je),null;case 4:return Yn(),null;case 10:return ki(t.type._context),null;case 22:case 23:return Mi(),null;case 24:return null;default:return null}}var hs=!1,ze=!1,oh=typeof WeakSet=="function"?WeakSet:Set,X=null;function In(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(e,t,r)}else n.current=null}function za(e,t,n){try{n()}catch(r){Ce(e,t,r)}}var Yl=!1;function ah(e,t){if(ba=Is,e=gc(),yi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,a=-1,l=-1,u=0,c=0,f=e,p=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(a=i+s),f!==o||r!==0&&f.nodeType!==3||(l=i+r),f.nodeType===3&&(i+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===e)break t;if(p===n&&++u===s&&(a=i),p===o&&++c===r&&(l=i),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ja={focusedElem:e,selectionRange:n},Is=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var v=k.memoizedProps,b=k.memoizedState,y=t.stateNode,h=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:gt(t.type,v),b);y.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(w){Ce(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return k=Yl,Yl=!1,k}function Sr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&za(t,n,o)}s=s.next}while(s!==r)}}function go(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Aa(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function pd(e){var t=e.alternate;t!==null&&(e.alternate=null,pd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ct],delete t[Mr],delete t[Ca],delete t[Fp],delete t[Hp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hd(e){return e.tag===5||e.tag===3||e.tag===4}function Xl(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Fs));else if(r!==4&&(e=e.child,e!==null))for(Fa(e,t,n),e=e.sibling;e!==null;)Fa(e,t,n),e=e.sibling}function Ha(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ha(e,t,n),e=e.sibling;e!==null;)Ha(e,t,n),e=e.sibling}var Re=null,xt=!1;function Wt(e,t,n){for(n=n.child;n!==null;)md(e,t,n),n=n.sibling}function md(e,t,n){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(lo,n)}catch{}switch(n.tag){case 5:ze||In(n,t);case 6:var r=Re,s=xt;Re=null,Wt(e,t,n),Re=r,xt=s,Re!==null&&(xt?(e=Re,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Re.removeChild(n.stateNode));break;case 18:Re!==null&&(xt?(e=Re,n=n.stateNode,e.nodeType===8?Ho(e.parentNode,n):e.nodeType===1&&Ho(e,n),Lr(e)):Ho(Re,n.stateNode));break;case 4:r=Re,s=xt,Re=n.stateNode.containerInfo,xt=!0,Wt(e,t,n),Re=r,xt=s;break;case 0:case 11:case 14:case 15:if(!ze&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&za(n,t,i),s=s.next}while(s!==r)}Wt(e,t,n);break;case 1:if(!ze&&(In(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ce(n,t,a)}Wt(e,t,n);break;case 21:Wt(e,t,n);break;case 22:n.mode&1?(ze=(r=ze)||n.memoizedState!==null,Wt(e,t,n),ze=r):Wt(e,t,n);break;default:Wt(e,t,n)}}function Zl(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new oh),t.forEach(function(r){var s=mh.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function yt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:Re=a.stateNode,xt=!1;break e;case 3:Re=a.stateNode.containerInfo,xt=!0;break e;case 4:Re=a.stateNode.containerInfo,xt=!0;break e}a=a.return}if(Re===null)throw Error(V(160));md(o,i,s),Re=null,xt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Ce(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yd(t,e),t=t.sibling}function yd(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yt(t,e),St(e),r&4){try{Sr(3,e,e.return),go(3,e)}catch(v){Ce(e,e.return,v)}try{Sr(5,e,e.return)}catch(v){Ce(e,e.return,v)}}break;case 1:yt(t,e),St(e),r&512&&n!==null&&In(n,n.return);break;case 5:if(yt(t,e),St(e),r&512&&n!==null&&In(n,n.return),e.flags&32){var s=e.stateNode;try{Nr(s,"")}catch(v){Ce(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Mu(s,o),pa(a,i);var u=pa(a,o);for(i=0;i<l.length;i+=2){var c=l[i],f=l[i+1];c==="style"?Hu(s,f):c==="dangerouslySetInnerHTML"?Au(s,f):c==="children"?Nr(s,f):ri(s,c,f,u)}switch(a){case"input":la(s,o);break;case"textarea":Iu(s,o);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?An(s,!!o.multiple,g,!1):p!==!!o.multiple&&(o.defaultValue!=null?An(s,!!o.multiple,o.defaultValue,!0):An(s,!!o.multiple,o.multiple?[]:"",!1))}s[Mr]=o}catch(v){Ce(e,e.return,v)}}break;case 6:if(yt(t,e),St(e),r&4){if(e.stateNode===null)throw Error(V(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(v){Ce(e,e.return,v)}}break;case 3:if(yt(t,e),St(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Lr(t.containerInfo)}catch(v){Ce(e,e.return,v)}break;case 4:yt(t,e),St(e);break;case 13:yt(t,e),St(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Bi=Ne())),r&4&&Zl(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ze=(u=ze)||c,yt(t,e),ze=u):yt(t,e),St(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(X=e,c=e.child;c!==null;){for(f=X=c;X!==null;){switch(p=X,g=p.child,p.tag){case 0:case 11:case 14:case 15:Sr(4,p,p.return);break;case 1:In(p,p.return);var k=p.stateNode;if(typeof k.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(v){Ce(r,n,v)}}break;case 5:In(p,p.return);break;case 22:if(p.memoizedState!==null){tu(f);continue}}g!==null?(g.return=p,X=g):tu(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{s=f.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Fu("display",i))}catch(v){Ce(e,e.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){Ce(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yt(t,e),St(e),r&4&&Zl(e);break;case 21:break;default:yt(t,e),St(e)}}function St(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(hd(n)){var r=n;break e}n=n.return}throw Error(V(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Nr(s,""),r.flags&=-33);var o=Xl(e);Ha(e,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,a=Xl(e);Fa(e,a,i);break;default:throw Error(V(161))}}catch(l){Ce(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ih(e,t,n){X=e,gd(e)}function gd(e,t,n){for(var r=(e.mode&1)!==0;X!==null;){var s=X,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||hs;if(!i){var a=s.alternate,l=a!==null&&a.memoizedState!==null||ze;a=hs;var u=ze;if(hs=i,(ze=l)&&!u)for(X=s;X!==null;)i=X,l=i.child,i.tag===22&&i.memoizedState!==null?nu(s):l!==null?(l.return=i,X=l):nu(s);for(;o!==null;)X=o,gd(o),o=o.sibling;X=s,hs=a,ze=u}eu(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,X=o):eu(e)}}function eu(e){for(;X!==null;){var t=X;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ze||go(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ze)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:gt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Ml(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ml(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Lr(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}ze||t.flags&512&&Aa(t)}catch(p){Ce(t,t.return,p)}}if(t===e){X=null;break}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}}function tu(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}function nu(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{go(4,t)}catch(l){Ce(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(l){Ce(t,s,l)}}var o=t.return;try{Aa(t)}catch(l){Ce(t,o,l)}break;case 5:var i=t.return;try{Aa(t)}catch(l){Ce(t,i,l)}}}catch(l){Ce(t,t.return,l)}if(t===e){X=null;break}var a=t.sibling;if(a!==null){a.return=t.return,X=a;break}X=t.return}}var lh=Math.ceil,Zs=Ht.ReactCurrentDispatcher,Ui=Ht.ReactCurrentOwner,dt=Ht.ReactCurrentBatchConfig,me=0,Ue=null,Pe=null,Be=0,Ze=0,zn=un(0),Oe=0,Wr=null,kn=0,xo=0,Ri=0,Er=null,Je=null,Bi=0,Zn=1/0,Ot=null,eo=!1,Wa=null,nn=null,ms=!1,Kt=null,to=0,Cr=0,Va=null,$s=-1,Ns=0;function We(){return me&6?Ne():$s!==-1?$s:$s=Ne()}function rn(e){return e.mode&1?me&2&&Be!==0?Be&-Be:Vp.transition!==null?(Ns===0&&(Ns=tc()),Ns):(e=ge,e!==0||(e=window.event,e=e===void 0?16:lc(e.type)),e):1}function Tt(e,t,n,r){if(50<Cr)throw Cr=0,Va=null,Error(V(185));Jr(e,n,r),(!(me&2)||e!==Ue)&&(e===Ue&&(!(me&2)&&(xo|=n),Oe===4&&Gt(e,Be)),Ye(e,r),n===1&&me===0&&!(t.mode&1)&&(Zn=Ne()+500,ho&&cn()))}function Ye(e,t){var n=e.callbackNode;Vf(e,t);var r=Ms(e,e===Ue?Be:0);if(r===0)n!==null&&dl(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&dl(n),t===1)e.tag===0?Wp(ru.bind(null,e)):Cc(ru.bind(null,e)),zp(function(){!(me&6)&&cn()}),n=null;else{switch(nc(r)){case 1:n=li;break;case 4:n=Zu;break;case 16:n=Ds;break;case 536870912:n=ec;break;default:n=Ds}n=Sd(n,xd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function xd(e,t){if($s=-1,Ns=0,me&6)throw Error(V(327));var n=e.callbackNode;if(qn()&&e.callbackNode!==n)return null;var r=Ms(e,e===Ue?Be:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=no(e,r);else{t=r;var s=me;me|=2;var o=vd();(Ue!==e||Be!==t)&&(Ot=null,Zn=Ne()+500,gn(e,t));do try{dh();break}catch(a){wd(e,a)}while(!0);Ti(),Zs.current=o,me=s,Pe!==null?t=0:(Ue=null,Be=0,t=Oe)}if(t!==0){if(t===2&&(s=xa(e),s!==0&&(r=s,t=qa(e,s))),t===1)throw n=Wr,gn(e,0),Gt(e,r),Ye(e,Ne()),n;if(t===6)Gt(e,r);else{if(s=e.current.alternate,!(r&30)&&!uh(s)&&(t=no(e,r),t===2&&(o=xa(e),o!==0&&(r=o,t=qa(e,o))),t===1))throw n=Wr,gn(e,0),Gt(e,r),Ye(e,Ne()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(V(345));case 2:pn(e,Je,Ot);break;case 3:if(Gt(e,r),(r&130023424)===r&&(t=Bi+500-Ne(),10<t)){if(Ms(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){We(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ea(pn.bind(null,e,Je,Ot),t);break}pn(e,Je,Ot);break;case 4:if(Gt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-vt(r);o=1<<i,i=t[i],i>s&&(s=i),r&=~o}if(r=s,r=Ne()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lh(r/1960))-r,10<r){e.timeoutHandle=Ea(pn.bind(null,e,Je,Ot),r);break}pn(e,Je,Ot);break;case 5:pn(e,Je,Ot);break;default:throw Error(V(329))}}}return Ye(e,Ne()),e.callbackNode===n?xd.bind(null,e):null}function qa(e,t){var n=Er;return e.current.memoizedState.isDehydrated&&(gn(e,t).flags|=256),e=no(e,t),e!==2&&(t=Je,Je=n,t!==null&&Ja(t)),e}function Ja(e){Je===null?Je=e:Je.push.apply(Je,e)}function uh(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!kt(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gt(e,t){for(t&=~Ri,t&=~xo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vt(t),r=1<<n;e[n]=-1,t&=~r}}function ru(e){if(me&6)throw Error(V(327));qn();var t=Ms(e,0);if(!(t&1))return Ye(e,Ne()),null;var n=no(e,t);if(e.tag!==0&&n===2){var r=xa(e);r!==0&&(t=r,n=qa(e,r))}if(n===1)throw n=Wr,gn(e,0),Gt(e,t),Ye(e,Ne()),n;if(n===6)throw Error(V(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pn(e,Je,Ot),Ye(e,Ne()),null}function Di(e,t){var n=me;me|=1;try{return e(t)}finally{me=n,me===0&&(Zn=Ne()+500,ho&&cn())}}function bn(e){Kt!==null&&Kt.tag===0&&!(me&6)&&qn();var t=me;me|=1;var n=dt.transition,r=ge;try{if(dt.transition=null,ge=1,e)return e()}finally{ge=r,dt.transition=n,me=t,!(me&6)&&cn()}}function Mi(){Ze=zn.current,Te(zn)}function gn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Ip(n)),Pe!==null)for(n=Pe.return;n!==null;){var r=n;switch(xi(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hs();break;case 3:Yn(),Te(Qe),Te(Ae),Ci();break;case 5:Ei(r);break;case 4:Yn();break;case 13:Te(je);break;case 19:Te(je);break;case 10:ki(r.type._context);break;case 22:case 23:Mi()}n=n.return}if(Ue=e,Pe=e=sn(e.current,null),Be=Ze=t,Oe=0,Wr=null,Ri=xo=kn=0,Je=Er=null,mn!==null){for(t=0;t<mn.length;t++)if(n=mn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}mn=null}return e}function wd(e,t){do{var n=Pe;try{if(Ti(),Ss.current=Xs,Ys){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ys=!1}if(Tn=0,Le=_e=Se=null,jr=!1,Ar=0,Ui.current=null,n===null||n.return===null){Oe=1,Wr=t,Pe=null;break}e:{var o=e,i=n.return,a=n,l=t;if(t=Be,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=Wl(i);if(g!==null){g.flags&=-257,Vl(g,i,a,o,t),g.mode&1&&Hl(o,u,t),t=g,l=u;var k=t.updateQueue;if(k===null){var v=new Set;v.add(l),t.updateQueue=v}else k.add(l);break e}else{if(!(t&1)){Hl(o,u,t),Ii();break e}l=Error(V(426))}}else if(ke&&a.mode&1){var b=Wl(i);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Vl(b,i,a,o,t),wi(Xn(l,a));break e}}o=l=Xn(l,a),Oe!==4&&(Oe=2),Er===null?Er=[o]:Er.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=nd(o,l,t);Dl(o,y);break e;case 1:a=l;var h=o.type,m=o.stateNode;if(!(o.flags&128)&&(typeof h.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(nn===null||!nn.has(m)))){o.flags|=65536,t&=-t,o.lanes|=t;var w=rd(o,a,t);Dl(o,w);break e}}o=o.return}while(o!==null)}kd(n)}catch(j){t=j,Pe===n&&n!==null&&(Pe=n=n.return);continue}break}while(!0)}function vd(){var e=Zs.current;return Zs.current=Xs,e===null?Xs:e}function Ii(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Ue===null||!(kn&268435455)&&!(xo&268435455)||Gt(Ue,Be)}function no(e,t){var n=me;me|=2;var r=vd();(Ue!==e||Be!==t)&&(Ot=null,gn(e,t));do try{ch();break}catch(s){wd(e,s)}while(!0);if(Ti(),me=n,Zs.current=r,Pe!==null)throw Error(V(261));return Ue=null,Be=0,Oe}function ch(){for(;Pe!==null;)Td(Pe)}function dh(){for(;Pe!==null&&!Bf();)Td(Pe)}function Td(e){var t=jd(e.alternate,e,Ze);e.memoizedProps=e.pendingProps,t===null?kd(e):Pe=t,Ui.current=null}function kd(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=sh(n,t),n!==null){n.flags&=32767,Pe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,Pe=null;return}}else if(n=rh(n,t,Ze),n!==null){Pe=n;return}if(t=t.sibling,t!==null){Pe=t;return}Pe=t=e}while(t!==null);Oe===0&&(Oe=5)}function pn(e,t,n){var r=ge,s=dt.transition;try{dt.transition=null,ge=1,fh(e,t,n,r)}finally{dt.transition=s,ge=r}return null}function fh(e,t,n,r){do qn();while(Kt!==null);if(me&6)throw Error(V(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(V(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(qf(e,o),e===Ue&&(Pe=Ue=null,Be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ms||(ms=!0,Sd(Ds,function(){return qn(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=dt.transition,dt.transition=null;var i=ge;ge=1;var a=me;me|=4,Ui.current=null,ah(e,n),yd(n,e),Op(ja),Is=!!ba,ja=ba=null,e.current=n,ih(n),Df(),me=a,ge=i,dt.transition=o}else e.current=n;if(ms&&(ms=!1,Kt=e,to=s),o=e.pendingLanes,o===0&&(nn=null),zf(n.stateNode),Ye(e,Ne()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(eo)throw eo=!1,e=Wa,Wa=null,e;return to&1&&e.tag!==0&&qn(),o=e.pendingLanes,o&1?e===Va?Cr++:(Cr=0,Va=e):Cr=0,cn(),null}function qn(){if(Kt!==null){var e=nc(to),t=dt.transition,n=ge;try{if(dt.transition=null,ge=16>e?16:e,Kt===null)var r=!1;else{if(e=Kt,Kt=null,to=0,me&6)throw Error(V(331));var s=me;for(me|=4,X=e.current;X!==null;){var o=X,i=o.child;if(X.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(X=u;X!==null;){var c=X;switch(c.tag){case 0:case 11:case 15:Sr(8,c,o)}var f=c.child;if(f!==null)f.return=c,X=f;else for(;X!==null;){c=X;var p=c.sibling,g=c.return;if(pd(c),c===u){X=null;break}if(p!==null){p.return=g,X=p;break}X=g}}}var k=o.alternate;if(k!==null){var v=k.child;if(v!==null){k.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}X=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,X=i;else e:for(;X!==null;){if(o=X,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Sr(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,X=y;break e}X=o.return}}var h=e.current;for(X=h;X!==null;){i=X;var m=i.child;if(i.subtreeFlags&2064&&m!==null)m.return=i,X=m;else e:for(i=h;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:go(9,a)}}catch(j){Ce(a,a.return,j)}if(a===i){X=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,X=w;break e}X=a.return}}if(me=s,cn(),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(lo,e)}catch{}r=!0}return r}finally{ge=n,dt.transition=t}}return!1}function su(e,t,n){t=Xn(n,t),t=nd(e,t,1),e=tn(e,t,1),t=We(),e!==null&&(Jr(e,1,t),Ye(e,t))}function Ce(e,t,n){if(e.tag===3)su(e,e,n);else for(;t!==null;){if(t.tag===3){su(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(nn===null||!nn.has(r))){e=Xn(n,e),e=rd(t,e,1),t=tn(t,e,1),e=We(),t!==null&&(Jr(t,1,e),Ye(t,e));break}}t=t.return}}function ph(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=We(),e.pingedLanes|=e.suspendedLanes&n,Ue===e&&(Be&n)===n&&(Oe===4||Oe===3&&(Be&130023424)===Be&&500>Ne()-Bi?gn(e,0):Ri|=n),Ye(e,t)}function bd(e,t){t===0&&(e.mode&1?(t=os,os<<=1,!(os&130023424)&&(os=4194304)):t=1);var n=We();e=zt(e,t),e!==null&&(Jr(e,t,n),Ye(e,n))}function hh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),bd(e,n)}function mh(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(V(314))}r!==null&&r.delete(t),bd(e,n)}var jd;jd=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qe.current)Ge=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ge=!1,nh(e,t,n);Ge=!!(e.flags&131072)}else Ge=!1,ke&&t.flags&1048576&&$c(t,qs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Cs(e,t),e=t.pendingProps;var s=Gn(t,Ae.current);Vn(t,n),s=Ni(null,t,r,e,s,n);var o=Pi();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ke(r)?(o=!0,Ws(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ji(t),s.updater=yo,t.stateNode=s,s._reactInternals=t,La(t,r,e,n),t=Ba(null,t,r,!0,o,n)):(t.tag=0,ke&&o&&gi(t),Fe(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Cs(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=gh(r),e=gt(r,e),s){case 0:t=Ra(null,t,r,e,n);break e;case 1:t=Gl(null,t,r,e,n);break e;case 11:t=ql(null,t,r,e,n);break e;case 14:t=Jl(null,t,r,gt(r.type,e),n);break e}throw Error(V(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gt(r,s),Ra(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gt(r,s),Gl(e,t,r,s,n);case 3:e:{if(id(t),e===null)throw Error(V(387));r=t.pendingProps,o=t.memoizedState,s=o.element,Uc(e,t),Qs(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Xn(Error(V(423)),t),t=Ql(e,t,r,n,s);break e}else if(r!==s){s=Xn(Error(V(424)),t),t=Ql(e,t,r,n,s);break e}else for(et=en(t.stateNode.containerInfo.firstChild),tt=t,ke=!0,wt=null,n=Oc(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qn(),r===s){t=At(e,t,n);break e}Fe(e,t,r,n)}t=t.child}return t;case 5:return Rc(t),e===null&&Pa(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,Sa(r,s)?i=null:o!==null&&Sa(r,o)&&(t.flags|=32),ad(e,t),Fe(e,t,i,n),t.child;case 6:return e===null&&Pa(t),null;case 13:return ld(e,t,n);case 4:return Si(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Kn(t,null,r,n):Fe(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gt(r,s),ql(e,t,r,s,n);case 7:return Fe(e,t,t.pendingProps,n),t.child;case 8:return Fe(e,t,t.pendingProps.children,n),t.child;case 12:return Fe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,xe(Js,r._currentValue),r._currentValue=i,o!==null)if(kt(o.value,i)){if(o.children===s.children&&!Qe.current){t=At(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Bt(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),_a(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(V(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),_a(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Fe(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Vn(t,n),s=ft(s),r=r(s),t.flags|=1,Fe(e,t,r,n),t.child;case 14:return r=t.type,s=gt(r,t.pendingProps),s=gt(r.type,s),Jl(e,t,r,s,n);case 15:return sd(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gt(r,s),Cs(e,t),t.tag=1,Ke(r)?(e=!0,Ws(t)):e=!1,Vn(t,n),td(t,r,s),La(t,r,s,n),Ba(null,t,r,!0,e,n);case 19:return ud(e,t,n);case 22:return od(e,t,n)}throw Error(V(156,t.tag))};function Sd(e,t){return Xu(e,t)}function yh(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ct(e,t,n,r){return new yh(e,t,n,r)}function zi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gh(e){if(typeof e=="function")return zi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oi)return 11;if(e===ai)return 14}return 2}function sn(e,t){var n=e.alternate;return n===null?(n=ct(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ps(e,t,n,r,s,o){var i=2;if(r=e,typeof e=="function")zi(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Pn:return xn(n.children,s,o,t);case si:i=8,s|=8;break;case ra:return e=ct(12,n,t,s|2),e.elementType=ra,e.lanes=o,e;case sa:return e=ct(13,n,t,s),e.elementType=sa,e.lanes=o,e;case oa:return e=ct(19,n,t,s),e.elementType=oa,e.lanes=o,e;case Ru:return wo(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Lu:i=10;break e;case Uu:i=9;break e;case oi:i=11;break e;case ai:i=14;break e;case Vt:i=16,r=null;break e}throw Error(V(130,e==null?e:typeof e,""))}return t=ct(i,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function xn(e,t,n,r){return e=ct(7,e,r,t),e.lanes=n,e}function wo(e,t,n,r){return e=ct(22,e,r,t),e.elementType=Ru,e.lanes=n,e.stateNode={isHidden:!1},e}function Yo(e,t,n){return e=ct(6,e,null,t),e.lanes=n,e}function Xo(e,t,n){return t=ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xh(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oo(0),this.expirationTimes=Oo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ai(e,t,n,r,s,o,i,a,l){return e=new xh(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ct(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ji(o),e}function wh(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ed(e){if(!e)return an;e=e._reactInternals;e:{if(Sn(e)!==e||e.tag!==1)throw Error(V(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ke(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(V(171))}if(e.tag===1){var n=e.type;if(Ke(n))return Ec(e,n,t)}return t}function Cd(e,t,n,r,s,o,i,a,l){return e=Ai(n,r,!0,e,s,o,i,a,l),e.context=Ed(null),n=e.current,r=We(),s=rn(n),o=Bt(r,s),o.callback=t??null,tn(n,o,s),e.current.lanes=s,Jr(e,s,r),Ye(e,r),e}function vo(e,t,n,r){var s=t.current,o=We(),i=rn(s);return n=Ed(n),t.context===null?t.context=n:t.pendingContext=n,t=Bt(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=tn(s,t,i),e!==null&&(Tt(e,s,i,o),js(e,s,i)),i}function ro(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ou(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Fi(e,t){ou(e,t),(e=e.alternate)&&ou(e,t)}function vh(){return null}var $d=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hi(e){this._internalRoot=e}To.prototype.render=Hi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(V(409));vo(e,t,null,null)};To.prototype.unmount=Hi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bn(function(){vo(null,e,null,null)}),t[It]=null}};function To(e){this._internalRoot=e}To.prototype.unstable_scheduleHydration=function(e){if(e){var t=oc();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Jt.length&&t!==0&&t<Jt[n].priority;n++);Jt.splice(n,0,e),n===0&&ic(e)}};function Wi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ko(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function au(){}function Th(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=ro(i);o.call(u)}}var i=Cd(t,r,e,0,null,!1,!1,"",au);return e._reactRootContainer=i,e[It]=i.current,Br(e.nodeType===8?e.parentNode:e),bn(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=ro(l);a.call(u)}}var l=Ai(e,0,!1,null,null,!1,!1,"",au);return e._reactRootContainer=l,e[It]=l.current,Br(e.nodeType===8?e.parentNode:e),bn(function(){vo(t,l,n,r)}),l}function bo(e,t,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var a=s;s=function(){var l=ro(i);a.call(l)}}vo(t,i,e,s)}else i=Th(n,t,e,s,r);return ro(i)}rc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gr(t.pendingLanes);n!==0&&(ui(t,n|1),Ye(t,Ne()),!(me&6)&&(Zn=Ne()+500,cn()))}break;case 13:bn(function(){var r=zt(e,1);if(r!==null){var s=We();Tt(r,e,1,s)}}),Fi(e,1)}};ci=function(e){if(e.tag===13){var t=zt(e,134217728);if(t!==null){var n=We();Tt(t,e,134217728,n)}Fi(e,134217728)}};sc=function(e){if(e.tag===13){var t=rn(e),n=zt(e,t);if(n!==null){var r=We();Tt(n,e,t,r)}Fi(e,t)}};oc=function(){return ge};ac=function(e,t){var n=ge;try{return ge=e,t()}finally{ge=n}};ma=function(e,t,n){switch(t){case"input":if(la(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=po(r);if(!s)throw Error(V(90));Du(r),la(r,s)}}}break;case"textarea":Iu(e,n);break;case"select":t=n.value,t!=null&&An(e,!!n.multiple,t,!1)}};qu=Di;Ju=bn;var kh={usingClientEntryPoint:!1,Events:[Qr,Un,po,Wu,Vu,Di]},pr={findFiberByHostInstance:hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bh={bundleType:pr.bundleType,version:pr.version,rendererPackageName:pr.rendererPackageName,rendererConfig:pr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ht.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ku(e),e===null?null:e.stateNode},findFiberByHostInstance:pr.findFiberByHostInstance||vh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ys=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ys.isDisabled&&ys.supportsFiber)try{lo=ys.inject(bh),$t=ys}catch{}}rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kh;rt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wi(t))throw Error(V(200));return wh(e,t,null,n)};rt.createRoot=function(e,t){if(!Wi(e))throw Error(V(299));var n=!1,r="",s=$d;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ai(e,1,!1,null,null,n,!1,r,s),e[It]=t.current,Br(e.nodeType===8?e.parentNode:e),new Hi(t)};rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(V(188)):(e=Object.keys(e).join(","),Error(V(268,e)));return e=Ku(t),e=e===null?null:e.stateNode,e};rt.flushSync=function(e){return bn(e)};rt.hydrate=function(e,t,n){if(!ko(t))throw Error(V(200));return bo(null,e,t,!0,n)};rt.hydrateRoot=function(e,t,n){if(!Wi(e))throw Error(V(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=$d;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Cd(t,null,e,1,n??null,s,!1,o,i),e[It]=t.current,Br(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new To(t)};rt.render=function(e,t,n){if(!ko(t))throw Error(V(200));return bo(null,e,t,!1,n)};rt.unmountComponentAtNode=function(e){if(!ko(e))throw Error(V(40));return e._reactRootContainer?(bn(function(){bo(null,null,e,!1,function(){e._reactRootContainer=null,e[It]=null})}),!0):!1};rt.unstable_batchedUpdates=Di;rt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ko(n))throw Error(V(200));if(e==null||e._reactInternals===void 0)throw Error(V(38));return bo(e,t,n,!1,r)};rt.version="18.3.1-next-f1338f8080-20240426";function Nd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nd)}catch(e){console.error(e)}}Nd(),Nu.exports=rt;var jh=Nu.exports,Pd,iu=jh;Pd=iu.createRoot,iu.hydrateRoot;var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0});Vi.parse=_h;Vi.serialize=Oh;const Sh=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Eh=/^[\u0021-\u003A\u003C-\u007E]*$/,Ch=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,$h=/^[\u0020-\u003A\u003D-\u007E]*$/,Nh=Object.prototype.toString,Ph=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function _h(e,t){const n=new Ph,r=e.length;if(r<2)return n;const s=(t==null?void 0:t.decode)||Lh;let o=0;do{const i=e.indexOf("=",o);if(i===-1)break;const a=e.indexOf(";",o),l=a===-1?r:a;if(i>l){o=e.lastIndexOf(";",i-1)+1;continue}const u=lu(e,o,i),c=uu(e,i,u),f=e.slice(u,c);if(n[f]===void 0){let p=lu(e,i+1,l),g=uu(e,l,p);const k=s(e.slice(p,g));n[f]=k}o=l+1}while(o<r);return n}function lu(e,t,n){do{const r=e.charCodeAt(t);if(r!==32&&r!==9)return t}while(++t<n);return n}function uu(e,t,n){for(;t>n;){const r=e.charCodeAt(--t);if(r!==32&&r!==9)return t+1}return n}function Oh(e,t,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!Sh.test(e))throw new TypeError(`argument name is invalid: ${e}`);const s=r(t);if(!Eh.test(s))throw new TypeError(`argument val is invalid: ${t}`);let o=e+"="+s;if(!n)return o;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);o+="; Max-Age="+n.maxAge}if(n.domain){if(!Ch.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);o+="; Domain="+n.domain}if(n.path){if(!$h.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);o+="; Path="+n.path}if(n.expires){if(!Uh(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.partitioned&&(o+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return o}function Lh(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function Uh(e){return Nh.call(e)==="[object Date]"}var cu="popstate";function Rh(e={}){function t(r,s){let{pathname:o,search:i,hash:a}=r.location;return Ga("",{pathname:o,search:i,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Vr(s)}return Dh(t,n,null,e)}function be(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function bt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Bh(){return Math.random().toString(36).substring(2,10)}function du(e,t){return{usr:e.state,key:e.key,idx:t}}function Ga(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?rr(t):t,state:n,key:t&&t.key||r||Bh()}}function Vr({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function rr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Dh(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,i=s.history,a="POP",l=null,u=c();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function c(){return(i.state||{idx:null}).idx}function f(){a="POP";let b=c(),y=b==null?null:b-u;u=b,l&&l({action:a,location:v.location,delta:y})}function p(b,y){a="PUSH";let h=Ga(v.location,b,y);u=c()+1;let m=du(h,u),w=v.createHref(h);try{i.pushState(m,"",w)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(w)}o&&l&&l({action:a,location:v.location,delta:1})}function g(b,y){a="REPLACE";let h=Ga(v.location,b,y);u=c();let m=du(h,u),w=v.createHref(h);i.replaceState(m,"",w),o&&l&&l({action:a,location:v.location,delta:0})}function k(b){return Mh(b)}let v={get action(){return a},get location(){return e(s,i)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(cu,f),l=b,()=>{s.removeEventListener(cu,f),l=null}},createHref(b){return t(s,b)},createURL:k,encodeLocation(b){let y=k(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:g,go(b){return i.go(b)}};return v}function Mh(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),be(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Vr(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function _d(e,t,n="/"){return Ih(e,t,n,!1)}function Ih(e,t,n,r){let s=typeof t=="string"?rr(t):t,o=Ft(s.pathname||"/",n);if(o==null)return null;let i=Od(e);zh(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let u=Yh(o);a=Qh(i[l],u,r)}return a}function Od(e,t=[],n=[],r=""){let s=(o,i,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};l.relativePath.startsWith("/")&&(be(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=Dt([r,l.relativePath]),c=n.concat(l);o.children&&o.children.length>0&&(be(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),Od(o.children,t,c,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:Jh(u,o.index),routesMeta:c})};return e.forEach((o,i)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))s(o,i);else for(let l of Ld(o.path))s(o,i,l)}),t}function Ld(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let i=Ld(r.join("/")),a=[];return a.push(...i.map(l=>l===""?o:[o,l].join("/"))),s&&a.push(...i),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function zh(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Gh(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Ah=/^:[\w-]+$/,Fh=3,Hh=2,Wh=1,Vh=10,qh=-2,fu=e=>e==="*";function Jh(e,t){let n=e.split("/"),r=n.length;return n.some(fu)&&(r+=qh),t&&(r+=Hh),n.filter(s=>!fu(s)).reduce((s,o)=>s+(Ah.test(o)?Fh:o===""?Wh:Vh),r)}function Gh(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Qh(e,t,n=!1){let{routesMeta:r}=e,s={},o="/",i=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=o==="/"?t:t.slice(o.length)||"/",f=so({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),p=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=so({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:Dt([o,f.pathname]),pathnameBase:tm(Dt([o,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(o=Dt([o,f.pathnameBase]))}return i}function so(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Kh(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:f},p)=>{if(c==="*"){let k=a[p]||"";i=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const g=a[p];return f&&!g?u[c]=void 0:u[c]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:e}}function Kh(e,t=!1,n=!0){bt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Yh(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return bt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ft(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Xh(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?rr(e):e;return{pathname:n?n.startsWith("/")?n:Zh(n,t):t,search:nm(r),hash:rm(s)}}function Zh(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Zo(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function em(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function qi(e){let t=em(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Ji(e,t,n,r=!1){let s;typeof e=="string"?s=rr(e):(s={...e},be(!s.pathname||!s.pathname.includes("?"),Zo("?","pathname","search",s)),be(!s.pathname||!s.pathname.includes("#"),Zo("#","pathname","hash",s)),be(!s.search||!s.search.includes("#"),Zo("#","search","hash",s)));let o=e===""||s.pathname==="",i=o?"/":s.pathname,a;if(i==null)a=n;else{let f=t.length-1;if(!r&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?t[f]:"/"}let l=Xh(s,a),u=i&&i!=="/"&&i.endsWith("/"),c=(o||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Dt=e=>e.join("/").replace(/\/\/+/g,"/"),tm=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nm=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,rm=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function sm(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Ud=["POST","PUT","PATCH","DELETE"];new Set(Ud);var om=["GET",...Ud];new Set(om);var sr=x.createContext(null);sr.displayName="DataRouter";var jo=x.createContext(null);jo.displayName="DataRouterState";var Rd=x.createContext({isTransitioning:!1});Rd.displayName="ViewTransition";var am=x.createContext(new Map);am.displayName="Fetchers";var im=x.createContext(null);im.displayName="Await";var jt=x.createContext(null);jt.displayName="Navigation";var Yr=x.createContext(null);Yr.displayName="Location";var ht=x.createContext({outlet:null,matches:[],isDataRoute:!1});ht.displayName="Route";var Gi=x.createContext(null);Gi.displayName="RouteError";function lm(e,{relative:t}={}){be(or(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=x.useContext(jt),{hash:s,pathname:o,search:i}=Zr(e,{relative:t}),a=o;return n!=="/"&&(a=o==="/"?n:Dt([n,o])),r.createHref({pathname:a,search:i,hash:s})}function or(){return x.useContext(Yr)!=null}function Pt(){return be(or(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Yr).location}var Bd="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Dd(e){x.useContext(jt).static||x.useLayoutEffect(e)}function So(){let{isDataRoute:e}=x.useContext(ht);return e?bm():um()}function um(){be(or(),"useNavigate() may be used only in the context of a <Router> component.");let e=x.useContext(sr),{basename:t,navigator:n}=x.useContext(jt),{matches:r}=x.useContext(ht),{pathname:s}=Pt(),o=JSON.stringify(qi(r)),i=x.useRef(!1);return Dd(()=>{i.current=!0}),x.useCallback((l,u={})=>{if(bt(i.current,Bd),!i.current)return;if(typeof l=="number"){n.go(l);return}let c=Ji(l,JSON.parse(o),s,u.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:Dt([t,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[t,n,o,s,e])}var cm=x.createContext(null);function dm(e){let t=x.useContext(ht).outlet;return t&&x.createElement(cm.Provider,{value:e},t)}function Xr(){let{matches:e}=x.useContext(ht),t=e[e.length-1];return t?t.params:{}}function Zr(e,{relative:t}={}){let{matches:n}=x.useContext(ht),{pathname:r}=Pt(),s=JSON.stringify(qi(n));return x.useMemo(()=>Ji(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function fm(e,t){return Md(e,t)}function Md(e,t,n,r){var y;be(or(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=x.useContext(jt),{matches:o}=x.useContext(ht),i=o[o.length-1],a=i?i.params:{},l=i?i.pathname:"/",u=i?i.pathnameBase:"/",c=i&&i.route;{let h=c&&c.path||"";Id(l,!c||h.endsWith("*")||h.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${h}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${h}"> to <Route path="${h==="/"?"*":`${h}/*`}">.`)}let f=Pt(),p;if(t){let h=typeof t=="string"?rr(t):t;be(u==="/"||((y=h.pathname)==null?void 0:y.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${h.pathname}" was given in the \`location\` prop.`),p=h}else p=f;let g=p.pathname||"/",k=g;if(u!=="/"){let h=u.replace(/^\//,"").split("/");k="/"+g.replace(/^\//,"").split("/").slice(h.length).join("/")}let v=_d(e,{pathname:k});bt(c||v!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),bt(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=gm(v&&v.map(h=>Object.assign({},h,{params:Object.assign({},a,h.params),pathname:Dt([u,s.encodeLocation?s.encodeLocation(h.pathname).pathname:h.pathname]),pathnameBase:h.pathnameBase==="/"?u:Dt([u,s.encodeLocation?s.encodeLocation(h.pathnameBase).pathname:h.pathnameBase])})),o,n,r);return t&&b?x.createElement(Yr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},b):b}function pm(){let e=km(),t=sm(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:o},"ErrorBoundary")," or"," ",x.createElement("code",{style:o},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),n?x.createElement("pre",{style:s},n):null,i)}var hm=x.createElement(pm,null),mm=class extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?x.createElement(ht.Provider,{value:this.props.routeContext},x.createElement(Gi.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ym({routeContext:e,match:t,children:n}){let r=x.useContext(sr);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),x.createElement(ht.Provider,{value:e},n)}function gm(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,o=n==null?void 0:n.errors;if(o!=null){let l=s.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);be(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let i=!1,a=-1;if(n)for(let l=0;l<s.length;l++){let u=s[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:c,errors:f}=n,p=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||p){i=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,u,c)=>{let f,p=!1,g=null,k=null;n&&(f=o&&u.route.id?o[u.route.id]:void 0,g=u.route.errorElement||hm,i&&(a<0&&c===0?(Id("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,k=null):a===c&&(p=!0,k=u.route.hydrateFallbackElement||null)));let v=t.concat(s.slice(0,c+1)),b=()=>{let y;return f?y=g:p?y=k:u.route.Component?y=x.createElement(u.route.Component,null):u.route.element?y=u.route.element:y=l,x.createElement(ym,{match:u,routeContext:{outlet:l,matches:v,isDataRoute:n!=null},children:y})};return n&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?x.createElement(mm,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}function Qi(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xm(e){let t=x.useContext(sr);return be(t,Qi(e)),t}function wm(e){let t=x.useContext(jo);return be(t,Qi(e)),t}function vm(e){let t=x.useContext(ht);return be(t,Qi(e)),t}function Ki(e){let t=vm(e),n=t.matches[t.matches.length-1];return be(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function Tm(){return Ki("useRouteId")}function km(){var r;let e=x.useContext(Gi),t=wm("useRouteError"),n=Ki("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function bm(){let{router:e}=xm("useNavigate"),t=Ki("useNavigate"),n=x.useRef(!1);return Dd(()=>{n.current=!0}),x.useCallback(async(s,o={})=>{bt(n.current,Bd),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...o}))},[e,t])}var pu={};function Id(e,t,n){!t&&!pu[e]&&(pu[e]=!0,bt(!1,n))}x.memo(jm);function jm({routes:e,future:t,state:n}){return Md(e,void 0,n,t)}function Qa({to:e,replace:t,state:n,relative:r}){be(or(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=x.useContext(jt);bt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=x.useContext(ht),{pathname:i}=Pt(),a=So(),l=Ji(e,qi(o),i,r==="path"),u=JSON.stringify(l);return x.useEffect(()=>{a(JSON.parse(u),{replace:t,state:n,relative:r})},[a,u,r,t,n]),null}function Sm(e){return dm(e.context)}function it(e){be(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Em({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:o=!1}){be(!or(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),a=x.useMemo(()=>({basename:i,navigator:s,static:o,future:{}}),[i,s,o]);typeof n=="string"&&(n=rr(n));let{pathname:l="/",search:u="",hash:c="",state:f=null,key:p="default"}=n,g=x.useMemo(()=>{let k=Ft(l,i);return k==null?null:{location:{pathname:k,search:u,hash:c,state:f,key:p},navigationType:r}},[i,l,u,c,f,p,r]);return bt(g!=null,`<Router basename="${i}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:x.createElement(jt.Provider,{value:a},x.createElement(Yr.Provider,{children:t,value:g}))}function Cm({children:e,location:t}){return fm(Ka(e),t)}function Ka(e,t=[]){let n=[];return x.Children.forEach(e,(r,s)=>{if(!x.isValidElement(r))return;let o=[...t,s];if(r.type===x.Fragment){n.push.apply(n,Ka(r.props.children,o));return}be(r.type===it,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),be(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=Ka(r.props.children,o)),n.push(i)}),n}var _s="get",Os="application/x-www-form-urlencoded";function Eo(e){return e!=null&&typeof e.tagName=="string"}function $m(e){return Eo(e)&&e.tagName.toLowerCase()==="button"}function Nm(e){return Eo(e)&&e.tagName.toLowerCase()==="form"}function Pm(e){return Eo(e)&&e.tagName.toLowerCase()==="input"}function _m(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Om(e,t){return e.button===0&&(!t||t==="_self")&&!_m(e)}var gs=null;function Lm(){if(gs===null)try{new FormData(document.createElement("form"),0),gs=!1}catch{gs=!0}return gs}var Um=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ea(e){return e!=null&&!Um.has(e)?(bt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Os}"`),null):e}function Rm(e,t){let n,r,s,o,i;if(Nm(e)){let a=e.getAttribute("action");r=a?Ft(a,t):null,n=e.getAttribute("method")||_s,s=ea(e.getAttribute("enctype"))||Os,o=new FormData(e)}else if($m(e)||Pm(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?Ft(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||_s,s=ea(e.getAttribute("formenctype"))||ea(a.getAttribute("enctype"))||Os,o=new FormData(a,e),!Lm()){let{name:u,type:c,value:f}=e;if(c==="image"){let p=u?`${u}.`:"";o.append(`${p}x`,"0"),o.append(`${p}y`,"0")}else u&&o.append(u,f)}}else{if(Eo(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=_s,r=null,s=Os,i=e}return o&&s==="text/plain"&&(i=o,o=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:o,body:i}}function Yi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function Bm(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Dm(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Mm(e,t,n){let r=await Promise.all(e.map(async s=>{let o=t.routes[s.route.id];if(o){let i=await Bm(o,n);return i.links?i.links():[]}return[]}));return Fm(r.flat(1).filter(Dm).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function hu(e,t,n,r,s,o){let i=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return o==="assets"?t.filter((l,u)=>i(l,u)||a(l,u)):o==="data"?t.filter((l,u)=>{var f;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(i(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function Im(e,t,{includeHydrateFallback:n}={}){return zm(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function zm(e){return[...new Set(e)]}function Am(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Fm(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let o=JSON.stringify(Am(s));return n.has(o)||(n.add(o),r.push({key:o,link:s})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Hm=new Set([100,101,204,205]);function Wm(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Ft(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function zd(){let e=x.useContext(sr);return Yi(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Vm(){let e=x.useContext(jo);return Yi(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Xi=x.createContext(void 0);Xi.displayName="FrameworkContext";function Ad(){let e=x.useContext(Xi);return Yi(e,"You must render this element inside a <HydratedRouter> element"),e}function qm(e,t){let n=x.useContext(Xi),[r,s]=x.useState(!1),[o,i]=x.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:f}=t,p=x.useRef(null);x.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let v=y=>{y.forEach(h=>{i(h.isIntersecting)})},b=new IntersectionObserver(v,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[e]),x.useEffect(()=>{if(r){let v=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(v)}}},[r]);let g=()=>{s(!0)},k=()=>{s(!1),i(!1)};return n?e!=="intent"?[o,p,{}]:[o,p,{onFocus:hr(a,g),onBlur:hr(l,k),onMouseEnter:hr(u,g),onMouseLeave:hr(c,k),onTouchStart:hr(f,g)}]:[!1,p,{}]}function hr(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Jm({page:e,...t}){let{router:n}=zd(),r=x.useMemo(()=>_d(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?x.createElement(Qm,{page:e,matches:r,...t}):null}function Gm(e){let{manifest:t,routeModules:n}=Ad(),[r,s]=x.useState([]);return x.useEffect(()=>{let o=!1;return Mm(e,t,n).then(i=>{o||s(i)}),()=>{o=!0}},[e,t,n]),r}function Qm({page:e,matches:t,...n}){let r=Pt(),{manifest:s,routeModules:o}=Ad(),{basename:i}=zd(),{loaderData:a,matches:l}=Vm(),u=x.useMemo(()=>hu(e,t,l,s,r,"data"),[e,t,l,s,r]),c=x.useMemo(()=>hu(e,t,l,s,r,"assets"),[e,t,l,s,r]),f=x.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let k=new Set,v=!1;if(t.forEach(y=>{var m;let h=s.routes[y.route.id];!h||!h.hasLoader||(!u.some(w=>w.route.id===y.route.id)&&y.route.id in a&&((m=o[y.route.id])!=null&&m.shouldRevalidate)||h.hasClientLoader?v=!0:k.add(y.route.id))}),k.size===0)return[];let b=Wm(e,i);return v&&k.size>0&&b.searchParams.set("_routes",t.filter(y=>k.has(y.route.id)).map(y=>y.route.id).join(",")),[b.pathname+b.search]},[i,a,r,s,u,t,e,o]),p=x.useMemo(()=>Im(c,s),[c,s]),g=Gm(c);return x.createElement(x.Fragment,null,f.map(k=>x.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),p.map(k=>x.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),g.map(({key:k,link:v})=>x.createElement("link",{key:k,...v})))}function Km(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Fd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Fd&&(window.__reactRouterVersion="7.6.2")}catch{}function Ym({basename:e,children:t,window:n}){let r=x.useRef();r.current==null&&(r.current=Rh({window:n,v5Compat:!0}));let s=r.current,[o,i]=x.useState({action:s.action,location:s.location}),a=x.useCallback(l=>{x.startTransition(()=>i(l))},[i]);return x.useLayoutEffect(()=>s.listen(a),[s,a]),x.createElement(Em,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s})}var Hd=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,He=x.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:o,replace:i,state:a,target:l,to:u,preventScrollReset:c,viewTransition:f,...p},g){let{basename:k}=x.useContext(jt),v=typeof u=="string"&&Hd.test(u),b,y=!1;if(typeof u=="string"&&v&&(b=u,Fd))try{let O=new URL(window.location.href),B=u.startsWith("//")?new URL(O.protocol+u):new URL(u),F=Ft(B.pathname,k);B.origin===O.origin&&F!=null?u=F+B.search+B.hash:y=!0}catch{bt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let h=lm(u,{relative:s}),[m,w,j]=qm(r,p),C=ty(u,{replace:i,state:a,target:l,preventScrollReset:c,relative:s,viewTransition:f});function P(O){t&&t(O),O.defaultPrevented||C(O)}let E=x.createElement("a",{...p,...j,href:b||h,onClick:y||o?t:P,ref:Km(g,w),target:l,"data-discover":!v&&n==="render"?"true":void 0});return m&&!v?x.createElement(x.Fragment,null,E,x.createElement(Jm,{page:h})):E});He.displayName="Link";var Xm=x.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:o,to:i,viewTransition:a,children:l,...u},c){let f=Zr(i,{relative:u.relative}),p=Pt(),g=x.useContext(jo),{navigator:k,basename:v}=x.useContext(jt),b=g!=null&&ay(f)&&a===!0,y=k.encodeLocation?k.encodeLocation(f).pathname:f.pathname,h=p.pathname,m=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(h=h.toLowerCase(),m=m?m.toLowerCase():null,y=y.toLowerCase()),m&&v&&(m=Ft(m,v)||m);const w=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let j=h===y||!s&&h.startsWith(y)&&h.charAt(w)==="/",C=m!=null&&(m===y||!s&&m.startsWith(y)&&m.charAt(y.length)==="/"),P={isActive:j,isPending:C,isTransitioning:b},E=j?t:void 0,O;typeof r=="function"?O=r(P):O=[r,j?"active":null,C?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let B=typeof o=="function"?o(P):o;return x.createElement(He,{...u,"aria-current":E,className:O,ref:c,style:B,to:i,viewTransition:a},typeof l=="function"?l(P):l)});Xm.displayName="NavLink";var Zm=x.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:o,method:i=_s,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:f,...p},g)=>{let k=sy(),v=oy(a,{relative:u}),b=i.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&Hd.test(a),h=m=>{if(l&&l(m),m.defaultPrevented)return;m.preventDefault();let w=m.nativeEvent.submitter,j=(w==null?void 0:w.getAttribute("formmethod"))||i;k(w||m.currentTarget,{fetcherKey:t,method:j,navigate:n,replace:s,state:o,relative:u,preventScrollReset:c,viewTransition:f})};return x.createElement("form",{ref:g,method:b,action:v,onSubmit:r?l:h,...p,"data-discover":!y&&e==="render"?"true":void 0})});Zm.displayName="Form";function ey(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Wd(e){let t=x.useContext(sr);return be(t,ey(e)),t}function ty(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:i}={}){let a=So(),l=Pt(),u=Zr(e,{relative:o});return x.useCallback(c=>{if(Om(c,t)){c.preventDefault();let f=n!==void 0?n:Vr(l)===Vr(u);a(e,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:i})}},[l,a,u,n,r,t,e,s,o,i])}var ny=0,ry=()=>`__${String(++ny)}__`;function sy(){let{router:e}=Wd("useSubmit"),{basename:t}=x.useContext(jt),n=Tm();return x.useCallback(async(r,s={})=>{let{action:o,method:i,encType:a,formData:l,body:u}=Rm(r,t);if(s.navigate===!1){let c=s.fetcherKey||ry();await e.fetch(c,n,s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||i,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||i,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function oy(e,{relative:t}={}){let{basename:n}=x.useContext(jt),r=x.useContext(ht);be(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Zr(e||".",{relative:t})},i=Pt();if(e==null){o.search=i.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();o.search=c?`?${c}`:""}}return(!e||e===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Dt([n,o.pathname])),Vr(o)}function ay(e,t={}){let n=x.useContext(Rd);be(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Wd("useViewTransitionState"),s=Zr(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Ft(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Ft(n.nextLocation.pathname,r)||n.nextLocation.pathname;return so(s.pathname,i)!=null||so(s.pathname,o)!=null}[...Hm];let Vd=class qd{constructor(t,n){this.baseUrl=t.replace(/\/$/,""),this.token=n,this.isBatching=!1,this.batchOperations=[],this.relations={setMetadata:this._relationsSetMetadata.bind(this),deleteMetadata:this._relationsDeleteMetadata.bind(this),setTarget:this._relationsSetTarget.bind(this),get:this._relationsGet.bind(this),delete:this._relationsDelete.bind(this),update:this._relationsUpdate.bind(this),setSource:this._relationsSetSource.bind(this),create:this._relationsCreate.bind(this)},this.spanLayers={setConfig:this._spanLayersSetConfig.bind(this),deleteConfig:this._spanLayersDeleteConfig.bind(this),get:this._spanLayersGet.bind(this),delete:this._spanLayersDelete.bind(this),update:this._spanLayersUpdate.bind(this),create:this._spanLayersCreate.bind(this),shift:this._spanLayersShift.bind(this)},this.spans={setTokens:this._spansSetTokens.bind(this),create:this._spansCreate.bind(this),get:this._spansGet.bind(this),delete:this._spansDelete.bind(this),update:this._spansUpdate.bind(this),bulkCreate:this._spansBulkCreate.bind(this),bulkDelete:this._spansBulkDelete.bind(this),setMetadata:this._spansSetMetadata.bind(this),deleteMetadata:this._spansDeleteMetadata.bind(this)},this.texts={setMetadata:this._textsSetMetadata.bind(this),deleteMetadata:this._textsDeleteMetadata.bind(this),create:this._textsCreate.bind(this),get:this._textsGet.bind(this),delete:this._textsDelete.bind(this),update:this._textsUpdate.bind(this)},this.users={list:this._usersList.bind(this),create:this._usersCreate.bind(this),audit:this._usersAudit.bind(this),get:this._usersGet.bind(this),delete:this._usersDelete.bind(this),update:this._usersUpdate.bind(this)},this.tokenLayers={shift:this._tokenLayersShift.bind(this),create:this._tokenLayersCreate.bind(this),setConfig:this._tokenLayersSetConfig.bind(this),deleteConfig:this._tokenLayersDeleteConfig.bind(this),get:this._tokenLayersGet.bind(this),delete:this._tokenLayersDelete.bind(this),update:this._tokenLayersUpdate.bind(this)},this.documents={audit:this._documentsAudit.bind(this),get:this._documentsGet.bind(this),delete:this._documentsDelete.bind(this),update:this._documentsUpdate.bind(this),create:this._documentsCreate.bind(this)},this.projects={sendMessage:this._projectsSendMessage.bind(this),addWriter:this._projectsAddWriter.bind(this),removeWriter:this._projectsRemoveWriter.bind(this),addReader:this._projectsAddReader.bind(this),removeReader:this._projectsRemoveReader.bind(this),heartbeat:this._projectsHeartbeat.bind(this),listen:this._projectsListen.bind(this),addMaintainer:this._projectsAddMaintainer.bind(this),removeMaintainer:this._projectsRemoveMaintainer.bind(this),audit:this._projectsAudit.bind(this),get:this._projectsGet.bind(this),delete:this._projectsDelete.bind(this),update:this._projectsUpdate.bind(this),list:this._projectsList.bind(this),create:this._projectsCreate.bind(this)},this.textLayers={setConfig:this._textLayersSetConfig.bind(this),deleteConfig:this._textLayersDeleteConfig.bind(this),get:this._textLayersGet.bind(this),delete:this._textLayersDelete.bind(this),update:this._textLayersUpdate.bind(this),shift:this._textLayersShift.bind(this),create:this._textLayersCreate.bind(this)},this.login={create:this._loginCreate.bind(this)},this.bulk={submit:this._bulkSubmit.bind(this)},this.relationLayers={shift:this._relationLayersShift.bind(this),create:this._relationLayersCreate.bind(this),setConfig:this._relationLayersSetConfig.bind(this),deleteConfig:this._relationLayersDeleteConfig.bind(this),get:this._relationLayersGet.bind(this),delete:this._relationLayersDelete.bind(this),update:this._relationLayersUpdate.bind(this)},this.tokens={create:this._tokensCreate.bind(this),get:this._tokensGet.bind(this),delete:this._tokensDelete.bind(this),update:this._tokensUpdate.bind(this),bulkCreate:this._tokensBulkCreate.bind(this),bulkDelete:this._tokensBulkDelete.bind(this),setMetadata:this._tokensSetMetadata.bind(this),deleteMetadata:this._tokensDeleteMetadata.bind(this)}}_transformKeyToCamel(t){return t.replace(/^[^/]+\//,"").replace(/-([a-z])/g,(n,r)=>r.toUpperCase())}_transformKeyFromCamel(t){return t.replace(/[A-Z]/g,n=>"-"+n.toLowerCase())}_transformRequest(t){if(t==null)return t;if(Array.isArray(t))return t.map(r=>this._transformRequest(r));if(typeof t!="object")return t;const n={};for(const[r,s]of Object.entries(t)){const o=this._transformKeyFromCamel(r);r==="metadata"&&typeof s=="object"&&s!==null&&!Array.isArray(s)?n[o]=s:n[o]=this._transformRequest(s)}return n}_transformResponse(t){if(t==null)return t;if(Array.isArray(t))return t.map(r=>this._transformResponse(r));if(typeof t!="object")return t;const n={};for(const[r,s]of Object.entries(t)){const o=this._transformKeyToCamel(r);o==="metadata"&&typeof s=="object"&&s!==null&&!Array.isArray(s)?n[o]=s:n[o]=this._transformResponse(s)}return n}beginBatch(){this.isBatching=!0,this.batchOperations=[]}async submitBatch(){if(!this.isBatching)throw new Error("No active batch. Call beginBatch() first.");if(this.batchOperations.length===0)return this.isBatching=!1,[];try{const t=`${this.baseUrl}/api/v1/bulk`,n=this.batchOperations.map(i=>({path:i.path,method:i.method.toUpperCase(),...i.body&&{body:i.body}})),r={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(n)},s=await fetch(t,r);if(!s.ok){const i=await s.text().catch(()=>"Unable to read error response"),a=new Error(`HTTP ${s.status} ${s.statusText} at ${t}`);throw a.status=s.status,a.statusText=s.statusText,a.url=t,a.method="POST",a.responseBody=i,a}return(await s.json()).map(i=>this._transformResponse(i))}finally{this.isBatching=!1,this.batchOperations=[]}}abortBatch(){this.isBatching=!1,this.batchOperations=[]}isBatchMode(){return this.isBatching}async _relationsSetMetadata(t,n){const r=`${this.baseUrl}/api/v1/relations/${t}/metadata`,s={body:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"PUT",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"PUT",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="PUT",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _relationsDeleteMetadata(t){const n=`${this.baseUrl}/api/v1/relations/${t}/metadata`;if(this.isBatching){const i={path:n.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(i),{batched:!0}}const r={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},s=await fetch(n,r);if(!s.ok){const i=await s.text().catch(()=>"Unable to read error response"),a=new Error(`HTTP ${s.status} ${s.statusText} at ${n}`);throw a.status=s.status,a.statusText=s.statusText,a.url=n,a.method="DELETE",a.responseBody=i,a}const o=s.headers.get("content-type");if(o&&o.includes("application/json")){const i=await s.json();return this._transformResponse(i)}return await s.text()}async _relationsSetTarget(t,n){const r=`${this.baseUrl}/api/v1/relations/${t}/target`,s={"span-id":n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"PUT",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"PUT",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="PUT",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _relationsGet(t,n=void 0){const r=`${this.baseUrl}/api/v1/relations/${t}`,s=new URLSearchParams;n!=null&&s.append("as-of",n);const o=s.toString(),i=o?`${r}?${o}`:r;if(this.isBatching){const c={path:i.replace(this.baseUrl,""),method:"GET"};return this.batchOperations.push(c),{batched:!0}}const a={method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},l=await fetch(i,a);if(!l.ok){const c=await l.text().catch(()=>"Unable to read error response"),f=new Error(`HTTP ${l.status} ${l.statusText} at ${i}`);throw f.status=l.status,f.statusText=l.statusText,f.url=i,f.method="GET",f.responseBody=c,f}const u=l.headers.get("content-type");if(u&&u.includes("application/json")){const c=await l.json();return this._transformResponse(c)}return await l.text()}async _relationsDelete(t){const n=`${this.baseUrl}/api/v1/relations/${t}`;if(this.isBatching){const i={path:n.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(i),{batched:!0}}const r={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},s=await fetch(n,r);if(!s.ok){const i=await s.text().catch(()=>"Unable to read error response"),a=new Error(`HTTP ${s.status} ${s.statusText} at ${n}`);throw a.status=s.status,a.statusText=s.statusText,a.url=n,a.method="DELETE",a.responseBody=i,a}const o=s.headers.get("content-type");if(o&&o.includes("application/json")){const i=await s.json();return this._transformResponse(i)}return await s.text()}async _relationsUpdate(t,n){const r=`${this.baseUrl}/api/v1/relations/${t}`,s={value:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"PATCH",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"PATCH",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="PATCH",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _relationsSetSource(t,n){const r=`${this.baseUrl}/api/v1/relations/${t}/source`,s={"span-id":n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"PUT",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"PUT",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="PUT",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _relationsCreate(t,n,r,s,o=void 0){const i=`${this.baseUrl}/api/v1/relations`,a={"layer-id":t,"source-id":n,"target-id":r,value:s,metadata:o};Object.keys(a).forEach(p=>a[p]===void 0&&delete a[p]);const l=this._transformRequest(a);if(this.isBatching){const p={path:i.replace(this.baseUrl,""),method:"POST",body:l};return this.batchOperations.push(p),{batched:!0}}const u={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(l)},c=await fetch(i,u);if(!c.ok){const p=await c.text().catch(()=>"Unable to read error response"),g=new Error(`HTTP ${c.status} ${c.statusText} at ${i}`);throw g.status=c.status,g.statusText=c.statusText,g.url=i,g.method="POST",g.responseBody=p,g}const f=c.headers.get("content-type");if(f&&f.includes("application/json")){const p=await c.json();return this._transformResponse(p)}return await c.text()}async _spanLayersSetConfig(t,n,r,s){const o=`${this.baseUrl}/api/v1/span-layers/${t}/config/${n}/${r}`,i=s;if(this.isBatching){const c={path:o.replace(this.baseUrl,""),method:"PUT",body:i};return this.batchOperations.push(c),{batched:!0}}const a={method:"PUT",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(i)},l=await fetch(o,a);if(!l.ok){const c=await l.text().catch(()=>"Unable to read error response"),f=new Error(`HTTP ${l.status} ${l.statusText} at ${o}`);throw f.status=l.status,f.statusText=l.statusText,f.url=o,f.method="PUT",f.responseBody=c,f}const u=l.headers.get("content-type");if(u&&u.includes("application/json")){const c=await l.json();return this._transformResponse(c)}return await l.text()}async _spanLayersDeleteConfig(t,n,r){const s=`${this.baseUrl}/api/v1/span-layers/${t}/config/${n}/${r}`;if(this.isBatching){const l={path:s.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(l),{batched:!0}}const o={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},i=await fetch(s,o);if(!i.ok){const l=await i.text().catch(()=>"Unable to read error response"),u=new Error(`HTTP ${i.status} ${i.statusText} at ${s}`);throw u.status=i.status,u.statusText=i.statusText,u.url=s,u.method="DELETE",u.responseBody=l,u}const a=i.headers.get("content-type");if(a&&a.includes("application/json")){const l=await i.json();return this._transformResponse(l)}return await i.text()}async _spanLayersGet(t,n=void 0){const r=`${this.baseUrl}/api/v1/span-layers/${t}`,s=new URLSearchParams;n!=null&&s.append("as-of",n);const o=s.toString(),i=o?`${r}?${o}`:r;if(this.isBatching){const c={path:i.replace(this.baseUrl,""),method:"GET"};return this.batchOperations.push(c),{batched:!0}}const a={method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},l=await fetch(i,a);if(!l.ok){const c=await l.text().catch(()=>"Unable to read error response"),f=new Error(`HTTP ${l.status} ${l.statusText} at ${i}`);throw f.status=l.status,f.statusText=l.statusText,f.url=i,f.method="GET",f.responseBody=c,f}const u=l.headers.get("content-type");if(u&&u.includes("application/json")){const c=await l.json();return this._transformResponse(c)}return await l.text()}async _spanLayersDelete(t){const n=`${this.baseUrl}/api/v1/span-layers/${t}`;if(this.isBatching){const i={path:n.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(i),{batched:!0}}const r={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},s=await fetch(n,r);if(!s.ok){const i=await s.text().catch(()=>"Unable to read error response"),a=new Error(`HTTP ${s.status} ${s.statusText} at ${n}`);throw a.status=s.status,a.statusText=s.statusText,a.url=n,a.method="DELETE",a.responseBody=i,a}const o=s.headers.get("content-type");if(o&&o.includes("application/json")){const i=await s.json();return this._transformResponse(i)}return await s.text()}async _spanLayersUpdate(t,n){const r=`${this.baseUrl}/api/v1/span-layers/${t}`,s={name:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"PATCH",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"PATCH",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="PATCH",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _spanLayersCreate(t,n){const r=`${this.baseUrl}/api/v1/span-layers`,s={"token-layer-id":t,name:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"POST",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="POST",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _spanLayersShift(t,n){const r=`${this.baseUrl}/api/v1/span-layers/${t}/shift`,s={direction:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"POST",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="POST",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _spansSetTokens(t,n){const r=`${this.baseUrl}/api/v1/spans/${t}/tokens`,s={tokens:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"PUT",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"PUT",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="PUT",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _spansCreate(t,n,r,s=void 0){const o=`${this.baseUrl}/api/v1/spans`,i={"span-layer-id":t,tokens:n,value:r,metadata:s};Object.keys(i).forEach(f=>i[f]===void 0&&delete i[f]);const a=this._transformRequest(i);if(this.isBatching){const f={path:o.replace(this.baseUrl,""),method:"POST",body:a};return this.batchOperations.push(f),{batched:!0}}const l={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(a)},u=await fetch(o,l);if(!u.ok){const f=await u.text().catch(()=>"Unable to read error response"),p=new Error(`HTTP ${u.status} ${u.statusText} at ${o}`);throw p.status=u.status,p.statusText=u.statusText,p.url=o,p.method="POST",p.responseBody=f,p}const c=u.headers.get("content-type");if(c&&c.includes("application/json")){const f=await u.json();return this._transformResponse(f)}return await u.text()}async _spansGet(t,n=void 0){const r=`${this.baseUrl}/api/v1/spans/${t}`,s=new URLSearchParams;n!=null&&s.append("as-of",n);const o=s.toString(),i=o?`${r}?${o}`:r;if(this.isBatching){const c={path:i.replace(this.baseUrl,""),method:"GET"};return this.batchOperations.push(c),{batched:!0}}const a={method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},l=await fetch(i,a);if(!l.ok){const c=await l.text().catch(()=>"Unable to read error response"),f=new Error(`HTTP ${l.status} ${l.statusText} at ${i}`);throw f.status=l.status,f.statusText=l.statusText,f.url=i,f.method="GET",f.responseBody=c,f}const u=l.headers.get("content-type");if(u&&u.includes("application/json")){const c=await l.json();return this._transformResponse(c)}return await l.text()}async _spansDelete(t){const n=`${this.baseUrl}/api/v1/spans/${t}`;if(this.isBatching){const i={path:n.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(i),{batched:!0}}const r={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},s=await fetch(n,r);if(!s.ok){const i=await s.text().catch(()=>"Unable to read error response"),a=new Error(`HTTP ${s.status} ${s.statusText} at ${n}`);throw a.status=s.status,a.statusText=s.statusText,a.url=n,a.method="DELETE",a.responseBody=i,a}const o=s.headers.get("content-type");if(o&&o.includes("application/json")){const i=await s.json();return this._transformResponse(i)}return await s.text()}async _spansUpdate(t,n){const r=`${this.baseUrl}/api/v1/spans/${t}`,s={value:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"PATCH",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"PATCH",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="PATCH",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _spansBulkCreate(t){const n=`${this.baseUrl}/api/v1/spans/bulk`,r=this._transformRequest(t);if(this.isBatching){const a={path:n.replace(this.baseUrl,""),method:"POST",body:r};return this.batchOperations.push(a),{batched:!0}}const s={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(r)},o=await fetch(n,s);if(!o.ok){const a=await o.text().catch(()=>"Unable to read error response"),l=new Error(`HTTP ${o.status} ${o.statusText} at ${n}`);throw l.status=o.status,l.statusText=o.statusText,l.url=n,l.method="POST",l.responseBody=a,l}const i=o.headers.get("content-type");if(i&&i.includes("application/json")){const a=await o.json();return this._transformResponse(a)}return await o.text()}async _spansBulkDelete(t){const n=`${this.baseUrl}/api/v1/spans/bulk`,r=this._transformRequest(t);if(this.isBatching){const a={path:n.replace(this.baseUrl,""),method:"DELETE",body:r};return this.batchOperations.push(a),{batched:!0}}const s={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(r)},o=await fetch(n,s);if(!o.ok){const a=await o.text().catch(()=>"Unable to read error response"),l=new Error(`HTTP ${o.status} ${o.statusText} at ${n}`);throw l.status=o.status,l.statusText=o.statusText,l.url=n,l.method="DELETE",l.responseBody=a,l}const i=o.headers.get("content-type");if(i&&i.includes("application/json")){const a=await o.json();return this._transformResponse(a)}return await o.text()}async _spansSetMetadata(t,n){const r=`${this.baseUrl}/api/v1/spans/${t}/metadata`,s={body:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"PUT",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"PUT",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="PUT",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _spansDeleteMetadata(t){const n=`${this.baseUrl}/api/v1/spans/${t}/metadata`;if(this.isBatching){const i={path:n.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(i),{batched:!0}}const r={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},s=await fetch(n,r);if(!s.ok){const i=await s.text().catch(()=>"Unable to read error response"),a=new Error(`HTTP ${s.status} ${s.statusText} at ${n}`);throw a.status=s.status,a.statusText=s.statusText,a.url=n,a.method="DELETE",a.responseBody=i,a}const o=s.headers.get("content-type");if(o&&o.includes("application/json")){const i=await s.json();return this._transformResponse(i)}return await s.text()}async _textsSetMetadata(t,n){const r=`${this.baseUrl}/api/v1/texts/${t}/metadata`,s={body:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"PUT",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"PUT",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="PUT",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _textsDeleteMetadata(t){const n=`${this.baseUrl}/api/v1/texts/${t}/metadata`;if(this.isBatching){const i={path:n.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(i),{batched:!0}}const r={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},s=await fetch(n,r);if(!s.ok){const i=await s.text().catch(()=>"Unable to read error response"),a=new Error(`HTTP ${s.status} ${s.statusText} at ${n}`);throw a.status=s.status,a.statusText=s.statusText,a.url=n,a.method="DELETE",a.responseBody=i,a}const o=s.headers.get("content-type");if(o&&o.includes("application/json")){const i=await s.json();return this._transformResponse(i)}return await s.text()}async _textsCreate(t,n,r,s=void 0){const o=`${this.baseUrl}/api/v1/texts`,i={"text-layer-id":t,"document-id":n,body:r,metadata:s};Object.keys(i).forEach(f=>i[f]===void 0&&delete i[f]);const a=this._transformRequest(i);if(this.isBatching){const f={path:o.replace(this.baseUrl,""),method:"POST",body:a};return this.batchOperations.push(f),{batched:!0}}const l={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(a)},u=await fetch(o,l);if(!u.ok){const f=await u.text().catch(()=>"Unable to read error response"),p=new Error(`HTTP ${u.status} ${u.statusText} at ${o}`);throw p.status=u.status,p.statusText=u.statusText,p.url=o,p.method="POST",p.responseBody=f,p}const c=u.headers.get("content-type");if(c&&c.includes("application/json")){const f=await u.json();return this._transformResponse(f)}return await u.text()}async _textsGet(t,n=void 0){const r=`${this.baseUrl}/api/v1/texts/${t}`,s=new URLSearchParams;n!=null&&s.append("as-of",n);const o=s.toString(),i=o?`${r}?${o}`:r;if(this.isBatching){const c={path:i.replace(this.baseUrl,""),method:"GET"};return this.batchOperations.push(c),{batched:!0}}const a={method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},l=await fetch(i,a);if(!l.ok){const c=await l.text().catch(()=>"Unable to read error response"),f=new Error(`HTTP ${l.status} ${l.statusText} at ${i}`);throw f.status=l.status,f.statusText=l.statusText,f.url=i,f.method="GET",f.responseBody=c,f}const u=l.headers.get("content-type");if(u&&u.includes("application/json")){const c=await l.json();return this._transformResponse(c)}return await l.text()}async _textsDelete(t){const n=`${this.baseUrl}/api/v1/texts/${t}`;if(this.isBatching){const i={path:n.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(i),{batched:!0}}const r={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},s=await fetch(n,r);if(!s.ok){const i=await s.text().catch(()=>"Unable to read error response"),a=new Error(`HTTP ${s.status} ${s.statusText} at ${n}`);throw a.status=s.status,a.statusText=s.statusText,a.url=n,a.method="DELETE",a.responseBody=i,a}const o=s.headers.get("content-type");if(o&&o.includes("application/json")){const i=await s.json();return this._transformResponse(i)}return await s.text()}async _textsUpdate(t,n){const r=`${this.baseUrl}/api/v1/texts/${t}`,s={body:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"PATCH",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"PATCH",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="PATCH",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _usersList(t=void 0){const n=`${this.baseUrl}/api/v1/users`,r=new URLSearchParams;t!=null&&r.append("as-of",t);const s=r.toString(),o=s?`${n}?${s}`:n;if(this.isBatching){const u={path:o.replace(this.baseUrl,""),method:"GET"};return this.batchOperations.push(u),{batched:!0}}const i={method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},a=await fetch(o,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${o}`);throw c.status=a.status,c.statusText=a.statusText,c.url=o,c.method="GET",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _usersCreate(t,n,r){const s=`${this.baseUrl}/api/v1/users`,o={username:t,password:n,"is-admin":r};Object.keys(o).forEach(c=>o[c]===void 0&&delete o[c]);const i=this._transformRequest(o);if(this.isBatching){const c={path:s.replace(this.baseUrl,""),method:"POST",body:i};return this.batchOperations.push(c),{batched:!0}}const a={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(i)},l=await fetch(s,a);if(!l.ok){const c=await l.text().catch(()=>"Unable to read error response"),f=new Error(`HTTP ${l.status} ${l.statusText} at ${s}`);throw f.status=l.status,f.statusText=l.statusText,f.url=s,f.method="POST",f.responseBody=c,f}const u=l.headers.get("content-type");if(u&&u.includes("application/json")){const c=await l.json();return this._transformResponse(c)}return await l.text()}async _usersAudit(t,n=void 0,r=void 0,s=void 0){const o=`${this.baseUrl}/api/v1/users/${t}/audit`,i=new URLSearchParams;n!=null&&i.append("start-time",n),r!=null&&i.append("end-time",r),s!=null&&i.append("as-of",s);const a=i.toString(),l=a?`${o}?${a}`:o;if(this.isBatching){const p={path:l.replace(this.baseUrl,""),method:"GET"};return this.batchOperations.push(p),{batched:!0}}const u={method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},c=await fetch(l,u);if(!c.ok){const p=await c.text().catch(()=>"Unable to read error response"),g=new Error(`HTTP ${c.status} ${c.statusText} at ${l}`);throw g.status=c.status,g.statusText=c.statusText,g.url=l,g.method="GET",g.responseBody=p,g}const f=c.headers.get("content-type");if(f&&f.includes("application/json")){const p=await c.json();return this._transformResponse(p)}return await c.text()}async _usersGet(t,n=void 0){const r=`${this.baseUrl}/api/v1/users/${t}`,s=new URLSearchParams;n!=null&&s.append("as-of",n);const o=s.toString(),i=o?`${r}?${o}`:r;if(this.isBatching){const c={path:i.replace(this.baseUrl,""),method:"GET"};return this.batchOperations.push(c),{batched:!0}}const a={method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},l=await fetch(i,a);if(!l.ok){const c=await l.text().catch(()=>"Unable to read error response"),f=new Error(`HTTP ${l.status} ${l.statusText} at ${i}`);throw f.status=l.status,f.statusText=l.statusText,f.url=i,f.method="GET",f.responseBody=c,f}const u=l.headers.get("content-type");if(u&&u.includes("application/json")){const c=await l.json();return this._transformResponse(c)}return await l.text()}async _usersDelete(t){const n=`${this.baseUrl}/api/v1/users/${t}`;if(this.isBatching){const i={path:n.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(i),{batched:!0}}const r={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},s=await fetch(n,r);if(!s.ok){const i=await s.text().catch(()=>"Unable to read error response"),a=new Error(`HTTP ${s.status} ${s.statusText} at ${n}`);throw a.status=s.status,a.statusText=s.statusText,a.url=n,a.method="DELETE",a.responseBody=i,a}const o=s.headers.get("content-type");if(o&&o.includes("application/json")){const i=await s.json();return this._transformResponse(i)}return await s.text()}async _usersUpdate(t,n=void 0,r=void 0,s=void 0){const o=`${this.baseUrl}/api/v1/users/${t}`,i={password:n,username:r,"is-admin":s};Object.keys(i).forEach(f=>i[f]===void 0&&delete i[f]);const a=this._transformRequest(i);if(this.isBatching){const f={path:o.replace(this.baseUrl,""),method:"PATCH",body:a};return this.batchOperations.push(f),{batched:!0}}const l={method:"PATCH",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(a)},u=await fetch(o,l);if(!u.ok){const f=await u.text().catch(()=>"Unable to read error response"),p=new Error(`HTTP ${u.status} ${u.statusText} at ${o}`);throw p.status=u.status,p.statusText=u.statusText,p.url=o,p.method="PATCH",p.responseBody=f,p}const c=u.headers.get("content-type");if(c&&c.includes("application/json")){const f=await u.json();return this._transformResponse(f)}return await u.text()}async _tokenLayersShift(t,n){const r=`${this.baseUrl}/api/v1/token-layers/${t}/shift`,s={direction:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"POST",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="POST",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _tokenLayersCreate(t,n){const r=`${this.baseUrl}/api/v1/token-layers`,s={"text-layer-id":t,name:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"POST",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="POST",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _tokenLayersSetConfig(t,n,r,s){const o=`${this.baseUrl}/api/v1/token-layers/${t}/config/${n}/${r}`,i=s;if(this.isBatching){const c={path:o.replace(this.baseUrl,""),method:"PUT",body:i};return this.batchOperations.push(c),{batched:!0}}const a={method:"PUT",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(i)},l=await fetch(o,a);if(!l.ok){const c=await l.text().catch(()=>"Unable to read error response"),f=new Error(`HTTP ${l.status} ${l.statusText} at ${o}`);throw f.status=l.status,f.statusText=l.statusText,f.url=o,f.method="PUT",f.responseBody=c,f}const u=l.headers.get("content-type");if(u&&u.includes("application/json")){const c=await l.json();return this._transformResponse(c)}return await l.text()}async _tokenLayersDeleteConfig(t,n,r){const s=`${this.baseUrl}/api/v1/token-layers/${t}/config/${n}/${r}`;if(this.isBatching){const l={path:s.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(l),{batched:!0}}const o={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},i=await fetch(s,o);if(!i.ok){const l=await i.text().catch(()=>"Unable to read error response"),u=new Error(`HTTP ${i.status} ${i.statusText} at ${s}`);throw u.status=i.status,u.statusText=i.statusText,u.url=s,u.method="DELETE",u.responseBody=l,u}const a=i.headers.get("content-type");if(a&&a.includes("application/json")){const l=await i.json();return this._transformResponse(l)}return await i.text()}async _tokenLayersGet(t,n=void 0){const r=`${this.baseUrl}/api/v1/token-layers/${t}`,s=new URLSearchParams;n!=null&&s.append("as-of",n);const o=s.toString(),i=o?`${r}?${o}`:r;if(this.isBatching){const c={path:i.replace(this.baseUrl,""),method:"GET"};return this.batchOperations.push(c),{batched:!0}}const a={method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},l=await fetch(i,a);if(!l.ok){const c=await l.text().catch(()=>"Unable to read error response"),f=new Error(`HTTP ${l.status} ${l.statusText} at ${i}`);throw f.status=l.status,f.statusText=l.statusText,f.url=i,f.method="GET",f.responseBody=c,f}const u=l.headers.get("content-type");if(u&&u.includes("application/json")){const c=await l.json();return this._transformResponse(c)}return await l.text()}async _tokenLayersDelete(t){const n=`${this.baseUrl}/api/v1/token-layers/${t}`;if(this.isBatching){const i={path:n.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(i),{batched:!0}}const r={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},s=await fetch(n,r);if(!s.ok){const i=await s.text().catch(()=>"Unable to read error response"),a=new Error(`HTTP ${s.status} ${s.statusText} at ${n}`);throw a.status=s.status,a.statusText=s.statusText,a.url=n,a.method="DELETE",a.responseBody=i,a}const o=s.headers.get("content-type");if(o&&o.includes("application/json")){const i=await s.json();return this._transformResponse(i)}return await s.text()}async _tokenLayersUpdate(t,n){const r=`${this.baseUrl}/api/v1/token-layers/${t}`,s={name:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"PATCH",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"PATCH",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="PATCH",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _documentsAudit(t,n=void 0,r=void 0,s=void 0){const o=`${this.baseUrl}/api/v1/documents/${t}/audit`,i=new URLSearchParams;n!=null&&i.append("start-time",n),r!=null&&i.append("end-time",r),s!=null&&i.append("as-of",s);const a=i.toString(),l=a?`${o}?${a}`:o;if(this.isBatching){const p={path:l.replace(this.baseUrl,""),method:"GET"};return this.batchOperations.push(p),{batched:!0}}const u={method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},c=await fetch(l,u);if(!c.ok){const p=await c.text().catch(()=>"Unable to read error response"),g=new Error(`HTTP ${c.status} ${c.statusText} at ${l}`);throw g.status=c.status,g.statusText=c.statusText,g.url=l,g.method="GET",g.responseBody=p,g}const f=c.headers.get("content-type");if(f&&f.includes("application/json")){const p=await c.json();return this._transformResponse(p)}return await c.text()}async _documentsGet(t,n=void 0,r=void 0){const s=`${this.baseUrl}/api/v1/documents/${t}`,o=new URLSearchParams;n!=null&&o.append("include-body",n),r!=null&&o.append("as-of",r);const i=o.toString(),a=i?`${s}?${i}`:s;if(this.isBatching){const f={path:a.replace(this.baseUrl,""),method:"GET"};return this.batchOperations.push(f),{batched:!0}}const l={method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},u=await fetch(a,l);if(!u.ok){const f=await u.text().catch(()=>"Unable to read error response"),p=new Error(`HTTP ${u.status} ${u.statusText} at ${a}`);throw p.status=u.status,p.statusText=u.statusText,p.url=a,p.method="GET",p.responseBody=f,p}const c=u.headers.get("content-type");if(c&&c.includes("application/json")){const f=await u.json();return this._transformResponse(f)}return await u.text()}async _documentsDelete(t){const n=`${this.baseUrl}/api/v1/documents/${t}`;if(this.isBatching){const i={path:n.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(i),{batched:!0}}const r={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},s=await fetch(n,r);if(!s.ok){const i=await s.text().catch(()=>"Unable to read error response"),a=new Error(`HTTP ${s.status} ${s.statusText} at ${n}`);throw a.status=s.status,a.statusText=s.statusText,a.url=n,a.method="DELETE",a.responseBody=i,a}const o=s.headers.get("content-type");if(o&&o.includes("application/json")){const i=await s.json();return this._transformResponse(i)}return await s.text()}async _documentsUpdate(t,n){const r=`${this.baseUrl}/api/v1/documents/${t}`,s={name:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"PATCH",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"PATCH",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="PATCH",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _documentsCreate(t,n){const r=`${this.baseUrl}/api/v1/documents`,s={"project-id":t,name:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"POST",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="POST",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _projectsSendMessage(t,n){const r=`${this.baseUrl}/api/v1/projects/${t}/message`,s={body:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"POST",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="POST",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _projectsAddWriter(t,n){const r=`${this.baseUrl}/api/v1/projects/${t}/writers/${n}`;if(this.isBatching){const a={path:r.replace(this.baseUrl,""),method:"POST"};return this.batchOperations.push(a),{batched:!0}}const s={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},o=await fetch(r,s);if(!o.ok){const a=await o.text().catch(()=>"Unable to read error response"),l=new Error(`HTTP ${o.status} ${o.statusText} at ${r}`);throw l.status=o.status,l.statusText=o.statusText,l.url=r,l.method="POST",l.responseBody=a,l}const i=o.headers.get("content-type");if(i&&i.includes("application/json")){const a=await o.json();return this._transformResponse(a)}return await o.text()}async _projectsRemoveWriter(t,n){const r=`${this.baseUrl}/api/v1/projects/${t}/writers/${n}`;if(this.isBatching){const a={path:r.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(a),{batched:!0}}const s={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},o=await fetch(r,s);if(!o.ok){const a=await o.text().catch(()=>"Unable to read error response"),l=new Error(`HTTP ${o.status} ${o.statusText} at ${r}`);throw l.status=o.status,l.statusText=o.statusText,l.url=r,l.method="DELETE",l.responseBody=a,l}const i=o.headers.get("content-type");if(i&&i.includes("application/json")){const a=await o.json();return this._transformResponse(a)}return await o.text()}async _projectsAddReader(t,n){const r=`${this.baseUrl}/api/v1/projects/${t}/readers/${n}`;if(this.isBatching){const a={path:r.replace(this.baseUrl,""),method:"POST"};return this.batchOperations.push(a),{batched:!0}}const s={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},o=await fetch(r,s);if(!o.ok){const a=await o.text().catch(()=>"Unable to read error response"),l=new Error(`HTTP ${o.status} ${o.statusText} at ${r}`);throw l.status=o.status,l.statusText=o.statusText,l.url=r,l.method="POST",l.responseBody=a,l}const i=o.headers.get("content-type");if(i&&i.includes("application/json")){const a=await o.json();return this._transformResponse(a)}return await o.text()}async _projectsRemoveReader(t,n){const r=`${this.baseUrl}/api/v1/projects/${t}/readers/${n}`;if(this.isBatching){const a={path:r.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(a),{batched:!0}}const s={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},o=await fetch(r,s);if(!o.ok){const a=await o.text().catch(()=>"Unable to read error response"),l=new Error(`HTTP ${o.status} ${o.statusText} at ${r}`);throw l.status=o.status,l.statusText=o.statusText,l.url=r,l.method="DELETE",l.responseBody=a,l}const i=o.headers.get("content-type");if(i&&i.includes("application/json")){const a=await o.json();return this._transformResponse(a)}return await o.text()}async _projectsHeartbeat(t,n){const r=`${this.baseUrl}/api/v1/projects/${t}/heartbeat`,s={"client-id":n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"POST",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="POST",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}_projectsListen(t,n,r=300){const s=Date.now();let o=!1,i=!1,a=null,l={"audit-log":0,message:0,heartbeat:0,connected:0,other:0},u=new AbortController;const c=this,f=async()=>{if(!(!a||i))try{(await fetch(`${this.baseUrl}/api/v1/projects/${t}/heartbeat`,{method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify({"client-id":a}),signal:u.signal})).ok}catch(g){g.name}},p={readyState:0,close:()=>{i||(i=!0,o=!1,p.readyState=2,u.abort())},getStats:()=>({durationSeconds:(Date.now()-s)/1e3,isConnected:o,isClosed:i,clientId:a,events:{...l},readyState:p.readyState})};return r>0&&setTimeout(()=>{i||p.close()},r*1e3),(async()=>{try{const g=`${this.baseUrl}/api/v1/projects/${t}/listen`,k=await fetch(g,{method:"GET",headers:{Authorization:`Bearer ${this.token}`,Accept:"text/event-stream","Cache-Control":"no-cache"},signal:u.signal});if(!k.ok)throw new Error(`HTTP ${k.status} ${k.statusText}`);o=!0,p.readyState=1;const v=k.body.getReader(),b=new TextDecoder;let y="";for(;;){const{done:h,value:m}=await v.read();if(h||i)break;y+=b.decode(m,{stream:!0});const w=y.split(`
`);y=w.pop()||"";let j="",C="";for(const P of w)if(P.startsWith("event: "))j=P.slice(7).trim();else if(P.startsWith("data: "))C=P.slice(6);else if(P===""&&j&&C){try{if(l[j]=(l[j]||0)+1,j==="connected"){const E=JSON.parse(C);a=E["client-id"]||E.clientId}else if(j==="heartbeat")f();else{const E=JSON.parse(C);n(j,c._transformResponse(E))}}catch{}j="",C=""}}}catch{}finally{o=!1,i=!0,p.readyState=2}})(),p}async _projectsAddMaintainer(t,n){const r=`${this.baseUrl}/api/v1/projects/${t}/maintainers/${n}`;if(this.isBatching){const a={path:r.replace(this.baseUrl,""),method:"POST"};return this.batchOperations.push(a),{batched:!0}}const s={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},o=await fetch(r,s);if(!o.ok){const a=await o.text().catch(()=>"Unable to read error response"),l=new Error(`HTTP ${o.status} ${o.statusText} at ${r}`);throw l.status=o.status,l.statusText=o.statusText,l.url=r,l.method="POST",l.responseBody=a,l}const i=o.headers.get("content-type");if(i&&i.includes("application/json")){const a=await o.json();return this._transformResponse(a)}return await o.text()}async _projectsRemoveMaintainer(t,n){const r=`${this.baseUrl}/api/v1/projects/${t}/maintainers/${n}`;if(this.isBatching){const a={path:r.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(a),{batched:!0}}const s={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},o=await fetch(r,s);if(!o.ok){const a=await o.text().catch(()=>"Unable to read error response"),l=new Error(`HTTP ${o.status} ${o.statusText} at ${r}`);throw l.status=o.status,l.statusText=o.statusText,l.url=r,l.method="DELETE",l.responseBody=a,l}const i=o.headers.get("content-type");if(i&&i.includes("application/json")){const a=await o.json();return this._transformResponse(a)}return await o.text()}async _projectsAudit(t,n=void 0,r=void 0,s=void 0){const o=`${this.baseUrl}/api/v1/projects/${t}/audit`,i=new URLSearchParams;n!=null&&i.append("start-time",n),r!=null&&i.append("end-time",r),s!=null&&i.append("as-of",s);const a=i.toString(),l=a?`${o}?${a}`:o;if(this.isBatching){const p={path:l.replace(this.baseUrl,""),method:"GET"};return this.batchOperations.push(p),{batched:!0}}const u={method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},c=await fetch(l,u);if(!c.ok){const p=await c.text().catch(()=>"Unable to read error response"),g=new Error(`HTTP ${c.status} ${c.statusText} at ${l}`);throw g.status=c.status,g.statusText=c.statusText,g.url=l,g.method="GET",g.responseBody=p,g}const f=c.headers.get("content-type");if(f&&f.includes("application/json")){const p=await c.json();return this._transformResponse(p)}return await c.text()}async _projectsGet(t,n=void 0,r=void 0){const s=`${this.baseUrl}/api/v1/projects/${t}`,o=new URLSearchParams;n!=null&&o.append("include-documents",n),r!=null&&o.append("as-of",r);const i=o.toString(),a=i?`${s}?${i}`:s;if(this.isBatching){const f={path:a.replace(this.baseUrl,""),method:"GET"};return this.batchOperations.push(f),{batched:!0}}const l={method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},u=await fetch(a,l);if(!u.ok){const f=await u.text().catch(()=>"Unable to read error response"),p=new Error(`HTTP ${u.status} ${u.statusText} at ${a}`);throw p.status=u.status,p.statusText=u.statusText,p.url=a,p.method="GET",p.responseBody=f,p}const c=u.headers.get("content-type");if(c&&c.includes("application/json")){const f=await u.json();return this._transformResponse(f)}return await u.text()}async _projectsDelete(t){const n=`${this.baseUrl}/api/v1/projects/${t}`;if(this.isBatching){const i={path:n.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(i),{batched:!0}}const r={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},s=await fetch(n,r);if(!s.ok){const i=await s.text().catch(()=>"Unable to read error response"),a=new Error(`HTTP ${s.status} ${s.statusText} at ${n}`);throw a.status=s.status,a.statusText=s.statusText,a.url=n,a.method="DELETE",a.responseBody=i,a}const o=s.headers.get("content-type");if(o&&o.includes("application/json")){const i=await s.json();return this._transformResponse(i)}return await s.text()}async _projectsUpdate(t,n){const r=`${this.baseUrl}/api/v1/projects/${t}`,s={name:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"PATCH",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"PATCH",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="PATCH",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _projectsList(t=void 0){const n=`${this.baseUrl}/api/v1/projects`,r=new URLSearchParams;t!=null&&r.append("as-of",t);const s=r.toString(),o=s?`${n}?${s}`:n;if(this.isBatching){const u={path:o.replace(this.baseUrl,""),method:"GET"};return this.batchOperations.push(u),{batched:!0}}const i={method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},a=await fetch(o,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${o}`);throw c.status=a.status,c.statusText=a.statusText,c.url=o,c.method="GET",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _projectsCreate(t){const n=`${this.baseUrl}/api/v1/projects`,r={name:t};Object.keys(r).forEach(l=>r[l]===void 0&&delete r[l]);const s=this._transformRequest(r);if(this.isBatching){const l={path:n.replace(this.baseUrl,""),method:"POST",body:s};return this.batchOperations.push(l),{batched:!0}}const o={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(s)},i=await fetch(n,o);if(!i.ok){const l=await i.text().catch(()=>"Unable to read error response"),u=new Error(`HTTP ${i.status} ${i.statusText} at ${n}`);throw u.status=i.status,u.statusText=i.statusText,u.url=n,u.method="POST",u.responseBody=l,u}const a=i.headers.get("content-type");if(a&&a.includes("application/json")){const l=await i.json();return this._transformResponse(l)}return await i.text()}async _textLayersSetConfig(t,n,r,s){const o=`${this.baseUrl}/api/v1/text-layers/${t}/config/${n}/${r}`,i=s;if(this.isBatching){const c={path:o.replace(this.baseUrl,""),method:"PUT",body:i};return this.batchOperations.push(c),{batched:!0}}const a={method:"PUT",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(i)},l=await fetch(o,a);if(!l.ok){const c=await l.text().catch(()=>"Unable to read error response"),f=new Error(`HTTP ${l.status} ${l.statusText} at ${o}`);throw f.status=l.status,f.statusText=l.statusText,f.url=o,f.method="PUT",f.responseBody=c,f}const u=l.headers.get("content-type");if(u&&u.includes("application/json")){const c=await l.json();return this._transformResponse(c)}return await l.text()}async _textLayersDeleteConfig(t,n,r){const s=`${this.baseUrl}/api/v1/text-layers/${t}/config/${n}/${r}`;if(this.isBatching){const l={path:s.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(l),{batched:!0}}const o={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},i=await fetch(s,o);if(!i.ok){const l=await i.text().catch(()=>"Unable to read error response"),u=new Error(`HTTP ${i.status} ${i.statusText} at ${s}`);throw u.status=i.status,u.statusText=i.statusText,u.url=s,u.method="DELETE",u.responseBody=l,u}const a=i.headers.get("content-type");if(a&&a.includes("application/json")){const l=await i.json();return this._transformResponse(l)}return await i.text()}async _textLayersGet(t,n=void 0){const r=`${this.baseUrl}/api/v1/text-layers/${t}`,s=new URLSearchParams;n!=null&&s.append("as-of",n);const o=s.toString(),i=o?`${r}?${o}`:r;if(this.isBatching){const c={path:i.replace(this.baseUrl,""),method:"GET"};return this.batchOperations.push(c),{batched:!0}}const a={method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},l=await fetch(i,a);if(!l.ok){const c=await l.text().catch(()=>"Unable to read error response"),f=new Error(`HTTP ${l.status} ${l.statusText} at ${i}`);throw f.status=l.status,f.statusText=l.statusText,f.url=i,f.method="GET",f.responseBody=c,f}const u=l.headers.get("content-type");if(u&&u.includes("application/json")){const c=await l.json();return this._transformResponse(c)}return await l.text()}async _textLayersDelete(t){const n=`${this.baseUrl}/api/v1/text-layers/${t}`;if(this.isBatching){const i={path:n.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(i),{batched:!0}}const r={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},s=await fetch(n,r);if(!s.ok){const i=await s.text().catch(()=>"Unable to read error response"),a=new Error(`HTTP ${s.status} ${s.statusText} at ${n}`);throw a.status=s.status,a.statusText=s.statusText,a.url=n,a.method="DELETE",a.responseBody=i,a}const o=s.headers.get("content-type");if(o&&o.includes("application/json")){const i=await s.json();return this._transformResponse(i)}return await s.text()}async _textLayersUpdate(t,n){const r=`${this.baseUrl}/api/v1/text-layers/${t}`,s={name:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"PATCH",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"PATCH",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="PATCH",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _textLayersShift(t,n){const r=`${this.baseUrl}/api/v1/text-layers/${t}/shift`,s={direction:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"POST",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="POST",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _textLayersCreate(t,n){const r=`${this.baseUrl}/api/v1/text-layers`,s={"project-id":t,name:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"POST",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="POST",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _loginCreate(t,n){const r=`${this.baseUrl}/api/v1/login`,s={"user-id":t,password:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"POST",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="POST",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _bulkSubmit(t){const n=`${this.baseUrl}/api/v1/bulk`,r=this._transformRequest(t);if(this.isBatching){const a={path:n.replace(this.baseUrl,""),method:"POST",body:r};return this.batchOperations.push(a),{batched:!0}}const s={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(r)},o=await fetch(n,s);if(!o.ok){const a=await o.text().catch(()=>"Unable to read error response"),l=new Error(`HTTP ${o.status} ${o.statusText} at ${n}`);throw l.status=o.status,l.statusText=o.statusText,l.url=n,l.method="POST",l.responseBody=a,l}const i=o.headers.get("content-type");if(i&&i.includes("application/json")){const a=await o.json();return this._transformResponse(a)}return await o.text()}async _relationLayersShift(t,n){const r=`${this.baseUrl}/api/v1/relation-layers/${t}/shift`,s={direction:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"POST",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="POST",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _relationLayersCreate(t,n){const r=`${this.baseUrl}/api/v1/relation-layers`,s={"span-layer-id":t,name:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"POST",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="POST",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _relationLayersSetConfig(t,n,r,s){const o=`${this.baseUrl}/api/v1/relation-layers/${t}/config/${n}/${r}`,i=s;if(this.isBatching){const c={path:o.replace(this.baseUrl,""),method:"PUT",body:i};return this.batchOperations.push(c),{batched:!0}}const a={method:"PUT",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(i)},l=await fetch(o,a);if(!l.ok){const c=await l.text().catch(()=>"Unable to read error response"),f=new Error(`HTTP ${l.status} ${l.statusText} at ${o}`);throw f.status=l.status,f.statusText=l.statusText,f.url=o,f.method="PUT",f.responseBody=c,f}const u=l.headers.get("content-type");if(u&&u.includes("application/json")){const c=await l.json();return this._transformResponse(c)}return await l.text()}async _relationLayersDeleteConfig(t,n,r){const s=`${this.baseUrl}/api/v1/relation-layers/${t}/config/${n}/${r}`;if(this.isBatching){const l={path:s.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(l),{batched:!0}}const o={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},i=await fetch(s,o);if(!i.ok){const l=await i.text().catch(()=>"Unable to read error response"),u=new Error(`HTTP ${i.status} ${i.statusText} at ${s}`);throw u.status=i.status,u.statusText=i.statusText,u.url=s,u.method="DELETE",u.responseBody=l,u}const a=i.headers.get("content-type");if(a&&a.includes("application/json")){const l=await i.json();return this._transformResponse(l)}return await i.text()}async _relationLayersGet(t,n=void 0){const r=`${this.baseUrl}/api/v1/relation-layers/${t}`,s=new URLSearchParams;n!=null&&s.append("as-of",n);const o=s.toString(),i=o?`${r}?${o}`:r;if(this.isBatching){const c={path:i.replace(this.baseUrl,""),method:"GET"};return this.batchOperations.push(c),{batched:!0}}const a={method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},l=await fetch(i,a);if(!l.ok){const c=await l.text().catch(()=>"Unable to read error response"),f=new Error(`HTTP ${l.status} ${l.statusText} at ${i}`);throw f.status=l.status,f.statusText=l.statusText,f.url=i,f.method="GET",f.responseBody=c,f}const u=l.headers.get("content-type");if(u&&u.includes("application/json")){const c=await l.json();return this._transformResponse(c)}return await l.text()}async _relationLayersDelete(t){const n=`${this.baseUrl}/api/v1/relation-layers/${t}`;if(this.isBatching){const i={path:n.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(i),{batched:!0}}const r={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},s=await fetch(n,r);if(!s.ok){const i=await s.text().catch(()=>"Unable to read error response"),a=new Error(`HTTP ${s.status} ${s.statusText} at ${n}`);throw a.status=s.status,a.statusText=s.statusText,a.url=n,a.method="DELETE",a.responseBody=i,a}const o=s.headers.get("content-type");if(o&&o.includes("application/json")){const i=await s.json();return this._transformResponse(i)}return await s.text()}async _relationLayersUpdate(t,n){const r=`${this.baseUrl}/api/v1/relation-layers/${t}`,s={name:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"PATCH",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"PATCH",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="PATCH",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _tokensCreate(t,n,r,s,o=void 0,i=void 0){const a=`${this.baseUrl}/api/v1/tokens`,l={"token-layer-id":t,"text-id":n,begin:r,end:s,precedence:o,metadata:i};Object.keys(l).forEach(g=>l[g]===void 0&&delete l[g]);const u=this._transformRequest(l);if(this.isBatching){const g={path:a.replace(this.baseUrl,""),method:"POST",body:u};return this.batchOperations.push(g),{batched:!0}}const c={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(u)},f=await fetch(a,c);if(!f.ok){const g=await f.text().catch(()=>"Unable to read error response"),k=new Error(`HTTP ${f.status} ${f.statusText} at ${a}`);throw k.status=f.status,k.statusText=f.statusText,k.url=a,k.method="POST",k.responseBody=g,k}const p=f.headers.get("content-type");if(p&&p.includes("application/json")){const g=await f.json();return this._transformResponse(g)}return await f.text()}async _tokensGet(t,n=void 0){const r=`${this.baseUrl}/api/v1/tokens/${t}`,s=new URLSearchParams;n!=null&&s.append("as-of",n);const o=s.toString(),i=o?`${r}?${o}`:r;if(this.isBatching){const c={path:i.replace(this.baseUrl,""),method:"GET"};return this.batchOperations.push(c),{batched:!0}}const a={method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},l=await fetch(i,a);if(!l.ok){const c=await l.text().catch(()=>"Unable to read error response"),f=new Error(`HTTP ${l.status} ${l.statusText} at ${i}`);throw f.status=l.status,f.statusText=l.statusText,f.url=i,f.method="GET",f.responseBody=c,f}const u=l.headers.get("content-type");if(u&&u.includes("application/json")){const c=await l.json();return this._transformResponse(c)}return await l.text()}async _tokensDelete(t){const n=`${this.baseUrl}/api/v1/tokens/${t}`;if(this.isBatching){const i={path:n.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(i),{batched:!0}}const r={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},s=await fetch(n,r);if(!s.ok){const i=await s.text().catch(()=>"Unable to read error response"),a=new Error(`HTTP ${s.status} ${s.statusText} at ${n}`);throw a.status=s.status,a.statusText=s.statusText,a.url=n,a.method="DELETE",a.responseBody=i,a}const o=s.headers.get("content-type");if(o&&o.includes("application/json")){const i=await s.json();return this._transformResponse(i)}return await s.text()}async _tokensUpdate(t,n=void 0,r=void 0,s=void 0){const o=`${this.baseUrl}/api/v1/tokens/${t}`,i={begin:n,end:r,precedence:s};Object.keys(i).forEach(f=>i[f]===void 0&&delete i[f]);const a=this._transformRequest(i);if(this.isBatching){const f={path:o.replace(this.baseUrl,""),method:"PATCH",body:a};return this.batchOperations.push(f),{batched:!0}}const l={method:"PATCH",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(a)},u=await fetch(o,l);if(!u.ok){const f=await u.text().catch(()=>"Unable to read error response"),p=new Error(`HTTP ${u.status} ${u.statusText} at ${o}`);throw p.status=u.status,p.statusText=u.statusText,p.url=o,p.method="PATCH",p.responseBody=f,p}const c=u.headers.get("content-type");if(c&&c.includes("application/json")){const f=await u.json();return this._transformResponse(f)}return await u.text()}async _tokensBulkCreate(t){const n=`${this.baseUrl}/api/v1/tokens/bulk`,r=this._transformRequest(t);if(this.isBatching){const a={path:n.replace(this.baseUrl,""),method:"POST",body:r};return this.batchOperations.push(a),{batched:!0}}const s={method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(r)},o=await fetch(n,s);if(!o.ok){const a=await o.text().catch(()=>"Unable to read error response"),l=new Error(`HTTP ${o.status} ${o.statusText} at ${n}`);throw l.status=o.status,l.statusText=o.statusText,l.url=n,l.method="POST",l.responseBody=a,l}const i=o.headers.get("content-type");if(i&&i.includes("application/json")){const a=await o.json();return this._transformResponse(a)}return await o.text()}async _tokensBulkDelete(t){const n=`${this.baseUrl}/api/v1/tokens/bulk`,r=this._transformRequest(t);if(this.isBatching){const a={path:n.replace(this.baseUrl,""),method:"DELETE",body:r};return this.batchOperations.push(a),{batched:!0}}const s={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(r)},o=await fetch(n,s);if(!o.ok){const a=await o.text().catch(()=>"Unable to read error response"),l=new Error(`HTTP ${o.status} ${o.statusText} at ${n}`);throw l.status=o.status,l.statusText=o.statusText,l.url=n,l.method="DELETE",l.responseBody=a,l}const i=o.headers.get("content-type");if(i&&i.includes("application/json")){const a=await o.json();return this._transformResponse(a)}return await o.text()}async _tokensSetMetadata(t,n){const r=`${this.baseUrl}/api/v1/tokens/${t}/metadata`,s={body:n};Object.keys(s).forEach(u=>s[u]===void 0&&delete s[u]);const o=this._transformRequest(s);if(this.isBatching){const u={path:r.replace(this.baseUrl,""),method:"PUT",body:o};return this.batchOperations.push(u),{batched:!0}}const i={method:"PUT",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)},a=await fetch(r,i);if(!a.ok){const u=await a.text().catch(()=>"Unable to read error response"),c=new Error(`HTTP ${a.status} ${a.statusText} at ${r}`);throw c.status=a.status,c.statusText=a.statusText,c.url=r,c.method="PUT",c.responseBody=u,c}const l=a.headers.get("content-type");if(l&&l.includes("application/json")){const u=await a.json();return this._transformResponse(u)}return await a.text()}async _tokensDeleteMetadata(t){const n=`${this.baseUrl}/api/v1/tokens/${t}/metadata`;if(this.isBatching){const i={path:n.replace(this.baseUrl,""),method:"DELETE"};return this.batchOperations.push(i),{batched:!0}}const r={method:"DELETE",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}},s=await fetch(n,r);if(!s.ok){const i=await s.text().catch(()=>"Unable to read error response"),a=new Error(`HTTP ${s.status} ${s.statusText} at ${n}`);throw a.status=s.status,a.statusText=s.statusText,a.url=n,a.method="DELETE",a.responseBody=i,a}const o=s.headers.get("content-type");if(o&&o.includes("application/json")){const i=await s.json();return this._transformResponse(i)}return await s.text()}static async login(t,n,r){const s=await fetch(`${t}/api/v1/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({"user-id":n,password:r})});if(!s.ok){const a=await s.text().catch(()=>"Unable to read error response"),l=new Error(`HTTP ${s.status} ${s.statusText} at ${t}/api/v1/login`);throw l.status=s.status,l.statusText=s.statusText,l.url=`${t}/api/v1/login`,l.method="POST",l.responseBody=a,l}const i=(await s.json()).token||"";return new qd(t,i)}};typeof Ls<"u"&&Ls.exports&&(Ls.exports=Vd);typeof window<"u"&&(window.PlaidClient=Vd);const mu=window.PlaidClient,yu=window.location.origin;let dn=null;function iy(e){try{const t=e.split(".");if(t.length!==3)throw new Error("Invalid JWT token format");const n=t[1],r=n+"=".repeat((4-n.length%4)%4),s=atob(r);return JSON.parse(s)}catch(t){return console.error("Failed to parse JWT payload:",t),null}}function ly(e){const t=iy(e);return(t==null?void 0:t["user/id"])||null}const xs={async login(e,t){try{dn=await mu.login(yu,e,t);const n=dn.token,r=ly(n);if(!r)throw new Error("Could not extract user ID from token");const s=await dn.users.get(r);return localStorage.setItem("token",n),localStorage.setItem("userId",r),localStorage.setItem("username",s.username),localStorage.setItem("isAdmin",(s.isAdmin||!1).toString()),{success:!0,user:{id:r,username:s.username,isAdmin:s.isAdmin||!1}}}catch(n){throw console.error("Login failed:",n),n}},logout(){dn=null,localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("username"),localStorage.removeItem("isAdmin"),window.location.href="/login"},getCurrentUser(){const e=localStorage.getItem("username"),t=localStorage.getItem("userId"),n=localStorage.getItem("token"),r=localStorage.getItem("isAdmin")==="true";return!e||!t||!n?null:{id:t,username:e,isAdmin:r}},getToken(){return localStorage.getItem("token")},isAuthenticated(){return!!this.getToken()},getClient(){const e=localStorage.getItem("token");return!dn&&e&&(dn=new mu(yu,e)),dn}},Jd=x.createContext(null),Xe=()=>{const e=x.useContext(Jd);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},uy=({children:e})=>{const[t,n]=x.useState(null),[r,s]=x.useState(!0);x.useEffect(()=>{const u=xs.getCurrentUser();u&&n(u),s(!1)},[]);const l={user:t,login:async(u,c)=>{try{const f=await xs.login(u,c);return n(f.user),{success:!0}}catch(f){return{success:!1,error:f.message||"Login failed"}}},logout:()=>{xs.logout(),n(null)},updateUser:u=>{if(t){const c={...t,...u};n(c),"isAdmin"in u&&localStorage.setItem("isAdmin",(u.isAdmin||!1).toString())}},isAuthenticated:!!t,loading:r,getClient:()=>{if(!t)throw new Error("Not authenticated");return xs.getClient()}};return d.jsx(Jd.Provider,{value:l,children:e})},cy=()=>{const{user:e,logout:t}=Xe(),n=So(),r=Pt(),s=()=>{t(),n("/login")},o=r.pathname.includes("/annotate");return d.jsxs("div",{className:"flex flex-col min-h-screen",children:[d.jsx("header",{className:"bg-white border-b border-gray-200",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex justify-between items-center h-16",children:[d.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"UD Editor"}),e&&d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs(He,{to:"/profile",className:"text-sm text-gray-600 hover:text-gray-900 px-3 py-1.5 rounded-md hover:bg-gray-100 transition-colors",children:[" ",e.username]}),d.jsx("button",{onClick:s,className:"text-sm text-gray-700 hover:text-gray-900 px-3 py-1.5 rounded-md hover:bg-gray-100 transition-colors",children:"Logout"})]})]})})}),d.jsx("main",{className:o?"flex-1":"flex-1 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:d.jsx(Sm,{})})]})},dy=({children:e})=>{const{isAuthenticated:t,loading:n}=Xe();return n?d.jsx("div",{className:"loading-container",children:"Loading..."}):t?e:d.jsx(Qa,{to:"/login",replace:!0})},fy=()=>{const[e,t]=x.useState(""),[n,r]=x.useState(""),[s,o]=x.useState(""),[i,a]=x.useState(!1),l=So(),{login:u}=Xe(),c=async f=>{f.preventDefault(),o(""),a(!0);try{const p=await u(e,n);p.success?l("/projects"):o(p.error||"Login failed. Please check your credentials.")}catch{o("An unexpected error occurred. Please try again.")}finally{a(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"max-w-md w-full space-y-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-center text-3xl font-bold text-gray-900",children:"UD Editor Login"}),d.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Universal Dependencies Tree Editor"})]}),d.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c,children:[s&&d.jsx("div",{className:"rounded-md bg-red-50 p-4",children:d.jsx("p",{className:"text-sm text-red-800",children:s})}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),d.jsx("input",{id:"username",type:"text",value:e,onChange:f=>t(f.target.value),required:!0,autoFocus:!0,disabled:i,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),d.jsx("input",{id:"password",type:"password",value:n,onChange:f=>r(f.target.value),required:!0,disabled:i,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),d.jsx("button",{type:"submit",disabled:i,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-800 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:i?"Logging in...":"Login"})]})]})})},py=()=>{const{user:e,getClient:t,updateUser:n}=Xe(),[r,s]=x.useState(!1),[o,i]=x.useState({username:(e==null?void 0:e.username)||"",currentPassword:"",newPassword:"",confirmPassword:""}),[a,l]=x.useState(""),[u,c]=x.useState(""),[f,p]=x.useState(!1),g=b=>{const{name:y,value:h}=b.target;i(m=>({...m,[y]:h})),a&&l(""),u&&c("")},k=async b=>{b.preventDefault(),p(!0),l(""),c("");try{const y=t();if(o.newPassword){if(o.newPassword!==o.confirmPassword){l("New passwords do not match"),p(!1);return}if(o.newPassword.length<6){l("Password must be at least 6 characters long"),p(!1);return}if(!o.currentPassword){l("Current password is required to change password"),p(!1);return}}if(!e.id){l("Could not get current user ID"),p(!1);return}const h={};if(o.username!==e.username&&(h.username=o.username),o.newPassword&&(h.password=o.newPassword),Object.keys(h).length===0){l("No changes to save"),p(!1);return}await y.users.update(e.id,h.password||void 0,h.username||void 0,void 0);const m=await y.users.get(e.id);c("Profile updated successfully!"),s(!1),i(w=>({...w,currentPassword:"",newPassword:"",confirmPassword:""})),localStorage.setItem("username",m.username),localStorage.setItem("isAdmin",(m.isAdmin||!1).toString()),n({username:m.username,isAdmin:m.isAdmin||!1}),i(w=>({...w,username:m.username}))}catch(y){l(y.message||"Failed to update profile")}finally{p(!1)}},v=()=>{s(!1),i({username:(e==null?void 0:e.username)||"",currentPassword:"",newPassword:"",confirmPassword:""}),l(""),c("")};return d.jsx("div",{className:"max-w-2xl mx-auto",children:d.jsx("div",{className:"bg-white shadow rounded-lg",children:d.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[d.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"User Profile"}),r?d.jsxs("form",{onSubmit:k,className:"space-y-6",children:[a&&d.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:a}),u&&d.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:u}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),d.jsx("input",{type:"text",id:"username",name:"username",value:o.username,onChange:g,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),d.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[d.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"Change Password (Optional)"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700",children:"Current Password"}),d.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:o.currentPassword,onChange:g,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:"New Password"}),d.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:o.newPassword,onChange:g,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),d.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:o.confirmPassword,onChange:g,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-6",children:[d.jsx("button",{type:"button",onClick:v,className:"bg-white text-gray-700 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:f,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Saving...":"Save Changes"})]})]}):d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Username"}),d.jsx("p",{className:"mt-1 text-sm text-gray-900",children:e==null?void 0:e.username})]}),d.jsx("div",{className:"pt-4",children:d.jsx("button",{onClick:()=>s(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Edit Profile"})})]})]})})})},hy=({onClose:e,onSuccess:t})=>{const[n,r]=x.useState(""),[s,o]=x.useState(!1),[i,a]=x.useState(""),{getClient:l}=Xe(),u=async()=>{const f=l(),p=await f.projects.create(n),g=await f.textLayers.create(p.id,"Text"),k=await f.tokenLayers.create(g.id,"Token"),v=["Ellipsis Form","Multi-word Tokens","Lemma","XPOS","UPOS","Features","Head","Sentence"],b=[];for(const h of v)b.push(await f.spanLayers.create(k.id,h));const y=b[2];return await f.relationLayers.create(y.id,"Relation"),p},c=async f=>{if(f.preventDefault(),!n.trim()){a("Project name is required");return}o(!0),a("");try{await u(),t()}catch(p){a("Failed to create project with layers"),console.error("Error creating project:",p)}finally{o(!1)}};return d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New UD Project"}),d.jsxs("form",{onSubmit:c,children:[i&&d.jsx("div",{className:"rounded-md bg-red-50 p-4 mb-4",children:d.jsx("p",{className:"text-sm text-red-800",children:i})}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"projectName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name"}),d.jsx("input",{id:"projectName",type:"text",value:n,onChange:f=>r(f.target.value),placeholder:"Enter project name",required:!0,autoFocus:!0,disabled:s,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),d.jsxs("div",{className:"bg-gray-50 rounded-md p-4 mb-6 text-sm text-gray-600",children:["This will create a new project with all necessary layers for Universal Dependencies annotation:",d.jsxs("ul",{className:"mt-2 ml-4 list-disc space-y-1",children:[d.jsx("li",{children:"Text and Token layers"}),d.jsx("li",{children:"Span layers for: Lemma, UPOS, XPOS, Features, etc."}),d.jsx("li",{children:"Relation layer for dependency parsing"})]})]}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:e,disabled:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 text-sm font-medium text-white bg-gray-900 border border-transparent rounded-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:s?"Creating...":"Create Project"})]})]})]})})},my=()=>{const[e,t]=x.useState([]),[n,r]=x.useState(!0),[s,o]=x.useState(""),[i,a]=x.useState(!1),{getClient:l}=Xe(),u=async()=>{try{r(!0);const p=l();if(!p)throw new Error("Not authenticated");const g=await p.projects.list();t(g),o("")}catch(p){if(p.message==="Not authenticated"||p.status===401){window.location.href="/login";return}o("Failed to load projects"),console.error("Error fetching projects:",p)}finally{r(!1)}};x.useEffect(()=>{u()},[]);const c=async(p,g)=>{if(confirm(`Are you sure you want to delete project "${g}"? This action cannot be undone.`))try{await l().projects.delete(p),await u()}catch(k){o("Failed to delete project"),console.error("Error deleting project:",k)}},f=()=>{a(!1),u()};return n?d.jsx("div",{className:"text-center text-gray-600 py-8",children:"Loading projects..."}):d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),d.jsx("button",{className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-colors text-sm font-medium",onClick:()=>a(!0),children:"+ New UD Project"})]}),s&&d.jsx("div",{className:"rounded-md bg-red-50 p-4 mb-4",children:d.jsx("p",{className:"text-sm text-red-800",children:s})}),i&&d.jsx(hy,{onClose:()=>a(!1),onSuccess:f}),e.length===0?d.jsx("div",{className:"text-center py-12",children:d.jsx("p",{className:"text-gray-500",children:"No projects yet. Create your first UD project to get started!"})}):d.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:d.jsx("ul",{className:"divide-y divide-gray-200",children:e.map(p=>d.jsx("li",{className:"hover:bg-gray-50 transition-colors",children:d.jsx("div",{className:"px-4 py-4 sm:px-6",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-lg font-medium text-gray-900",children:p.name}),d.jsxs("div",{className:"mt-1 flex items-center gap-4 text-sm text-gray-500",children:[d.jsxs("span",{children:["ID: ",p.id]}),p.documents&&d.jsxs("span",{children:[p.documents.length," document",p.documents.length!==1?"s":""]})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(He,{to:`/projects/${p.id}/documents`,className:"px-3 py-1.5 text-sm text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",children:"View Documents"}),d.jsx("button",{className:"px-3 py-1.5 text-sm text-red-600 hover:text-red-800 hover:bg-red-50 rounded-md transition-colors",onClick:()=>c(p.id,p.name),children:"Delete"})]})]})})},p.id))})})]})},yy=()=>{const{projectId:e}=Xr(),{user:t,getClient:n,updateUser:r}=Xe(),[s,o]=x.useState(null),[i,a]=x.useState([]),[l,u]=x.useState(!0),[c,f]=x.useState(""),[p,g]=x.useState(""),[k,v]=x.useState(!1),[b,y]=x.useState({username:"",password:"",confirmPassword:"",isAdmin:!1}),[h,m]=x.useState(""),[w,j]=x.useState(!1),[C,P]=x.useState(null),[E,O]=x.useState({username:"",password:"",confirmPassword:"",isAdmin:!1}),B=(t==null?void 0:t.isAdmin)||!1,F=async()=>{try{u(!0);const U=n(),A=await U.projects.get(e);o(A);const R=await U.users.list();a(R),f("")}catch(U){console.error("Error fetching data:",U),f("Failed to load project data")}finally{u(!1)}};x.useEffect(()=>{F()},[e]);const re=()=>{var U;return!t||!s?!1:B||((U=s.maintainers)==null?void 0:U.includes(t.id))},Y=U=>{var A,R,L;return s?(A=s.maintainers)!=null&&A.includes(U)?"maintainer":(R=s.writers)!=null&&R.includes(U)?"writer":(L=s.readers)!=null&&L.includes(U)?"reader":"none":"none"},de=async(U,A)=>{try{const R=n(),L=Y(U);L==="maintainer"?await R.projects.removeMaintainer(e,U):L==="writer"?await R.projects.removeWriter(e,U):L==="reader"&&await R.projects.removeReader(e,U),A==="maintainer"?await R.projects.addMaintainer(e,U):A==="writer"?await R.projects.addWriter(e,U):A==="reader"&&await R.projects.addReader(e,U),g("User permissions updated successfully"),await F()}catch(R){console.error("Error updating permissions:",R),f("Failed to update user permissions")}},ie=async U=>{if(U.preventDefault(),m(""),j(!0),b.password!==b.confirmPassword){m("Passwords do not match"),j(!1);return}if(b.password.length<6){m("Password must be at least 6 characters long"),j(!1);return}try{await n().users.create(b.username,b.password,b.isAdmin),g("User created successfully"),v(!1),y({username:"",password:"",confirmPassword:"",isAdmin:!1}),m(""),await F()}catch(A){console.error("Error creating user:",A),A.status===409||A.message&&A.message.includes("409")?m(`A user with the ID "${b.username}" already exists. Please choose a different user ID.`):m("Failed to create user: "+(A.message||"Unknown error"))}finally{j(!1)}},ye=U=>{P(U),O({username:U.username,password:"",confirmPassword:"",isAdmin:U.isAdmin||!1})},pe=async U=>{if(U.preventDefault(),f(""),g(""),E.password&&E.password!==E.confirmPassword){f("Passwords do not match");return}if(E.password&&E.password.length<6){f("Password must be at least 6 characters long");return}try{const A=n(),R={};E.username!==C.username&&(R.username=E.username),E.password&&(R.password=E.password),E.isAdmin!==(C.isAdmin||!1)&&(R.isAdmin=E.isAdmin),await A.users.update(C.id,R.password,R.username,R.isAdmin),g("User updated successfully"),P(null),O({username:"",password:"",confirmPassword:"",isAdmin:!1}),await F()}catch(A){console.error("Error updating user:",A),f("Failed to update user: "+(A.message||"Unknown error"))}},H=async()=>{if(confirm(`Are you sure you want to delete user "${C.username}"? This action cannot be undone.`))try{await n().users.delete(C.id),g("User deleted successfully"),P(null),await F()}catch(U){console.error("Error deleting user:",U),f("Failed to delete user: "+(U.message||"Unknown error"))}};return l?d.jsx("div",{className:"text-center text-gray-600 py-8",children:"Loading project management..."}):s?re()?d.jsxs("div",{children:[d.jsxs("nav",{className:"flex items-center text-sm text-gray-500 mb-6",children:[d.jsx(He,{to:"/projects",className:"text-blue-600 hover:text-blue-800",children:"Projects"}),d.jsx("span",{className:"mx-2",children:"/"}),d.jsx(He,{to:`/projects/${e}/documents`,className:"text-blue-600 hover:text-blue-800",children:s.name}),d.jsx("span",{className:"mx-2",children:"/"}),d.jsx("span",{className:"text-gray-900",children:"Project Management"})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Project Management"}),d.jsxs("p",{className:"text-gray-600",children:["Manage users and permissions for ",s.name]})]}),c&&d.jsx("div",{className:"rounded-md bg-red-50 p-4 mb-4",children:d.jsx("p",{className:"text-sm text-red-800",children:c})}),p&&d.jsx("div",{className:"rounded-md bg-green-50 p-4 mb-4",children:d.jsx("p",{className:"text-sm text-green-800",children:p})}),B&&!k&&d.jsx("div",{className:"mb-6",children:d.jsx("button",{onClick:()=>{v(!0),m("")},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"+ Create User"})}),B&&k&&d.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 overflow-y-auto h-full w-full z-50",children:d.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:d.jsxs("div",{className:"mt-3",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Create New User"}),d.jsx("button",{onClick:()=>{v(!1),m("")},className:"text-gray-400 hover:text-gray-600",children:""})]}),h&&d.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:h}),d.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"new-username",className:"block text-sm font-medium text-gray-700",children:"User ID"}),d.jsx("input",{type:"text",id:"new-username",value:b.username,onChange:U=>y(A=>({...A,username:U.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:"e.g., john.doe"}),d.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Unique identifier for this user (cannot be changed later)"})]}),d.jsx("div",{children:d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:b.isAdmin,onChange:U=>y(A=>({...A,isAdmin:U.target.checked})),className:"mr-2"}),d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Admin User"})]})}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700",children:"Password"}),d.jsx("input",{type:"password",id:"new-password",value:b.password,onChange:U=>y(A=>({...A,password:U.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"new-confirm-password",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),d.jsx("input",{type:"password",id:"new-confirm-password",value:b.confirmPassword,onChange:U=>y(A=>({...A,confirmPassword:U.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),d.jsx("div",{className:"flex justify-end",children:d.jsx("button",{type:"submit",disabled:w,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Creating...":"Create User"})})]})]})})}),d.jsxs("div",{className:"bg-white shadow rounded-lg",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"User Permissions"})}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project Permission"}),B&&d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(U=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.username}),d.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",U.id]})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${U.isAdmin?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:U.isAdmin?"Admin":"User"})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[d.jsxs("select",{value:Y(U.id),onChange:A=>de(U.id,A.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:U.id===t.id,children:[d.jsx("option",{value:"none",children:"None"}),d.jsx("option",{value:"reader",children:"Reader"}),d.jsx("option",{value:"writer",children:"Writer"}),d.jsx("option",{value:"maintainer",children:"Maintainer"})]}),U.id===t.id&&d.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Cannot change own permissions"})]}),B&&d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:d.jsx("button",{onClick:()=>ye(U),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"})})]},U.id))})]})})]}),C&&d.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 overflow-y-auto h-full w-full z-50",children:d.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:d.jsxs("div",{className:"mt-3",children:[d.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Edit User: ",C.username]}),d.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"edit-username",className:"block text-sm font-medium text-gray-700",children:"Username"}),d.jsx("input",{type:"text",id:"edit-username",value:E.username,onChange:U=>O(A=>({...A,username:U.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),d.jsx("div",{children:d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:E.isAdmin,onChange:U=>O(A=>({...A,isAdmin:U.target.checked})),className:"mr-2"}),d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Admin User"})]})}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"edit-password",className:"block text-sm font-medium text-gray-700",children:"New Password (leave blank to keep current)"}),d.jsx("input",{type:"password",id:"edit-password",value:E.password,onChange:U=>O(A=>({...A,password:U.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"edit-confirm-password",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),d.jsx("input",{type:"password",id:"edit-confirm-password",value:E.confirmPassword,onChange:U=>O(A=>({...A,confirmPassword:U.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{className:"flex justify-between pt-4",children:[d.jsx("button",{type:"button",onClick:H,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",disabled:C.id===t.id,children:"Delete User"}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsx("button",{type:"button",onClick:()=>P(null),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancel"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Update User"})]})]}),C.id===t.id&&d.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You cannot delete your own account"})]})]})})})]}):d.jsx("div",{className:"rounded-md bg-red-50 p-4",children:d.jsx("p",{className:"text-sm text-red-800",children:"You don't have permission to manage this project"})}):d.jsx("div",{className:"rounded-md bg-red-50 p-4",children:d.jsx("p",{className:"text-sm text-red-800",children:"Project not found"})})},gy=({projectId:e,onClose:t,onSuccess:n})=>{const[r,s]=x.useState(""),[o,i]=x.useState(!1),[a,l]=x.useState(""),{getClient:u}=Xe(),c=async f=>{if(f.preventDefault(),!r.trim()){l("Document name is required");return}i(!0),l("");try{await u().documents.create(e,r),n()}catch(p){l("Failed to create document"),console.error("Error creating document:",p)}finally{i(!1)}};return d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New Document"}),d.jsxs("form",{onSubmit:c,children:[a&&d.jsx("div",{className:"rounded-md bg-red-50 p-4 mb-4",children:d.jsx("p",{className:"text-sm text-red-800",children:a})}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Name"}),d.jsx("input",{id:"documentName",type:"text",value:r,onChange:f=>s(f.target.value),placeholder:"Enter document name",required:!0,autoFocus:!0,disabled:o,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:t,disabled:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 text-sm font-medium text-white bg-gray-900 border border-transparent rounded-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:o?"Creating...":"Create Document"})]})]})]})})};function xy(e){const t=e.split(`
`),n=[];let r=null,s={};for(const o of t){const i=o.trim();if(i===""){r&&r.tokens.length>0&&(r.metadata=s,r.multiWordTokens||(r.multiWordTokens=[]),n.push(r),r=null,s={});continue}if(i.startsWith("#")){if(i.startsWith("# newdoc id")||i.startsWith("# sent_id"))continue;const j=i.match(/^#\s*([^=]+?)\s*=\s*(.+)$/);if(j){const[,C,P]=j;s[C.trim()]=P.trim()}else{const C=i.substring(1).trim();C&&(s[C]=!0)}continue}const a=i.split("	");if(a.length!==10)throw new Error(`Invalid CoNLL-U format: Expected 10 columns, found ${a.length} in line: ${i}`);const[l,u,c,f,p,g,k,v,b,y]=a;if(r||(r={tokens:[],multiWordTokens:[],metadata:{}}),l.includes("."))continue;if(l.includes("-")){const[j,C]=l.split("-"),P=parseInt(j),E=parseInt(C);if(isNaN(P)||isNaN(E)||P<=0||E<=0||P>=E)throw new Error(`Invalid multi-word token range: ${l}`);r.multiWordTokens.push({start:P,end:E,form:u==="_"?"":u,misc:y==="_"?null:y});continue}const h=parseInt(l);if(isNaN(h)||h<=0)throw new Error(`Invalid token ID: ${l}`);const m=g==="_"?[]:g.split("|"),w=k==="_"?0:parseInt(k);if(isNaN(w)||w<0)throw new Error(`Invalid HEAD value: ${k}`);r.tokens.push({id:h,form:u==="_"?"":u,lemma:c==="_"?null:c,upos:f==="_"?null:f,xpos:p==="_"?null:p,feats:m,head:w,deprel:v==="_"?null:v})}r&&r.tokens.length>0&&(r.metadata=s,r.multiWordTokens||(r.multiWordTokens=[]),n.push(r));for(const o of n){const i=o.tokens.map(a=>a.id).sort((a,l)=>a-l);for(let a=0;a<i.length;a++)if(i[a]!==a+1)throw new Error("Invalid token ordering: expected continuous IDs starting from 1")}return{sentences:n}}function wy(e){return e.sentences.map(t=>t.metadata&&t.metadata.text?t.metadata.text:t.tokens.map(n=>n.form).join(" ")).join(`
`)}function vy(e,t){const n=[],r=t.split(`
`);let s=0;for(let o=0;o<e.sentences.length;o++){const i=e.sentences[o],a=r[o]||"",l=[];let u=0;for(let c=0;c<i.tokens.length;c++){const p=i.tokens[c].form,g=a.indexOf(p,u);if(g===-1){const k=i.tokens.slice(0,c).map(y=>y.form).join(" "),v=s+(k?k.length+1:0),b=v+p.length;l.push({begin:v,end:b})}else l.push({begin:s+g,end:s+g+p.length}),u=g+p.length}n.push(l),s+=a.length,o<e.sentences.length-1&&(s+=1)}return n}const Ty=({projectId:e,onClose:t,onSuccess:n})=>{const[r,s]=x.useState(""),[o,i]=x.useState(""),[a,l]=x.useState(!1),[u,c]=x.useState(!1),[f,p]=x.useState(""),[g,k]=x.useState("paste"),v=x.useRef(null),{getClient:b}=Xe(),y=m=>{const w=m.target.files[0];if(!w)return;const j=new FileReader;j.onload=C=>{s(C.target.result);const P=w.name.replace(/\.conllu$/i,"");o||i(P)},j.onerror=()=>{p("Failed to read file")},j.readAsText(w)},h=async()=>{var j,C,P;if(!o.trim()){p("Document name is required");return}if(!r.trim()){p("No content to import");return}l(!0),p("");const m=b();let w=null;try{const E=xy(r);if(E.sentences.length===0)throw new Error("No valid sentences found in CoNLL-U data");w=(await m.documents.create(e,o)).id;const F=(j=(await m.documents.get(w,!0)).textLayers)==null?void 0:j[0],re=(C=F==null?void 0:F.tokenLayers)==null?void 0:C[0];if(!F||!re)throw new Error("Failed to find text or token layers in created document");const Y=re.spanLayers||[],de=Y.find(N=>N.name==="Lemma"),ie=Y.find(N=>N.name==="UPOS"),ye=Y.find(N=>N.name==="XPOS"),pe=Y.find(N=>N.name==="Features"),H=Y.find(N=>N.name==="Sentence"),U=Y.find(N=>N.name==="Multi-word Tokens"),A=wy(E),L=(await m.texts.create(F.id,w,A)).id,I=vy(E,A),q=[];let Z=0;for(let N=0;N<E.sentences.length;N++){const T=E.sentences[N],S=I[N];for(let $=0;$<T.tokens.length;$++){const _=S[$];q.push({tokenLayerId:re.id,textId:L,begin:_.begin,end:_.end}),Z++}}const ee=(await m.tokens.bulkCreate(q)).ids||[],z=[];let te=0;for(let N=0;N<E.sentences.length;N++){const T=E.sentences[N],S=[];for(let $=0;$<T.tokens.length;$++)S.push(ee[te]),te++;z.push(S)}m.beginBatch();const K=[];if(H)for(let N=0;N<z.length;N++){const T=z[N][0],S=E.sentences[N].metadata;m.spans.create(H.id,[T],null,Object.keys(S).length>0?S:void 0),K.push({type:"sentence",sentenceIndex:N})}if(U)for(let N=0;N<E.sentences.length;N++){const T=E.sentences[N],S=z[N];for(const $ of T.multiWordTokens||[]){const _=$.start-1,W=$.end-1;if(_>=0&&W<S.length&&_<=W){const Q=[];for(let D=_;D<=W;D++)Q.push(S[D]);m.spans.create(U.id,Q,null,$.misc?{misc:$.misc}:void 0),K.push({type:"mwt",sentenceIndex:N,start:$.start,end:$.end})}}}if(de)for(let N=0;N<E.sentences.length;N++){const T=E.sentences[N],S=z[N];for(let $=0;$<T.tokens.length;$++){const _=T.tokens[$];_.lemma&&(m.spans.create(de.id,[S[$]],_.lemma),K.push({type:"lemma",sentenceIndex:N,tokenIndex:$,token:_}))}}if(ie)for(let N=0;N<E.sentences.length;N++){const T=E.sentences[N],S=z[N];for(let $=0;$<T.tokens.length;$++){const _=T.tokens[$];_.upos&&(m.spans.create(ie.id,[S[$]],_.upos),K.push({type:"upos",sentenceIndex:N,tokenIndex:$}))}}if(ye)for(let N=0;N<E.sentences.length;N++){const T=E.sentences[N],S=z[N];for(let $=0;$<T.tokens.length;$++){const _=T.tokens[$];_.xpos&&(m.spans.create(ye.id,[S[$]],_.xpos),K.push({type:"xpos",sentenceIndex:N,tokenIndex:$}))}}if(pe)for(let N=0;N<E.sentences.length;N++){const T=E.sentences[N],S=z[N];for(let $=0;$<T.tokens.length;$++){const _=T.tokens[$];for(const W of _.feats)m.spans.create(pe.id,[S[$]],W),K.push({type:"feature",sentenceIndex:N,tokenIndex:$})}}const G=await m.submitBatch();console.log("Span batch results:",G);for(let N=0;N<G.length;N++){const T=G[N];if(!T||!T.body||!T.body.id)throw new Error(`Span creation failed for operation ${N}: ${JSON.stringify(T)}`)}const M=[];for(let N=0;N<E.sentences.length;N++){M.push([]);for(let T=0;T<E.sentences[N].tokens.length;T++)M[N].push(null)}for(let N=0;N<K.length;N++){const T=K[N],S=G[N];T.type==="lemma"&&(M[T.sentenceIndex][T.tokenIndex]=S.body.id)}if(de&&M.length>0){const N=(P=de.relationLayers)==null?void 0:P[0];if(N){console.log("Creating dependency relations with layer:",N.id),console.log("Lemma span IDs:",M),m.beginBatch();const T=[];for(let S=0;S<E.sentences.length;S++){const $=E.sentences[S],_=M[S];for(let W=0;W<$.tokens.length;W++){const Q=$.tokens[W],D=_[W];if(Q.deprel&&D){if(Q.head===0)console.log(`Creating root relation: ${D} -> ${D} (${Q.deprel})`),m.relations.create(N.id,D,D,Q.deprel),T.push({source:D,target:D,label:Q.deprel});else if(Q.head>0){const ne=Q.head-1;if(ne<_.length){const le=_[ne];le&&(console.log(`Creating relation: ${le} -> ${D} (${Q.deprel})`),m.relations.create(N.id,le,D,Q.deprel),T.push({source:le,target:D,label:Q.deprel}))}}}}}if(T.length>0){const S=await m.submitBatch();console.log(`Created ${T.length} dependency relations`),console.log("Relation batch results:",S);for(let $=0;$<S.length;$++){const _=S[$];if(!_||!_.body||!_.body.id)throw new Error(`Relation creation failed for operation ${$}: ${JSON.stringify(_)}`)}}else console.log("No dependency relations to create")}else console.warn("No relation layer found for lemma layer")}c(!0),setTimeout(()=>{n()},2e3)}catch(E){if(console.error("Import failed:",E),p(`Import failed: ${E.message||"Unknown error"}`),w)try{await m.documents.delete(w)}catch(O){console.error("Failed to clean up document:",O)}}finally{l(!1)}};return d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[d.jsx("div",{className:"p-6 border-b border-gray-200",children:d.jsx("h3",{className:"text-lg font-medium text-gray-900",children:u?"Import Successful!":"Import CoNLL-U Document"})}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[u&&d.jsx("div",{className:"rounded-md bg-green-50 p-4 mb-4",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),d.jsx("p",{className:"text-sm text-green-800",children:"Document imported successfully! Redirecting..."})]})}),f&&d.jsx("div",{className:"rounded-md bg-red-50 p-4 mb-4",children:d.jsx("p",{className:"text-sm text-red-800",children:f})}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Name"}),d.jsx("input",{id:"documentName",type:"text",value:o,onChange:m=>i(m.target.value),placeholder:"Enter document name",required:!0,disabled:a,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex gap-4 mb-4",children:[d.jsx("button",{type:"button",onClick:()=>k("paste"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${g==="paste"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,disabled:a,children:"Paste Text"}),d.jsx("button",{type:"button",onClick:()=>k("upload"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${g==="upload"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,disabled:a,children:"Upload File"})]}),g==="paste"?d.jsxs("div",{children:[d.jsx("label",{htmlFor:"conlluText",className:"block text-sm font-medium text-gray-700 mb-1",children:"CoNLL-U Text"}),d.jsx("textarea",{id:"conlluText",value:r,onChange:m=>s(m.target.value),placeholder:"Paste your CoNLL-U formatted text here...",rows:15,disabled:a,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm font-mono disabled:bg-gray-100 disabled:cursor-not-allowed"})]}):d.jsxs("div",{children:[d.jsx("input",{ref:v,type:"file",accept:".conllu,.txt",onChange:y,className:"hidden",disabled:a}),d.jsx("button",{type:"button",onClick:()=>{var m;return(m=v.current)==null?void 0:m.click()},disabled:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed transition-colors",children:"Choose File..."}),r&&d.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-md",children:[d.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"File loaded. Preview:"}),d.jsxs("pre",{className:"text-xs font-mono text-gray-700 overflow-x-auto max-h-40 overflow-y-auto",children:[r.substring(0,500),r.length>500&&"..."]})]})]})]})]}),d.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:t,disabled:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),d.jsx("button",{type:"button",onClick:h,disabled:a||!r.trim()||!o.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:a?d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Importing..."]}):"Import"})]})})]})})},ky=()=>{const{projectId:e}=Xr(),[t,n]=x.useState(null),[r,s]=x.useState([]),[o,i]=x.useState(!0),[a,l]=x.useState(""),[u,c]=x.useState(!1),[f,p]=x.useState(!1),{user:g,getClient:k}=Xe(),v=async()=>{try{i(!0);const w=k();if(!w)throw new Error("Not authenticated");const j=await w.projects.get(e,!0);n(j),s(j.documents||[]),l("")}catch(w){if(w.message==="Not authenticated"||w.status===401){window.location.href="/login";return}l("Failed to load project and documents"),console.error("Error fetching project:",w)}finally{i(!1)}};x.useEffect(()=>{v()},[e]);const b=async(w,j)=>{if(confirm(`Are you sure you want to delete document "${j}"? This action cannot be undone.`))try{await k().documents.delete(w),await v()}catch(C){l("Failed to delete document"),console.error("Error deleting document:",C)}},y=()=>{c(!1),v()},h=()=>{p(!1),v()},m=()=>{var w;return!g||!t?!1:g.isAdmin||((w=t.maintainers)==null?void 0:w.includes(g.id))};return o?d.jsx("div",{className:"text-center text-gray-600 py-8",children:"Loading documents..."}):t?d.jsxs("div",{children:[d.jsxs("nav",{className:"flex items-center text-sm text-gray-500 mb-6",children:[d.jsx(He,{to:"/projects",className:"text-blue-600 hover:text-blue-800",children:"Projects"}),d.jsx("span",{className:"mx-2",children:"/"}),d.jsx("span",{className:"text-gray-900",children:t.name})]}),d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Documents in ",t.name]}),d.jsxs("div",{className:"flex gap-3",children:[m()&&d.jsx(He,{to:`/projects/${e}/management`,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors text-sm font-medium",children:"Project Management"}),d.jsx("button",{className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors text-sm font-medium",onClick:()=>p(!0),children:"Import"}),d.jsx("button",{className:"px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-colors text-sm font-medium",onClick:()=>c(!0),children:"+ New Document"})]})]}),a&&d.jsx("div",{className:"rounded-md bg-red-50 p-4 mb-4",children:d.jsx("p",{className:"text-sm text-red-800",children:a})}),u&&d.jsx(gy,{projectId:e,onClose:()=>c(!1),onSuccess:y}),f&&d.jsx(Ty,{projectId:e,onClose:()=>p(!1),onSuccess:h}),r.length===0?d.jsx("div",{className:"text-center py-12",children:d.jsx("p",{className:"text-gray-500",children:"No documents yet. Create your first document to start annotating!"})}):d.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:d.jsx("ul",{className:"divide-y divide-gray-200",children:r.sort((w,j)=>w.name<j.name?-1:w.name>j.name?1:0).map(w=>d.jsx("li",{className:"hover:bg-gray-50 transition-colors",children:d.jsx("div",{className:"px-4 py-4 sm:px-6",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-lg font-medium text-gray-900",children:w.name}),d.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["ID: ",w.id]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(He,{to:`/projects/${e}/documents/${w.id}/edit`,className:"px-3 py-1.5 text-sm text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",children:"Edit Text"}),d.jsx(He,{to:`/projects/${e}/documents/${w.id}/annotate`,className:"px-3 py-1.5 text-sm text-green-600 hover:text-green-800 hover:bg-green-50 rounded-md transition-colors",children:"Annotate"}),d.jsx("button",{className:"px-3 py-1.5 text-sm text-red-600 hover:text-red-800 hover:bg-red-50 rounded-md transition-colors",onClick:()=>b(w.id,w.name),children:"Delete"})]})]})})},w.id))})})]}):d.jsx("div",{className:"rounded-md bg-red-50 p-4",children:d.jsx("p",{className:"text-sm text-red-800",children:"Project not found"})})},by=({text:e,originalText:t,tokens:n,sentenceSpans:r=[],mwtSpans:s=[],onTokenUpdate:o,onTokenDelete:i,onTokenCreate:a,onSentenceToggle:l,onMwtCreate:u,onMwtDelete:c})=>{const[f,p]=x.useState(null),[g,k]=x.useState(null),[v,b]=x.useState(""),[y,h]=x.useState(""),m=x.useRef(null),w=x.useRef(null),j=x.useRef(null),[C,P]=x.useState(!1),[E,O]=x.useState(null),[B,F]=x.useState(new Set),[re,Y]=x.useState(!1),de=t&&e!==t,ie=async M=>{if(!f||g||de)return;const{key:N}=M;let T=f.begin,S=f.end;switch(N){case"s":T=f.begin-1;break;case"S":T=f.begin+1;break;case"d":S=f.end+1;break;case"D":S=f.end-1;break;default:return}if(!(T<0||S>e.length||T>S)&&(T!==f.begin||S!==f.end)){M.preventDefault();try{await o(f.id,T,S),p({...f,begin:T,end:S})}catch($){console.error("Token update failed:",$)}}};x.useEffect(()=>(document.addEventListener("keydown",ie),()=>{document.removeEventListener("keydown",ie)}),[f,g,de,e,o]);const ye=M=>{de||(m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{p(M)},400))},pe=()=>{m.current&&clearTimeout(m.current),w.current=setTimeout(()=>{p(null)},300)},H=()=>{w.current&&clearTimeout(w.current)},U=()=>{p(null)},A=M=>{k(M),b(M.begin.toString()),h(M.end.toString()),p(null),m.current&&clearTimeout(m.current),w.current&&clearTimeout(w.current)},R=async M=>{try{await i(M.id),p(null),m.current&&clearTimeout(m.current),w.current&&clearTimeout(w.current)}catch(N){console.error("Token deletion failed:",N)}},L=()=>{k(null),b(""),h(""),p(null),m.current&&clearTimeout(m.current),w.current&&clearTimeout(w.current)},I=async()=>{const M=parseInt(v),N=parseInt(y);if(!(isNaN(M)||isNaN(N))&&!(M<0)&&!(N>e.length)&&!(N-M<0))try{await o(g.id,M,N),k(null),b(""),h(""),p(null),m.current&&clearTimeout(m.current),w.current&&clearTimeout(w.current)}catch(T){console.error("Token update failed:",T),L()}},q=(M,N)=>{de||N.button===0&&(console.log("Starting MWT drag on token:",M.id),P(!0),O(M),F(new Set([M.id])),Y(!0),N.preventDefault(),N.stopPropagation(),document.onselectstart=()=>!1,document.ondragstart=()=>!1)},Z=M=>{if(!C||!E)return;const N=[...n].sort((D,ne)=>D.begin-ne.begin),T=N.findIndex(D=>D.id===E.id),S=N.findIndex(D=>D.id===M.id);if(T===-1||S===-1)return;const $=Math.min(T,S),_=Math.max(T,S),W=N.slice($,_+1);let Q=!0;for(let D=1;D<W.length;D++){const ne=W[D-1],le=W[D];if(N.some(se=>W.includes(se)?!1:se.begin>=ne.end&&se.begin<le.begin)){Q=!1;break}}if(Q){const D=new Set(W.map(ne=>ne.id));F(D)}},J=()=>{if(!C)return;P(!1),document.onselectstart=null,document.ondragstart=null;const M=window.getSelection();if(M&&M.removeAllRanges(),B.size>=2){const S=[...n].sort(($,_)=>$.begin-_.begin).filter($=>B.has($.id)).map($=>$.id);u&&u(S,null)}O(null),F(new Set),setTimeout(()=>{Y(!1)},100)};x.useEffect(()=>(document.addEventListener("mouseup",J),()=>{document.removeEventListener("mouseup",J),document.onselectstart=null,document.ondragstart=null}),[C,B,n,u]);const ee=()=>{if(C||re)return;const M=window.getSelection();if(!M||M.rangeCount===0)return;const N=M.getRangeAt(0);if(!N||N.collapsed)return;const T=j.current;if(!T||!T.contains(N.commonAncestorContainer))return;const S=N.toString();if(!S||S.length===0)return;console.log("Selected text:",JSON.stringify(S));const $=[];let _=0;const W=document.createTreeWalker(T,NodeFilter.SHOW_TEXT,{acceptNode:se=>{const ae=se.parentElement;return ae&&ae.classList.contains("absolute")?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},!1);let Q;for(;Q=W.nextNode();){const se=Q.textContent;for(let ae=0;ae<se.length;ae++)$.push({node:Q,nodeOffset:ae,textPosition:_}),_++}console.log("Text position map length:",$.length,"Original text length:",e.length);let D=-1,ne=-1;for(let se=0;se<$.length;se++){const ae=$[se];if(ae.node===N.startContainer&&ae.nodeOffset===N.startOffset&&(D=ae.textPosition),ae.node===N.endContainer&&ae.nodeOffset===N.endOffset){ne=ae.textPosition;break}}if(ne===-1&&N.endContainer===T&&(console.log("Selection ends at container, using text length"),ne=e.length),ne===-1&&N.endContainer.nodeType===Node.TEXT_NODE){const se=N.endContainer,ae=N.endOffset;for(let ue=0;ue<$.length;ue++){const fe=$[ue];if(fe.node===se&&fe.nodeOffset===ae-1){ne=fe.textPosition+1;break}}}if(console.log("Calculated positions:",{selectionStart:D,selectionEnd:ne}),D===-1||ne===-1||D>=ne){console.log("Invalid selection positions");return}const le=e.slice(D,ne);if(console.log("Calculated text:",JSON.stringify(le)),le!==S){console.log("Text mismatch, falling back to first occurrence");const se=e.indexOf(S);if(se===-1)return;D=se,ne=se+S.length}if(n.some(se=>D<se.end&&ne>se.begin)){alert("Cannot create token: selection overlaps with existing tokens");return}console.log("Final selection positions:",{selectionStart:D,selectionEnd:ne,selectedText:e.slice(D,ne)}),a&&a(D,ne),M.removeAllRanges()};if(!e)return d.jsx("div",{className:"text-center py-8 text-gray-500",children:d.jsx("p",{children:"No text to visualize"})});if(n.length===0)return d.jsxs("div",{children:[d.jsx("div",{ref:j,className:"p-4 bg-white rounded border border-gray-200 font-mono text-sm whitespace-pre-wrap select-text",onMouseUp:ee,children:e}),d.jsx("p",{className:"mt-4 text-sm text-gray-500 text-center",children:'No tokens yet. Click "Whitespace Tokenize" to create tokens, or select text to create individual tokens.'})]});const K=[...((M,N,T)=>{if(!N||N===T)return M;const $=((W,Q)=>{let D=0;for(;D<Math.min(W.length,Q.length)&&W[D]===Q[D];)D++;return D})(N,T),_=T.length-N.length;return M.map(W=>{const Q=N.slice(W.begin,W.end);if(W.end<=$)return W;if(W.begin>=$){const oe=W.begin+_,se=W.end+_;if(oe>=0&&se<=T.length&&T.slice(oe,se)===Q)return{...W,begin:oe,end:se,adjusted:!0}}let D=null,ne=0,le=0;for(;;){const oe=T.indexOf(Q,le);if(oe===-1)break;const ae=1e3-Math.abs(oe-W.begin);ae>ne&&(ne=ae,D={begin:oe,end:oe+Q.length}),le=oe+1}if(D)return{...W,begin:D.begin,end:D.end,adjusted:!0};for(let oe=Math.max(2,Math.floor(Q.length*.6));oe>=2;oe--){if(oe<Q.length){const se=Q.slice(-oe),ae=T.indexOf(se);if(ae!==-1)return{...W,begin:ae,end:ae+se.length,adjusted:!0}}if(oe<Q.length){const se=Q.slice(0,oe),ae=T.indexOf(se);if(ae!==-1)return{...W,begin:ae,end:ae+se.length,adjusted:!0}}}return{...W,invalid:!0,originalText:Q}})})(n,t,e)].sort((M,N)=>M.invalid&&!N.invalid?1:!M.invalid&&N.invalid?-1:M.begin-N.begin),G=()=>{const M=new Set(r.map(_=>_.tokens&&_.tokens.length>0?_.tokens[0]:_.begin).filter(_=>_!=null)),N=new Map;s.forEach(_=>{_.tokens&&_.tokens.length>0&&_.tokens.forEach(W=>{N.set(W,{surfaceForm:_.value,spanId:_.id,allTokens:_.tokens})})});const T=[];let S=[],$=0;return K.forEach(_=>{_.invalid||(M.has(_.id)&&S.length>0&&(T.push({tokens:S,number:$}),S=[],$++),S.push(_))}),S.length>0&&T.push({tokens:S,number:$}),T.length===0&&K.filter(_=>!_.invalid).length>0&&T.push({tokens:K.filter(_=>!_.invalid),number:0}),T.map((_,W)=>{const Q=[];let D=W===0?0:T[W-1].tokens[T[W-1].tokens.length-1].end;const ne=[];let le=null;if(_.tokens.forEach((oe,se)=>{const ae=N.get(oe.id);ae?!le||le.type!=="mwt"||le.spanId!==ae.spanId?(le={type:"mwt",spanId:ae.spanId,tokens:[oe],startIndex:se},ne.push(le)):le.tokens.push(oe):(ne.push({type:"individual",tokens:[oe],startIndex:se}),le=null)}),ne.forEach((oe,se)=>{const ae=oe.tokens[0];if(ae.begin>D){const ue=e.slice(D,ae.begin);Q.push(d.jsx("span",{className:"text-gray-400",children:ue},`between-${W}-${se}`))}if(oe.type==="mwt"){const ue=oe.tokens.map((fe,_t)=>{const En=e.slice(fe.begin,fe.end),we=fe.begin===fe.end?"":En,ot=M.has(fe.id),mt=_t===0,at=_t===oe.tokens.length-1;return d.jsxs("span",{className:`relative inline-block px-1 py-0.5 border bg-orange-100 border-orange-400 hover:bg-orange-200 cursor-pointer transition-colors whitespace-pre ${ot?"border-green-500 border-2":""} ${B.has(fe.id)?"bg-yellow-200 border-yellow-400":""} ${mt?"rounded-l -mr-px":at?"rounded-r -ml-px":"-mx-px"}`,onMouseEnter:$e=>{ye(fe),Z(fe)},onMouseLeave:pe,onMouseDown:$e=>q(fe,$e),onClick:async()=>{if(!(de||C)&&l)try{await l(fe.id,!ot),p(null),m.current&&clearTimeout(m.current),w.current&&clearTimeout(w.current)}catch($e){console.error("Failed to toggle sentence marker:",$e)}},children:[we,f&&f.id===fe.id&&!g&&d.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-1 z-10 bg-gray-800 text-white text-sm px-3 py-2 rounded shadow-lg whitespace-nowrap min-w-48",onMouseEnter:H,onMouseLeave:U,children:[d.jsxs("div",{className:"mb-2",children:[d.jsxs("div",{className:"font-semibold",children:["Token ",fe.id]}),d.jsxs("div",{className:"text-gray-300",children:["Range: [",fe.begin,"-",fe.end,"]"]}),d.jsxs("div",{className:"text-gray-300",children:['Text: "',En,'"']}),d.jsx("div",{className:"text-orange-300 mt-1",children:"Part of MWT"})]}),l&&d.jsx("div",{className:"mb-2 pb-2 border-b border-gray-600",children:d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:ot,onChange:async $e=>{try{await l(fe.id,$e.target.checked),p(null),m.current&&clearTimeout(m.current),w.current&&clearTimeout(w.current)}catch(Qd){console.error("Failed to toggle sentence marker:",Qd)}},className:"rounded border-gray-400 text-blue-600 focus:ring-blue-500"}),d.jsx("span",{className:"text-gray-300 text-xs",children:"Start of sentence"})]})}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>A(fe),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-xs px-2 py-1 rounded transition-colors",children:"Edit Range"}),d.jsx("button",{onClick:()=>R(fe),className:"flex-1 bg-red-600 hover:bg-red-700 text-white text-xs px-2 py-1 rounded transition-colors",children:"Delete"})]})]}),g&&g.id===fe.id&&d.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-1 z-10 bg-white border border-gray-300 shadow-lg rounded-lg p-4 min-w-64",children:[d.jsxs("div",{className:"mb-3",children:[d.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:"Edit Token Range"}),d.jsxs("div",{className:"text-sm text-gray-600",children:['Token: "',e.slice(g.begin,g.end),'"']})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Begin"}),d.jsx("input",{type:"number",value:v,onChange:$e=>b($e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0",max:e.length})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End"}),d.jsx("input",{type:"number",value:y,onChange:$e=>h($e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",min:"1",max:e.length})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:I,className:"flex-1 bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1 rounded transition-colors",children:"Save"}),d.jsx("button",{onClick:L,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white text-xs px-3 py-1 rounded transition-colors",children:"Cancel"})]})]})]},`token-${fe.id}`)});Q.push(d.jsxs("span",{className:"relative inline-block ml-0.5 mr-0.5",children:[ue,d.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-orange-500 hover:bg-orange-600 transition-colors rounded",style:{bottom:"-2px",zIndex:20,height:"4px",cursor:`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='3,6 5,6 21,6'></polyline><path d='m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2'></path><line x1='10' y1='11' x2='10' y2='17'></line><line x1='14' y1='11' x2='14' y2='17'></line></svg>") 12 12, pointer`},onClick:async fe=>{if(fe.preventDefault(),fe.stopPropagation(),c)try{await c(oe.spanId)}catch(_t){console.error("Failed to delete MWT:",_t)}},title:"Click to delete MWT"})]},`mwt-group-${W}-${se}`))}else{const ue=oe.tokens[0],fe=e.slice(ue.begin,ue.end),En=ue.begin===ue.end?"":fe,he=M.has(ue.id);Q.push(d.jsxs("span",{className:`relative inline-block px-1 py-0.5 border bg-blue-100 border-blue-300 hover:bg-blue-200 rounded mx-0.5 cursor-pointer transition-colors whitespace-pre ${he?"border-green-500 border-2":""} ${B.has(ue.id)?"bg-yellow-200 border-yellow-400":""}`,onMouseEnter:we=>{ye(ue),Z(ue)},onMouseLeave:pe,onMouseDown:we=>q(ue,we),onClick:async()=>{if(!(de||C)&&l)try{await l(ue.id,!he),p(null),m.current&&clearTimeout(m.current),w.current&&clearTimeout(w.current)}catch(we){console.error("Failed to toggle sentence marker:",we)}},children:[En,f&&f.id===ue.id&&!g&&d.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-1 z-10 bg-gray-800 text-white text-sm px-3 py-2 rounded shadow-lg whitespace-nowrap min-w-48",onMouseEnter:H,onMouseLeave:U,children:[d.jsxs("div",{className:"mb-2",children:[d.jsxs("div",{className:"font-semibold",children:["Token ",ue.id]}),d.jsxs("div",{className:"text-gray-300",children:["Range: [",ue.begin,"-",ue.end,"]"]}),d.jsxs("div",{className:"text-gray-300",children:['Text: "',fe,'"']})]}),l&&d.jsx("div",{className:"mb-2 pb-2 border-b border-gray-600",children:d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:he,onChange:async we=>{try{await l(ue.id,we.target.checked),p(null),m.current&&clearTimeout(m.current),w.current&&clearTimeout(w.current)}catch(ot){console.error("Failed to toggle sentence marker:",ot)}},className:"rounded border-gray-400 text-blue-600 focus:ring-blue-500"}),d.jsx("span",{className:"text-gray-300 text-xs",children:"Start of sentence"})]})}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>A(ue),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-xs px-2 py-1 rounded transition-colors",children:"Edit Range"}),d.jsx("button",{onClick:()=>R(ue),className:"flex-1 bg-red-600 hover:bg-red-700 text-white text-xs px-2 py-1 rounded transition-colors",children:"Delete"})]})]}),g&&g.id===ue.id&&d.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-1 z-10 bg-white border border-gray-300 shadow-lg rounded-lg p-4 min-w-64",children:[d.jsxs("div",{className:"mb-3",children:[d.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:"Edit Token Range"}),d.jsxs("div",{className:"text-sm text-gray-600",children:['Token: "',e.slice(g.begin,g.end),'"']})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Begin"}),d.jsx("input",{type:"number",value:v,onChange:we=>b(we.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0",max:e.length})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End"}),d.jsx("input",{type:"number",value:y,onChange:we=>h(we.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",min:"1",max:e.length})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:I,className:"flex-1 bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1 rounded transition-colors",children:"Save"}),d.jsx("button",{onClick:L,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white text-xs px-3 py-1 rounded transition-colors",children:"Cancel"})]})]})]},`token-${ue.id}`))}D=oe.tokens[oe.tokens.length-1].end}),W===T.length-1&&D<e.length){const oe=e.slice(D);Q.push(d.jsx("span",{className:"text-gray-400",children:oe},`remaining-${W}`))}return d.jsx("div",{className:"mb-2 relative",children:Q},`sentence-${W}`)})};return d.jsx("div",{children:d.jsx("div",{ref:j,className:"p-4 bg-white rounded border border-gray-200 font-mono text-sm leading-relaxed select-text",onMouseUp:M=>{!C&&!re&&ee()},children:G()})})},oo=({projectId:e,documentId:t,project:n,document:r})=>{const o=Pt().pathname,i=o.includes("/edit"),a=o.includes("/annotate"),l=o.includes("/export");return d.jsxs("div",{children:[d.jsxs("nav",{className:"flex items-center text-sm text-gray-500 mb-4",children:[d.jsx(He,{to:"/projects",className:"text-blue-600 hover:text-blue-800",children:"Projects"}),d.jsx("span",{className:"mx-2",children:"/"}),d.jsx(He,{to:`/projects/${e}/documents`,className:"text-blue-600 hover:text-blue-800",children:(n==null?void 0:n.name)||"Loading..."}),d.jsx("span",{className:"mx-2",children:"/"}),d.jsx("span",{className:"text-gray-700",children:(r==null?void 0:r.name)||"Loading..."})]}),d.jsx("div",{className:"mb-6",children:d.jsx("div",{className:"border-b border-gray-200",children:d.jsxs("nav",{className:"-mb-px flex space-x-8",children:[d.jsx(He,{to:`/projects/${e}/documents/${t}/edit`,className:`whitespace-nowrap py-2 px-1 text-sm font-medium border-b-2 transition-colors ${i?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Text Editor"}),d.jsx(He,{to:`/projects/${e}/documents/${t}/annotate`,className:`whitespace-nowrap py-2 px-1 text-sm font-medium border-b-2 transition-colors ${a?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Annotate"}),d.jsx(He,{to:`/projects/${e}/documents/${t}/export`,className:`whitespace-nowrap py-2 px-1 text-sm font-medium border-b-2 transition-colors ${l?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Export"})]})})})]})},jy=()=>{const{projectId:e,documentId:t}=Xr(),[n,r]=x.useState(null),[s,o]=x.useState(null),[i,a]=x.useState(""),[l,u]=x.useState(""),[c,f]=x.useState(!0),[p,g]=x.useState(!1),[k,v]=x.useState(""),[b,y]=x.useState(null),{getClient:h}=Xe(),m=async()=>{var R,L;try{f(!0);const I=h();if(!I){window.location.href="/login";return}const[q,Z]=await Promise.all([I.projects.get(e),I.documents.get(t,!0)]);o(q),r(Z);const J=(R=Z.textLayers)==null?void 0:R[0],ee=J==null?void 0:J.text;if(ee!=null&&ee.body){a(ee.body);const z=(L=J==null?void 0:J.tokenLayers)==null?void 0:L[0];((z==null?void 0:z.tokens)||[]).length>0&&!l&&u(ee.body)}v("")}catch(I){if(I.status===401){window.location.href="/login";return}v("Failed to load document: "+(I.message||"Unknown error")),console.error("Error fetching data:",I)}finally{f(!1)}},w=async()=>{var R,L;try{const I=h();if(!I){window.location.href="/login";return}const[q,Z]=await Promise.all([I.projects.get(e),I.documents.get(t,!0)]);o(q),r(Z);const J=(R=Z.textLayers)==null?void 0:R[0],ee=J==null?void 0:J.text;if(ee!=null&&ee.body){a(ee.body);const z=(L=J==null?void 0:J.tokenLayers)==null?void 0:L[0];((z==null?void 0:z.tokens)||[]).length>0&&!l&&u(ee.body)}v("")}catch(I){if(I.status===401){window.location.href="/login";return}v("Failed to load document: "+(I.message||"Unknown error")),console.error("Error fetching data:",I)}};x.useEffect(()=>{m()},[e,t]);const j=()=>{var T,S,$;if(!n)return{};const R=(T=n.textLayers)==null?void 0:T[0],L=R==null?void 0:R.text,I=(S=R==null?void 0:R.tokenLayers)==null?void 0:S[0],q=(I==null?void 0:I.tokens)||[],Z=(I==null?void 0:I.spanLayers)||[],J=Z.find(_=>_.name==="Sentence"),ee=(J==null?void 0:J.spans)||[],z=Z.find(_=>_.name==="Lemma"),te=(z==null?void 0:z.spans)||[],K=($=z==null?void 0:z.relationLayers)==null?void 0:$[0],G=(K==null?void 0:K.relations)||[],M=Z.find(_=>_.name==="Multi-word Tokens"),N=(M==null?void 0:M.spans)||[];return{textLayer:R,text:L,tokenLayer:I,tokens:q,sentenceLayer:J,sentenceSpans:ee,lemmaLayer:z,lemmaSpans:te,relationLayer:K,relations:G,mwtLayer:M,mwtSpans:N}},C=async()=>{if(!(!i.trim()||p))try{g(!0);const R=h(),{textLayer:L,text:I}=j();I!=null&&I.id?await R.texts.update(I.id,i):L!=null&&L.id&&await R.texts.create(L.id,t,i),y(new Date),v(""),u(i),await w()}catch(R){v("Failed to save text: "+(R.message||"Unknown error")),console.error("Error saving text:",R)}finally{g(!1)}},P=R=>{a(R.target.value),b&&y(null)},E=async()=>{const{text:R,tokenLayer:L,tokens:I}=j();if(!i.trim()){v("Please enter some text before tokenizing");return}if(!(R!=null&&R.id)){v("Please save the text first before tokenizing");return}try{g(!0),v("");const q=h(),Z=(G,M,N,T)=>G<T&&N<M,J=[];let ee=0;const z=i.split(/(\s+)/);for(const G of z)G.trim()&&J.push({tokenLayerId:L.id,textId:R.id,begin:ee,end:ee+G.length}),ee+=G.length;const te=J.filter(G=>!I.some(M=>Z(G.begin,G.end,M.begin,M.end))),K=J.length-te.length;if(te.length>0){const G=await q.tokens.bulkCreate(te),{lemmaLayer:M}=j();if(M&&(G!=null&&G.ids)){console.log(`Creating lemma spans for ${G.ids.length} new tokens`);const N=G.ids.map((T,S)=>{const $=te[S];return{spanLayerId:M.id,tokens:[T],value:i.substring($.begin,$.end)}});try{await q.spans.bulkCreate(N),console.log(`Successfully created ${N.length} lemma spans`)}catch(T){console.error("Failed to create lemma spans:",T)}}}u(i),await w(),K>0?v(`Created ${te.length} tokens. Skipped ${K} tokens that would overlap with existing tokens.`):te.length===0&&v("No new tokens created - all proposed tokens would overlap with existing tokens.")}catch(q){v("Failed to create tokens: "+(q.message||"Unknown error")),console.error("Error tokenizing:",q)}finally{g(!1)}},O=async()=>{const{tokens:R}=j();if(confirm("Are you sure you want to clear all tokens? This action cannot be undone."))try{g(!0);const L=h();if(R.length>0){const I=R.map(q=>q.id);await L.tokens.bulkDelete(I)}u(""),await w()}catch(L){v("Failed to clear tokens: "+(L.message||"Unknown error")),console.error("Error clearing tokens:",L)}finally{g(!1)}},B=async(R,L,I)=>{try{const q=h();console.log("Updating token:",R,"from",L,"to",I),await q.tokens.update(R,L,I),console.log("Token update successful"),r(Z=>{var K,G;const J=JSON.parse(JSON.stringify(Z)),ee=(K=J.textLayers)==null?void 0:K[0],z=(G=ee==null?void 0:ee.tokenLayers)==null?void 0:G[0],te=z==null?void 0:z.tokens;if(te){const M=te.findIndex(N=>N.id===R);M!==-1&&(te[M]={...te[M],begin:L,end:I})}return J})}catch(q){throw console.error("Token update failed, refreshing:",q),await m(),q}},F=async R=>{var L,I;try{const q=h();console.log("Deleting token:",R);const Z=(L=n.textLayers)==null?void 0:L[0],J=(I=Z==null?void 0:Z.tokenLayers)==null?void 0:I[0],z=((J==null?void 0:J.spanLayers)||[]).find(te=>te.name==="Multi-word Tokens");if(z!=null&&z.spans){const te=[];for(const K of z.spans){const G=K.tokens||[];G.includes(R)&&G.filter(N=>N!==R).length<=1&&te.push(K)}for(const K of te)try{console.log("Deleting MWT span due to token deletion:",K.id),await q.spans.delete(K.id)}catch(G){console.warn("Failed to delete MWT span:",K.id,G)}}await q.tokens.delete(R),console.log("Token deletion successful"),r(te=>{var T,S;const K=JSON.parse(JSON.stringify(te)),G=(T=K.textLayers)==null?void 0:T[0],M=(S=G==null?void 0:G.tokenLayers)==null?void 0:S[0],N=M==null?void 0:M.tokens;if(N){const $=N.findIndex(_=>_.id===R);$!==-1&&N.splice($,1)}return K})}catch(q){throw console.error("Token deletion failed, refreshing:",q),await m(),q}},re=async(R,L)=>{try{const I=h(),{text:q,tokenLayer:Z}=j();if(!(q!=null&&q.id)||!(Z!=null&&Z.id))throw new Error("Missing text or token layer");console.log("Creating token:",R,"to",L);const J=await I.tokens.create(Z.id,q.id,R,L);console.log("Token creation successful, response:",J);const{lemmaLayer:ee}=j();if(ee&&(J!=null&&J.id))try{const z=i.substring(R,L);await I.spans.create(ee.id,[J.id],z),console.log(`Created lemma span for token: "${z}"`)}catch(z){console.error("Failed to create lemma span:",z)}r(z=>{var N,T;const te=JSON.parse(JSON.stringify(z)),K=(N=te.textLayers)==null?void 0:N[0],G=(T=K==null?void 0:K.tokenLayers)==null?void 0:T[0],M=G==null?void 0:G.tokens;if(M){const S={...J,begin:R,end:L};console.log("Adding token to client state:",S),M.push(S)}return te})}catch(I){throw console.error("Token creation failed, refreshing:",I),await m(),I}},Y=async(R=null)=>{const L=h(),{tokens:I,sentenceSpans:q,lemmaSpans:Z,relations:J}=j();if(!J||J.length===0)return[];const ee=R||q,z=new Map,te=ee.map(S=>{var $;return(($=S.tokens)==null?void 0:$[0])||S.begin}).filter(S=>S!=null),K=[...I].sort((S,$)=>S.begin-$.begin);let G=0;K.forEach(S=>{te.includes(S.id)&&z.size>0&&G++,z.set(S.id,G)});const M=new Map;Z.forEach(S=>{S.tokens&&S.tokens.length>0&&M.set(S.id,S.tokens)});const N=[];J.forEach(S=>{const $=M.get(S.source)||[],_=M.get(S.target)||[];let W=null,Q=null;$.length>0&&(W=z.get($[0])),_.length>0&&(Q=z.get(_[0])),W!==null&&Q!==null&&W!==Q&&N.push(S)});const T=[];for(const S of N)try{await L.relations.delete(S.id),T.push(S.id),console.log(`Deleted cross-sentence relation: ${S.id} (${S.value})`)}catch($){console.error(`Failed to delete relation ${S.id}:`,$)}return T},de=async(R,L)=>{try{const I=h(),{sentenceLayer:q,sentenceSpans:Z,tokens:J}=j();if(!(q!=null&&q.id))throw new Error("No sentence layer found");const ee=J.find(te=>te.id===R);if(!ee)throw new Error("Token not found");const z=Z.find(te=>te.tokens&&te.tokens.length>0?te.tokens.includes(ee.id):te.begin===ee.id&&te.end===ee.id);if(L&&!z){console.log("Creating sentence span for token:",R);const te=await I.spans.create(q.id,[ee.id],null),K=[...Z,{...te,tokens:[ee.id]}],G=await Y(K);r(M=>{var W,Q,D;const N=JSON.parse(JSON.stringify(M)),T=(W=N.textLayers)==null?void 0:W[0],S=(Q=T==null?void 0:T.tokenLayers)==null?void 0:Q[0],$=(S==null?void 0:S.spanLayers)||[],_=$.find(ne=>ne.name==="Sentence");if(_){_.spans||(_.spans=[]);const ne={...te,tokens:[ee.id]};_.spans.push(ne)}if(G.length>0){const ne=$.find(oe=>oe.name==="Lemma"),le=(D=ne==null?void 0:ne.relationLayers)==null?void 0:D[0];le&&le.relations&&(le.relations=le.relations.filter(oe=>!G.includes(oe.id)))}return N})}else if(!L&&z){console.log("Deleting sentence span:",z.id),await I.spans.delete(z.id);const te=Z.filter(G=>G.id!==z.id),K=await Y(te);r(G=>{var _,W,Q;const M=JSON.parse(JSON.stringify(G)),N=(_=M.textLayers)==null?void 0:_[0],T=(W=N==null?void 0:N.tokenLayers)==null?void 0:W[0],S=(T==null?void 0:T.spanLayers)||[],$=S.find(D=>D.name==="Sentence");if($&&$.spans){const D=$.spans.findIndex(ne=>ne.id===z.id);D!==-1&&$.spans.splice(D,1)}if(K.length>0){const D=S.find(le=>le.name==="Lemma"),ne=(Q=D==null?void 0:D.relationLayers)==null?void 0:Q[0];ne&&ne.relations&&(ne.relations=ne.relations.filter(le=>!K.includes(le.id)))}return M})}}catch(I){throw console.error("Sentence toggle failed, refreshing:",I),await m(),I}},ie=async(R,L)=>{try{const I=h(),{tokenLayer:q}=j();if(!(q!=null&&q.id))throw new Error("No token layer found");const{mwtSpans:Z}=j(),J=[];for(const K of R)Z.find(M=>M.tokens&&M.tokens.includes(K))&&J.push(K);if(J.length>0)return;let z=(q.spanLayers||[]).find(K=>K.name==="Multi-word Tokens");z||(console.log("Creating Multi-word Tokens span layer"),z=await I.spanLayers.create(q.id,"Multi-word Tokens",{description:"Multi-word token spans for CoNLL-U format"})),console.log("Creating MWT span with tokens:",R,"surface form:",L);const te=await I.spans.create(z.id,R,L);console.log("MWT span created successfully:",te),r(K=>{var $,_;const G=JSON.parse(JSON.stringify(K)),M=($=G.textLayers)==null?void 0:$[0],N=(_=M==null?void 0:M.tokenLayers)==null?void 0:_[0],T=(N==null?void 0:N.spanLayers)||[];let S=T.find(W=>W.name==="Multi-word Tokens");return S||(S={...z,spans:[]},T.push(S),N.spanLayers=T),S.spans||(S.spans=[]),S.spans.push({...te,tokens:R,value:L}),G})}catch(I){throw console.error("MWT creation failed, refreshing:",I),await m(),I}},ye=async R=>{try{const L=h();console.log("Deleting MWT span:",R),await L.spans.delete(R),console.log("MWT span deleted successfully"),r(I=>{var te,K;const q=JSON.parse(JSON.stringify(I)),Z=(te=q.textLayers)==null?void 0:te[0],J=(K=Z==null?void 0:Z.tokenLayers)==null?void 0:K[0],z=((J==null?void 0:J.spanLayers)||[]).find(G=>G.name==="Multi-word Tokens");return z&&z.spans&&(z.spans=z.spans.filter(G=>G.id!==R)),q})}catch(L){throw console.error("MWT deletion failed, refreshing:",L),await m(),L}};if(c)return d.jsx("div",{className:"text-center text-gray-600 py-8",children:"Loading document..."});if(!n||!s)return d.jsx("div",{className:"rounded-md bg-red-50 p-4",children:d.jsx("p",{className:"text-sm text-red-800",children:"Document or project not found"})});const{tokens:pe,sentenceSpans:H,mwtSpans:U}=j(),A=l&&i!==l;return d.jsxs("div",{children:[d.jsx(oo,{projectId:e,documentId:t,project:s,document:n}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Text Content"}),d.jsx("textarea",{className:"w-full min-h-[300px] p-4 border-2 border-gray-300 rounded-md font-mono text-sm leading-relaxed resize-y focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:i,onChange:P,placeholder:`Enter your text here. Use multiple newlines to separate sentences.

Example:
The quick brown fox jumps over the lazy dog.
This is a second sentence for testing.`,rows:12}),d.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[d.jsx("button",{onClick:C,disabled:p||!i.trim(),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:p?"Saving...":"Save Text"}),d.jsx("button",{onClick:E,disabled:p||!i.trim()||A,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",title:A?"Please save text changes before tokenizing":"",children:p?"Processing...":"Whitespace Tokenize"}),pe.length>0&&d.jsx("button",{onClick:O,disabled:p,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:"Clear Tokens"}),d.jsxs("div",{className:"ml-auto text-sm font-medium text-gray-600",children:[pe.length," token",pe.length!==1?"s":""]})]}),d.jsxs("div",{className:"mt-2 text-sm",children:[p&&d.jsx("span",{className:"text-blue-600 italic",children:"Processing..."}),!p&&b&&d.jsxs("span",{className:"text-green-600",children:["Saved: ",b.toLocaleTimeString()]}),!p&&!b&&i&&A&&d.jsx("span",{className:"text-yellow-600 italic",children:"Unsaved changes"})]})]}),d.jsxs("div",{className:"border border-gray-200 rounded-md p-4 bg-gray-50",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Token Visualization"}),d.jsx(by,{text:i,originalText:l,tokens:pe,sentenceSpans:H,mwtSpans:U,onTokenUpdate:B,onTokenDelete:F,onTokenCreate:re,onSentenceToggle:de,onMwtCreate:ie,onMwtDelete:ye})]})]})]})},Sy=({tokens:e,relations:t,lemmaSpans:n,onRelationCreate:r,onRelationUpdate:s,onRelationDelete:o,textContent:i,tokenPositions:a=[]})=>{const[l,u]=x.useState(null),[c,f]=x.useState(null),[p,g]=x.useState(null),[k,v]=x.useState(null),[b,y]=x.useState(null),[h,m]=x.useState(null),[w,j]=x.useState(null),[C,P]=x.useState(null),[E,O]=x.useState(!1),B=x.useRef(null),F=x.useRef(new Map),re=80,Y=300,de=20,ie=Y-30,ye=25,pe=a.length>0?a.map((T,S)=>({...T,y:ie})):e.map((T,S)=>{const $=i.substring(T.begin,T.end),_=n.find(W=>W.tokens&&W.tokens.includes(T.id)||W.begin===T.id);return{token:T,x:de+S*re+re/2,y:ie,form:$,lemmaSpanId:_==null?void 0:_.id,index:S}}),H=(T,S)=>{const $=Math.abs(S-T),_=-.2*Math.pow($,.8),Q=1/(1+Math.exp(_)),D=Y-ye-40,ne=D*((Q-.5)*2);return Math.max(15,Math.min(ne,D*.8))},U=(T,S,$=!1,_=!1)=>{const W=T.x,Q=_?T.y:ie-10,D=S.x,ne=$?ye+10:ie-10,le=D-W,oe=ne-Q,se=$||_?null:H(T.index,S.index),ae=D>W?5:-5;let ue;return se===null?ue=`M ${W} ${Q} l ${le} ${oe}`:Q===ye+10?ue=`M ${W} ${Q} 
           c 0 0, ${le} -${se/4}, ${le} ${oe}`:oe!==0?ue=`M ${W} ${Q} 
           c 0 -${se}, ${le} -${se}, ${le} ${oe}`:ue=`M ${W+ae} ${Q} 
           a ${Math.abs(le-ae)/2} ${se} 0 0 ${W<D?"1":"0"} ${le-ae} 0`,ue},A=(T,S)=>{if(T.preventDefault(),p){g(null);return}m({x:S.x,y:S.y}),j({x:S.x,y:S.y}),P(S.lemmaSpanId)},R=T=>{if(h&&B.current){const S=B.current.getBoundingClientRect();j({x:T.clientX-S.left,y:T.clientY-S.top})}},L=(T,S)=>{if(T.stopPropagation(),h&&C){const $=C,_=S.lemmaSpanId;if($==="ROOT"&&_){const W=t.find(Q=>Q.source===_&&Q.target===_);W?g(W):r(_,_,"root")}else if($!==_&&$!=="ROOT"){const W=t.find(Q=>Q.source===$&&Q.target===_);W?g(W):$&&_&&r($,_,"dep")}}m(null),j(null),P(null)},I=T=>{if(T.preventDefault(),p){g(null);return}const S=B.current.getBoundingClientRect(),$=T.clientX-S.left,_=T.clientY-S.top;m({x:$,y:_}),j({x:$,y:_}),P("ROOT")},q=T=>{if(T.stopPropagation(),h&&C&&C!=="ROOT"){const S=C,$=t.find(_=>_.source===S&&_.target===S);$?g($):r(S,S,"root")}m(null),j(null),P(null)},Z=T=>{m(null),j(null),P(null)},J=T=>{if(p){g(null);return}if(!l)u(T);else if(l.lemmaSpanId===T.lemmaSpanId)u(null);else{const S=l.lemmaSpanId,$=T.lemmaSpanId,_=t.find(W=>W.source===S&&W.target===$);_?g(_):S&&$&&r(S,$,"dep"),u(null)}},ee=T=>{if(l&&l.lemmaSpanId!=="ROOT"){const S=l.lemmaSpanId,$=t.find(_=>_.source===S&&_.target===S);$?g($):r(S,S,"root"),u(null)}},z=[...t].sort((T,S)=>{const $=_=>{const W=_.source===_.target,Q=pe.find(D=>D.lemmaSpanId===_.source);if(W)return(Q==null?void 0:Q.x)||0;{const D=pe.find(ne=>ne.lemmaSpanId===_.target);return(((Q==null?void 0:Q.x)||0)+((D==null?void 0:D.x)||0))/2}};return $(T)-$(S)}),te=T=>{if(T.key==="d"&&T.ctrlKey&&!b&&!p){T.preventDefault(),K();return}if(T.key==="Tab"&&b){T.preventDefault();const S=z.findIndex($=>$.id===b);if(T.shiftKey){const $=S>0?S-1:z.length-1;if(z[$]){y(z[$].id);const _=F.current.get(z[$].id);_==null||_.focus()}}else{const $=S<z.length-1?S+1:0;if(z[$]){y(z[$].id);const _=F.current.get(z[$].id);_==null||_.focus()}}return}T.key==="Escape"&&(u(null),g(null),y(null),m(null),j(null),P(null))};x.useEffect(()=>(document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)),[b,p,z,t]),x.useEffect(()=>{if(a.length>0&&e.length>0){const T=setTimeout(()=>{O(!0)},100);return()=>clearTimeout(T)}else O(!1)},[a,e]);const K=()=>{if(z.length>0&&!b){const T=z[0];y(T.id);const S=F.current.get(T.id);S==null||S.focus()}},G=T=>{const S=T.source===T.target,$=pe.find(he=>he.lemmaSpanId===T.source),_=S?{x:($==null?void 0:$.x)||0,index:-1}:pe.find(he=>he.lemmaSpanId===T.target);if(!$||!_&&!S)return null;const W=(p==null?void 0:p.id)===T.id,Q=k===T.id,D=b===T.id,ne=S,le=U($,_,ne),oe=`arc-${T.id}`,se=ne?$.x:_.x,ae=ie-10;let ue,fe;if(ne)ue=$.x,fe=(ie+ye)/2;else{const he=($.x+_.x)/2,we=H($.index,_.index);fe=ie-we-15,ue=he}const _t=W||Q||D?"#2563eb":"#666",En=W||Q||D?2:1;return d.jsxs("g",{children:[d.jsx("path",{id:oe,d:le,stroke:_t,strokeWidth:En,className:"tree-arc-path",onMouseEnter:()=>v(T.id),onMouseLeave:()=>v(null),onClick:()=>{g(T)}}),d.jsx("polygon",{points:`${se-3},${ae-3} ${se+3},${ae-3} ${se},${ae+2}`,fill:_t,className:"tree-arc-arrow",onClick:()=>{g(T)}}),(p==null?void 0:p.id)===T.id?d.jsx("foreignObject",{x:ue-40,y:fe-10,width:"80",height:"20",children:d.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,className:"tree-deprel-edit",onBlur:he=>{const we=he.target.textContent.trim(),ot=T.value||"dep";we&&we!==ot&&s(T.id,we),g(null);const mt=he.relatedTarget;mt&&mt.getAttribute&&mt.getAttribute("tabIndex")!==null&&mt.getAttribute("tabIndex")!=="-1"?y(null):setTimeout(()=>{const $e=F.current.get(T.id);$e&&($e.focus(),y(T.id))},0)},onKeyDown:he=>{if(he.key==="Enter")he.preventDefault(),he.target.blur();else if(he.key==="Escape")he.target.textContent=T.value||"dep",g(null),y(null);else if(he.key==="Delete"&&he.shiftKey)he.preventDefault(),o(T.id),g(null),y(null);else if(he.key==="Tab"){he.preventDefault();const we=he.target.textContent.trim(),ot=T.value||"dep";we&&we!==ot&&s(T.id,we),g(null);const mt=z.findIndex(at=>at.id===T.id);if(he.shiftKey){const at=mt>0?mt-1:z.length-1;z[at]&&setTimeout(()=>{y(z[at].id);const $e=F.current.get(z[at].id);$e==null||$e.focus()},0)}else{const at=mt<z.length-1?mt+1:0;z[at]&&setTimeout(()=>{y(z[at].id);const $e=F.current.get(z[at].id);$e==null||$e.focus()},0)}}},autoFocus:!0,ref:he=>{if(he){he.textContent=T.value||"dep";const we=document.createRange();we.selectNodeContents(he);const ot=window.getSelection();ot.removeAllRanges(),ot.addRange(we)}},children:T.value||"dep"})}):d.jsx("text",{x:ue,y:fe,fill:_t,className:`tree-deprel-text ${D?"tree-deprel-text--focused":""}`,tabIndex:"-1",onMouseEnter:()=>v(T.id),onMouseLeave:()=>v(null),onFocus:()=>{y(T.id),g(T)},onBlur:()=>{p||y(null)},onClick:()=>{g(T),y(T.id)},ref:he=>{he?F.current.set(T.id,he):F.current.delete(T.id)},children:T.value||"dep"})]},T.id)},M=()=>{if(!h||!w||!C)return null;let T,S;if(C==="ROOT")T=h.x,S=h.y;else{const Q=pe.find(D=>D.lemmaSpanId===C);if(!Q)return null;T=Q.x,S=ie-10}const $=w.x-T,_=w.y-S;let W;if(C==="ROOT")if(w.y>ye+30){const D=Math.abs(_)*.3;W=`M ${T} ${S} 
             c 0 ${D}, ${$} ${D}, ${$} ${_}`}else W=`M ${T} ${S} l ${$} ${_}`;else{const D=w.y<ye+15?null:H(0,-1),ne=$>0?5:-5;D===null?W=`M ${T} ${S} l ${$} ${_}`:_!==0?W=`M ${T} ${S} 
             c 0 -${D}, ${$} -${D}, ${$} ${_}`:W=`M ${T+ne} ${S} 
             a ${Math.abs($-ne)/2} ${D} 0 0 ${T<T+$?"1":"0"} ${$-ne} 0`}return d.jsx("path",{d:W,className:"tree-drag-arc"})},N=pe.length>0?Math.max(...pe.map(T=>T.x))+50:300;return d.jsx("div",{className:"dependency-tree-container",children:d.jsxs("svg",{ref:B,width:"100%",height:Y,className:"tree-svg",style:{minWidth:`${N}px`},onMouseMove:R,onMouseUp:Z,children:[d.jsx("rect",{x:0,y:ye,width:"100%",height:"20",fill:(c==null?void 0:c.lemmaSpanId)==="ROOT"?"#e5e7eb":"#fafafa",className:l||h?"tree-root-rect":"tree-root-rect--default",onClick:()=>ee(),onMouseDown:I,onMouseUp:q,onMouseEnter:()=>f({lemmaSpanId:"ROOT"}),onMouseLeave:()=>f(null)}),E&&t.map((T,S)=>G(T)),E&&M(),pe.map(T=>{l==null||l.lemmaSpanId,T.lemmaSpanId,c==null||c.lemmaSpanId,T.lemmaSpanId,T.lemmaSpanId;const S=T.width||60,$=30;return d.jsx("rect",{x:T.x-S*.6,y:T.y-$*.6+10,width:S*1.2,height:$*1.2,fill:"transparent",className:`tree-token-area ${h?"tree-token-area--drag":"tree-token-area--grab"}`,onClick:()=>J(T),onMouseDown:_=>A(_,T),onMouseUp:_=>L(_,T),onMouseEnter:()=>f(T),onMouseLeave:()=>f(null)},T.token.id)})]})})},Ey=(e,t)=>{const[n,r]=x.useState([]),s=x.useRef(null),o=x.useRef(new Map),i=x.useRef(null),a=x.useCallback(()=>{if(!s.current||!e||e.length===0)return;const l=s.current.getBoundingClientRect(),u=[];e.forEach((c,f)=>{const p=o.current.get(c.token.id);if(p){const g=p.getBoundingClientRect(),k=g.left+g.width/2-l.left,v=g.top+g.height/2-l.top+50,b=t==null?void 0:t.find(y=>y.tokens&&y.tokens.includes(c.token.id)||y.begin===c.token.id);u.push({token:c.token,x:k,y:v,width:g.width,form:c.tokenForm,lemmaSpanId:b==null?void 0:b.id,index:f})}}),r(u)},[e,t]);return x.useEffect(()=>{const l=setTimeout(()=>{a()},0);return i.current&&i.current.disconnect(),i.current=new ResizeObserver(()=>{a()}),s.current&&i.current.observe(s.current),()=>{clearTimeout(l),i.current&&i.current.disconnect()}},[a]),{tokenPositions:n,sentenceGridRef:s,tokenRefs:o}},ta=io.memo(({value:e,tokenId:t,field:n,tokenForm:r,tabIndex:s,columnWidth:o,onUpdate:i})=>{const[a,l]=x.useState(e||""),[u,c]=x.useState(!1),f=x.useRef(null);x.useEffect(()=>{u||l(e||"")},[e,u]);const p=h=>{l(h.target.value)},g=h=>{c(!1);const m=a.trim();m!==(e||"")?i(t,n,m||null).catch(w=>{console.error(`Failed to update ${n}:`,w),l(e||"")}):l(e||"")},k=h=>{var m,w;h.key==="Enter"?(h.preventDefault(),(m=f.current)==null||m.blur()):h.key==="Escape"&&(l(e||""),c(!1),(w=f.current)==null||w.blur())},v=()=>{c(!0),setTimeout(()=>{var h;(h=f.current)==null||h.select()},0)},b=a||(n==="lemma"&&!e?r:""),y=b&&b.trim()!=="";return d.jsx("input",{ref:f,id:s,type:"text",value:b,onChange:p,onBlur:g,onKeyDown:k,onFocus:v,className:`editable-field ${y?"editable-field--filled":"editable-field--empty"}`,style:{width:o?`${o}px`:"auto"},title:`Edit ${n}`,tabIndex:s})}),Cy=io.memo(({features:e,spanIds:t,tokenId:n,columnWidth:r,onAnnotationUpdate:s,onFeatureDelete:o})=>{const[i,a]=x.useState(!1),[l,u]=x.useState(""),[c,f]=x.useState(!1),[p,g]=x.useState(null),k=async()=>{if(l.trim()){if(!l.includes("=")){alert('Features must be in the format "key=value"');return}try{await s(n,"features",l.trim()),u(""),a(!1)}catch(b){console.error("Failed to add feature:",b)}}},v=async b=>{const y=t==null?void 0:t.features[b];if(!y){console.error("No span ID found for feature at index",b);return}try{await o(y.spanId)}catch(h){console.error("Failed to remove feature:",h)}};return d.jsxs("div",{className:"features-container",style:{width:r?`${r}px`:"auto"},onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[e.map((b,y)=>d.jsxs("div",{className:`feature-tag ${p===y?"feature-tag--hovered":"feature-tag--normal"}`,onMouseEnter:()=>g(y),onMouseLeave:()=>g(null),children:[d.jsx("span",{className:"feature-text",children:b}),d.jsx("button",{onClick:()=>v(y),className:`feature-delete-btn ${p===y?"feature-delete-btn--visible":"feature-delete-btn--hidden"}`,title:"Remove feature",children:""})]},`${n}-feat-${y}`)),i?d.jsx("div",{className:"feature-input-container",children:d.jsx("input",{type:"text",value:l,onChange:b=>u(b.target.value),onKeyDown:b=>{b.key==="Enter"?(b.preventDefault(),k()):b.key==="Escape"&&(u(""),a(!1))},onBlur:()=>{l.trim()?k():a(!1)},placeholder:"key=value",className:"feature-input",autoFocus:!0})}):c?d.jsx("button",{onClick:()=>a(!0),className:"feature-add-btn",children:"+"}):null]})}),$y=io.memo(({data:e,index:t,columnWidth:n,getTabIndex:r,onAnnotationUpdate:s,onFeatureDelete:o,maxFeatures:i,tokenRefs:a})=>{var l,u,c;return d.jsxs("div",{className:"token-column",style:{width:`${n}px`},children:[d.jsx("div",{className:"token-form",ref:f=>{f?a.current.set(e.token.id,f):a.current.delete(e.token.id)},children:e.tokenForm}),d.jsx("div",{className:"annotation-cell",children:d.jsx(ta,{value:(l=e.lemma)==null?void 0:l.value,tokenId:e.token.id,field:"lemma",tokenForm:e.tokenForm,tabIndex:r(t,"lemma"),columnWidth:n,onUpdate:s})}),d.jsx("div",{className:"annotation-cell",children:d.jsx(ta,{value:(u=e.xpos)==null?void 0:u.value,tokenId:e.token.id,field:"xpos",tokenForm:e.tokenForm,tabIndex:r(t,"xpos"),columnWidth:n,onUpdate:s})}),d.jsx("div",{className:"annotation-cell",children:d.jsx(ta,{value:(c=e.upos)==null?void 0:c.value,tokenId:e.token.id,field:"upos",tokenForm:e.tokenForm,tabIndex:r(t,"upos"),columnWidth:n,onUpdate:s})}),d.jsx("div",{className:"features-cell",style:{minHeight:`${Math.max(30,i*16+20)}px`},children:d.jsx(Cy,{features:e.feats.map(f=>f.value),spanIds:{features:e.spanIds.features},tokenId:e.token.id,columnWidth:n,onAnnotationUpdate:s,onFeatureDelete:o})})]})},(e,t)=>e.data===t.data&&e.index===t.index&&e.columnWidth===t.columnWidth&&e.maxFeatures===t.maxFeatures&&e.onAnnotationUpdate===t.onAnnotationUpdate&&e.onFeatureDelete===t.onFeatureDelete&&e.getTabIndex===t.getTabIndex),Ny=io.memo(({sentenceData:e,onAnnotationUpdate:t,onFeatureDelete:n,onRelationCreate:r,onRelationUpdate:s,onRelationDelete:o,sentenceIndex:i=0,totalTokensBefore:a=0})=>{const l=e.tokens,u=x.useMemo(()=>l.map(m=>{var Y,de,ie;const P=m.tokenForm.length*8+16,E=(((Y=m.lemma)==null?void 0:Y.value)||m.tokenForm).length*8+16,O=(((de=m.xpos)==null?void 0:de.value)||"").length*8+16,B=(((ie=m.upos)==null?void 0:ie.value)||"").length*8+16,F=m.feats.reduce((ye,pe)=>pe.value&&pe.value.length>ye.length?pe.value:ye,""),re=F?F.length*8+16:40;return Math.max(40,P,E,O,B,re)}),[l]),c=Math.max(1,...l.map(h=>h.feats.length)),f=e.relations,p=e.lemmaSpans,g={substring:(h,m)=>{const w=l.find(j=>j.token.begin===h&&j.token.end===m);return w?w.tokenForm:""}},{tokenPositions:k,sentenceGridRef:v,tokenRefs:b}=Ey(l,p),y=x.useCallback((h,m)=>{const w={lemma:0,xpos:1,upos:2},j=l.length,C=a*3,P=w[m],E=h;return C+P*j+E+1},[l.length,a]);return d.jsxs("div",{className:"sentence-container",children:[d.jsx(Sy,{tokens:e.tokens.map(h=>h.token),relations:f,lemmaSpans:p,onRelationCreate:r,onRelationUpdate:s,onRelationDelete:o,textContent:g,tokenPositions:k}),d.jsxs("div",{className:"sentence-grid",ref:v,children:[d.jsxs("div",{className:"labels-column",children:[d.jsx("div",{className:"label-spacer"}),d.jsx("div",{className:"row-label",children:"LEMMA"}),d.jsx("div",{className:"row-label",children:"XPOS"}),d.jsx("div",{className:"row-label",children:"UPOS"}),d.jsx("div",{className:"row-label",style:{minHeight:`${Math.max(30,c*16+20)}px`,alignItems:"flex-start",paddingTop:"6px"},children:"FEATS"})]}),l.map((h,m)=>d.jsx($y,{data:h,index:m,columnWidth:u[m],getTabIndex:y,onAnnotationUpdate:t,onFeatureDelete:n,maxFeatures:c,tokenRefs:b},h.token.id))]})]})},(e,t)=>JSON.stringify(e.sentenceData)===JSON.stringify(t.sentenceData)),Gd=(e,t)=>{const[n,r]=x.useState(null),[s,o]=x.useState(null),[i,a]=x.useState(!0),[l,u]=x.useState(""),{getClient:c}=Xe(),f=x.useCallback(async()=>{if(!(!e||!t))try{a(!0);const g=c();if(!g){window.location.href="/login";return}const[k,v]=await Promise.all([g.projects.get(e),g.documents.get(t,!0)]);o(k),r(v),u("")}catch(g){if(g.status===401){window.location.href="/login";return}u("Failed to load document: "+(g.message||"Unknown error")),console.error("Error fetching data:",g)}finally{a(!1)}},[e,t,c]),p=x.useCallback(async()=>{await f()},[f]);return x.useEffect(()=>{f()},[f]),{document:n,project:s,loading:i,error:l,setDocument:r,setError:u,refreshData:p}},Py=e=>x.useMemo(()=>{var c,f,p;if(!e)return{};const t=(c=e.textLayers)==null?void 0:c[0],n=(f=t==null?void 0:t.tokenLayers)==null?void 0:f[0],r=(n==null?void 0:n.spanLayers)||[],s=r.find(g=>g.name==="Lemma"),o=r.find(g=>g.name==="UPOS"),i=r.find(g=>g.name==="XPOS"),a=r.find(g=>g.name==="Features"),l=r.find(g=>g.name==="Multi-word Tokens"),u=(p=s==null?void 0:s.relationLayers)==null?void 0:p[0];return{lemmaLayer:s,uposLayer:o,xposLayer:i,featuresLayer:a,mwtLayer:l,relationLayer:u,textLayer:t,tokenLayer:n}},[e]),_y=(e,t,n,r,s)=>{const{getClient:o}=Xe(),i=x.useCallback(async(k,v,b)=>{try{const y=o();if(!y)return;let h,m;switch(v){case"lemma":h=r.lemmaLayer,m=(h==null?void 0:h.spans)||[];break;case"upos":h=r.uposLayer,m=(h==null?void 0:h.spans)||[];break;case"xpos":h=r.xposLayer,m=(h==null?void 0:h.spans)||[];break;case"features":h=r.featuresLayer,m=(h==null?void 0:h.spans)||[];break;default:throw new Error(`Unknown field: ${v}`)}let w;if(v==="features"){if(!h){console.warn(`Layer for ${v} not found, cannot create annotation`);return}w=await y.spans.create(h.id,[k],b),t(j=>{var F,re;const C=JSON.parse(JSON.stringify(j)),P=(F=C.textLayers)==null?void 0:F[0],E=(re=P==null?void 0:P.tokenLayers)==null?void 0:re[0],B=((E==null?void 0:E.spanLayers)||[]).find(Y=>Y.id===h.id);return B&&(B.spans||(B.spans=[]),B.spans.push({...w,tokens:[k],value:b})),C})}else{const j=m.find(C=>C.tokens&&C.tokens.length>0?C.tokens.includes(k):C.begin===k);if(j)w=await y.spans.update(j.id,b),t(C=>{var F,re;const P=JSON.parse(JSON.stringify(C)),E=(F=P.textLayers)==null?void 0:F[0],O=(re=E==null?void 0:E.tokenLayers)==null?void 0:re[0];return((O==null?void 0:O.spanLayers)||[]).forEach(Y=>{if(Y.spans){const de=Y.spans.findIndex(ie=>ie.id===j.id);de!==-1&&(Y.spans[de].value=b)}}),P});else if(h)w=await y.spans.create(h.id,[k],b),t(C=>{var re,Y;const P=JSON.parse(JSON.stringify(C)),E=(re=P.textLayers)==null?void 0:re[0],O=(Y=E==null?void 0:E.tokenLayers)==null?void 0:Y[0],F=((O==null?void 0:O.spanLayers)||[]).find(de=>de.id===h.id);return F&&(F.spans||(F.spans=[]),F.spans.push({...w,tokens:[k],value:b})),P});else{console.warn(`Layer for ${v} not found, cannot create annotation`);return}}n("")}catch(y){console.error(`Failed to update ${v}:`,y),n(`Failed to update ${v}: ${y.message}`),await s()}},[r]),a=x.useCallback(async k=>{try{const v=o();if(!v)return;await v.spans.delete(k),t(b=>{var j,C;const y=JSON.parse(JSON.stringify(b)),h=(j=y.textLayers)==null?void 0:j[0],m=(C=h==null?void 0:h.tokenLayers)==null?void 0:C[0];return((m==null?void 0:m.spanLayers)||[]).forEach(P=>{P.name==="Features"&&P.spans&&(P.spans=P.spans.filter(E=>E.id!==k))}),y}),n("")}catch(v){console.error("Failed to delete feature:",v),n(`Failed to delete feature: ${v.message}`),await s()}},[r]),l=x.useCallback(async(k,v,b)=>{try{const y=o();if(!y)return;if(!r.relationLayer){n("Relation layer not found. Please ensure the project is properly configured.");return}const m=(r.relationLayer.relations||[]).filter(j=>j.target===v);for(const j of m)try{await y.relations.delete(j.id)}catch(C){console.warn("Failed to delete existing relation:",C)}let w=null;if(k===v){const j=await y.relations.create(r.relationLayer.id,v,v,b||"root");w={id:j.id||j,source:v,target:v,value:b||"root"}}else{const j=await y.relations.create(r.relationLayer.id,k,v,b||"dep");w={id:j.id||j,source:k,target:v,value:b||"dep"}}t(j=>{var B,F,re;const C=JSON.parse(JSON.stringify(j)),P=(B=C.textLayers)==null?void 0:B[0],E=(F=P==null?void 0:P.tokenLayers)==null?void 0:F[0],O=(re=E==null?void 0:E.spanLayers)==null?void 0:re.find(Y=>Y.name==="Lemma");return O&&(O.relationLayers||(O.relationLayers=[]),O.relationLayers[0]||(O.relationLayers[0]={id:r.relationLayer.id,name:"Relation",relations:[]}),O.relationLayers[0].relations||(O.relationLayers[0].relations=[]),O.relationLayers[0].relations=O.relationLayers[0].relations.filter(Y=>Y.target!==v),O.relationLayers[0].relations.push(w)),C}),n("")}catch(y){console.error("Failed to create relation:",y),n(`Failed to create relation: ${y.message}`),await s()}},[r]),u=x.useCallback(async(k,v)=>{try{const b=o();if(!b)return;await b.relations.update(k,v),t(y=>{var C,P,E,O,B;const h=JSON.parse(JSON.stringify(y)),m=(C=h.textLayers)==null?void 0:C[0],w=(P=m==null?void 0:m.tokenLayers)==null?void 0:P[0],j=(E=w==null?void 0:w.spanLayers)==null?void 0:E.find(F=>F.name==="Lemma");if(j&&((B=(O=j.relationLayers)==null?void 0:O[0])!=null&&B.relations)){const F=j.relationLayers[0].relations.findIndex(re=>re.id===k);F!==-1&&(j.relationLayers[0].relations[F].value=v)}return h}),n("")}catch(b){console.error("Failed to update relation:",b),n(`Failed to update relation: ${b.message}`),await s()}},[r]),c=x.useCallback(async k=>{try{const v=o();if(!v)return;await v.relations.delete(k),t(b=>{var j,C,P,E,O;const y=JSON.parse(JSON.stringify(b)),h=(j=y.textLayers)==null?void 0:j[0],m=(C=h==null?void 0:h.tokenLayers)==null?void 0:C[0],w=(P=m==null?void 0:m.spanLayers)==null?void 0:P.find(B=>B.name==="Lemma");return w&&((O=(E=w.relationLayers)==null?void 0:E[0])!=null&&O.relations)&&(w.relationLayers[0].relations=w.relationLayers[0].relations.filter(B=>B.id!==k)),y}),n("")}catch(v){console.error("Failed to delete relation:",v),n(`Failed to delete relation: ${v.message}`),await s()}},[r]),f=x.useCallback(async(k,v)=>{try{const b=o();if(!b)return;if(!r.mwtLayer){console.warn("MWT layer not found, cannot create multi-word token");return}if(!k||k.length<2)throw new Error("Multi-word token requires at least 2 tokens");const y=[...k].sort((m,w)=>m.localeCompare(w)),h=await b.spans.create(r.mwtLayer.id,k,v);t(m=>{var O,B;const w=JSON.parse(JSON.stringify(m)),j=(O=w.textLayers)==null?void 0:O[0],C=(B=j==null?void 0:j.tokenLayers)==null?void 0:B[0],E=((C==null?void 0:C.spanLayers)||[]).find(F=>F.id===r.mwtLayer.id);return E&&(E.spans||(E.spans=[]),E.spans.push({...h,tokens:k,value:v})),w}),n("")}catch(b){console.error("Failed to create MWT:",b),n(`Failed to create multi-word token: ${b.message}`),await s()}},[r]),p=x.useCallback(async(k,v)=>{try{const b=o();if(!b)return;await b.spans.update(k,v),t(y=>{var C,P;const h=JSON.parse(JSON.stringify(y)),m=(C=h.textLayers)==null?void 0:C[0],w=(P=m==null?void 0:m.tokenLayers)==null?void 0:P[0];return((w==null?void 0:w.spanLayers)||[]).forEach(E=>{if(E.name==="Multi-word Tokens"&&E.spans){const O=E.spans.findIndex(B=>B.id===k);O!==-1&&(E.spans[O].value=v)}}),h}),n("")}catch(b){console.error("Failed to update MWT:",b),n(`Failed to update multi-word token: ${b.message}`),await s()}},[r]),g=x.useCallback(async k=>{try{const v=o();if(!v)return;await v.spans.delete(k),t(b=>{var j,C;const y=JSON.parse(JSON.stringify(b)),h=(j=y.textLayers)==null?void 0:j[0],m=(C=h==null?void 0:h.tokenLayers)==null?void 0:C[0];return((m==null?void 0:m.spanLayers)||[]).forEach(P=>{P.name==="Multi-word Tokens"&&P.spans&&(P.spans=P.spans.filter(E=>E.id!==k))}),y}),n("")}catch(v){console.error("Failed to delete MWT:",v),n(`Failed to delete multi-word token: ${v.message}`),await s()}},[r]);return{handleAnnotationUpdate:i,handleFeatureDelete:a,handleRelationCreate:l,handleRelationUpdate:u,handleRelationDelete:c,handleMwtCreate:f,handleMwtUpdate:p,handleMwtDelete:g}},Oy=e=>x.useMemo(()=>{var C,P,E;if(!e)return[];const t=(C=e.textLayers)==null?void 0:C[0],n=t==null?void 0:t.text,r=(P=t==null?void 0:t.tokenLayers)==null?void 0:P[0],s=(r==null?void 0:r.tokens)||[];if(!(n!=null&&n.body)||s.length===0)return[];const o=(r==null?void 0:r.spanLayers)||[],i=o.find(O=>O.name==="Lemma"),a=o.find(O=>O.name==="UPOS"),l=o.find(O=>O.name==="XPOS"),u=o.find(O=>O.name==="Features"),c=o.find(O=>O.name==="Sentence"),f=o.find(O=>O.name==="Multi-word Tokens"),p=(E=i==null?void 0:i.relationLayers)==null?void 0:E[0],g=[...s].sort((O,B)=>O.begin-B.begin),k=(c==null?void 0:c.spans)||[],v=new Set(k.map(O=>O.tokens&&O.tokens.length>0?O.tokens[0]:O.begin).filter(O=>O!=null)),b=[];let y=[];for(const O of g)v.has(O.id)&&y.length>0&&(b.push(y),y=[]),y.push(O);y.length>0&&b.push(y),b.length===0&&g.length>0&&b.push(g);const h=O=>{const B={lemma:null,upos:null,xpos:null,feats:[],mwt:null,spanIds:{lemma:null,upos:null,xpos:null,features:[],mwt:null}};return[{layer:i,type:"lemma"},{layer:a,type:"upos"},{layer:l,type:"xpos"},{layer:u,type:"feats"},{layer:f,type:"mwt"}].forEach(({layer:F,type:re})=>{F!=null&&F.spans&&F.spans.forEach(Y=>{(Y.tokens||[Y.begin]).includes(O)&&(re==="feats"?Y.value&&(B.feats.push(Y),B.spanIds.features.push({value:Y.value,spanId:Y.id})):(B[re]=Y,B.spanIds[re]=Y.id))})}),B},m=O=>{if(!(p!=null&&p.relations)||!(i!=null&&i.spans))return[];const B=new Set(O.map(Y=>Y.id)),F=i.spans.filter(Y=>(Y.tokens||[Y.begin]).some(ie=>B.has(ie))),re=new Set(F.map(Y=>Y.id));return p.relations.filter(Y=>re.has(Y.source))},w=O=>{if(!(i!=null&&i.spans))return[];const B=new Set(O.map(F=>F.id));return i.spans.filter(F=>(F.tokens||[F.begin]).some(Y=>B.has(Y)))},j=O=>{if(!(f!=null&&f.spans))return[];const B=new Set(O.map(F=>F.id));return f.spans.filter(F=>(F.tokens||[F.begin]).some(Y=>B.has(Y)))};return b.map((O,B)=>{const F=O.map((re,Y)=>{const de=n.body.substring(re.begin,re.end),ie=h(re.id);return{token:re,tokenForm:de,lemma:ie.lemma,upos:ie.upos,xpos:ie.xpos,feats:ie.feats,mwt:ie.mwt,spanIds:ie.spanIds,tokenIndex:Y+1}});return{id:B,text:O.map(re=>n.body.substring(re.begin,re.end)).join(" "),tokens:F,relations:m(O),lemmaSpans:w(O),mwtSpans:j(O)}})},[e]),Ly=e=>{const[t,n]=x.useState([]),[r,s]=x.useState(null),[o,i]=x.useState(!1),[a,l]=x.useState(!1),[u,c]=x.useState(""),{getClient:f}=Xe(),p=x.useCallback(async()=>{if(e)try{i(!0);const v=f();if(!v){window.location.href="/login";return}const b=await v.documents.audit(e);n(b||[]),c("")}catch(v){if(v.status===401){window.location.href="/login";return}c("Failed to load audit log: "+(v.message||"Unknown error")),console.error("Error fetching audit log:",v)}finally{i(!1)}},[e,f]),g=x.useCallback(async v=>{if(!e||!v)return null;try{l(!0),c("");const b=f();if(!b)return window.location.href="/login",null;const y=await b.documents.get(e,!0,v);return s(y),y}catch(b){return b.status===401?(window.location.href="/login",null):(c("Failed to load historical document: "+(b.message||"Unknown error")),console.error("Error fetching historical document:",b),null)}finally{l(!1)}},[e,f]),k=x.useCallback(()=>{s(null),c("")},[]);return x.useEffect(()=>{e&&p()},[p]),{auditEntries:t,historicalDocument:r,loadingAudit:o,loadingHistorical:a,error:u,fetchHistoricalDocument:g,clearHistoricalDocument:k,refreshAuditLog:p}},$n=100,gu=5,Uy=({isOpen:e,onClose:t,auditEntries:n,loading:r,error:s,onSelectEntry:o,selectedEntry:i})=>{const[a,l]=x.useState(0),u=x.useRef(null),[c,f]=x.useState(400),p=[...n].reverse(),g=x.useMemo(()=>{var P;const w=((P=u.current)==null?void 0:P.clientHeight)||400,j=Math.max(0,Math.floor(a/$n)-gu),C=Math.min(p.length-1,Math.ceil((a+w)/$n)+gu);return{startIndex:j,endIndex:C}},[a,p.length]),k=w=>{l(w.target.scrollTop)},v=w=>{o(w)},b=w=>new Date(w).toLocaleString(),y=w=>{var j,C;return((C=(j=w.ops)==null?void 0:j[0])==null?void 0:C.description)||"No description available"},h=p.length*$n,m=g.startIndex*$n;return e?d.jsxs("div",{className:"fixed left-0 top-0 h-full w-96 bg-white shadow-xl z-50 transform transition-transform duration-300 ease-in-out",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Document History"}),d.jsx("button",{onClick:t,className:"p-1 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"h-full flex flex-col",children:[r&&d.jsx("div",{className:"flex items-center justify-center py-8",children:d.jsx("div",{className:"text-sm text-gray-600",children:"Loading history..."})}),s&&d.jsx("div",{className:"p-4",children:d.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded p-3",children:s})}),!r&&!s&&p.length===0&&d.jsx("div",{className:"flex items-center justify-center py-8",children:d.jsx("div",{className:"text-sm text-gray-500",children:"No history entries found"})}),!r&&!s&&p.length>0&&d.jsxs("div",{className:"flex-1 flex flex-col p-4 min-h-0",children:[d.jsxs("div",{className:"text-xs text-gray-500 mb-3",children:[p.length," entries  Click to view historical state"]}),d.jsx("div",{ref:u,className:"border border-gray-200 rounded-md overflow-auto flex-1",onScroll:k,children:d.jsx("div",{style:{height:h,position:"relative"},children:d.jsx("div",{style:{transform:`translateY(${m}px)`,position:"absolute",top:0,left:0,right:0},children:p.slice(g.startIndex,g.endIndex+1).map((w,j)=>{g.startIndex+j;const C=(i==null?void 0:i.id)===w.id;return d.jsx("div",{className:`border-b border-gray-100 cursor-pointer transition-colors ${C?"bg-blue-50 hover:bg-blue-100":"hover:bg-gray-50"}`,style:{height:$n,minHeight:$n},onClick:()=>v(w),children:d.jsxs("div",{className:"p-3 h-full flex flex-col justify-between",children:[d.jsx("div",{className:"flex-1 pr-2",children:d.jsx("div",{className:"text-sm font-medium text-gray-900 break-words overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:"1.3",maxHeight:"2.6em"},children:y(w)})}),d.jsxs("div",{className:"flex-shrink-0 pt-2 border-t border-gray-100",children:[d.jsx("div",{className:"text-xs text-gray-500 mb-1",children:b(w.time)}),w.user&&d.jsxs("div",{className:"text-xs text-gray-400",children:["by ",w.user.username]})]})]})},w.id)})})})})]})]}),i&&d.jsxs("div",{className:"border-t border-gray-200 p-4 bg-blue-50",children:[d.jsx("div",{className:"text-sm font-medium text-blue-900 mb-1",children:"Viewing Historical State"}),d.jsx("div",{className:"text-xs text-blue-700",children:b(i.time)}),d.jsx("button",{onClick:()=>o(null),className:"mt-2 text-xs bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition-colors",children:"Return to Current State"})]})]}):null},Ry=()=>{const{projectId:e,documentId:t}=Xr(),[n,r]=x.useState([]),[s,o]=x.useState(!1),[i,a]=x.useState(null),[l,u]=x.useState(!1),{document:c,project:f,loading:p,error:g,setDocument:k,setError:v,refreshData:b}=Gd(e,t),{auditEntries:y,historicalDocument:h,loadingAudit:m,loadingHistorical:w,error:j,fetchHistoricalDocument:C,clearHistoricalDocument:P}=Ly(t),E=l?h:c,O=Py(E),B=Oy(E),{handleAnnotationUpdate:F,handleFeatureDelete:re,handleRelationCreate:Y,handleRelationUpdate:de,handleRelationDelete:ie}=_y(E,k,v,O,b),ye=()=>{o(!0)},pe=()=>{o(!1),i&&H(null)},H=async U=>{if(!U){a(null),u(!1),P();return}a(U),await C(U.time)&&u(!0)};return x.useEffect(()=>{r(B)},[B]),d.jsxs("div",{style:{margin:0,padding:0,width:"100%",minHeight:"100vh"},children:[d.jsx(Uy,{isOpen:s,onClose:pe,auditEntries:y,loading:m,error:j,onSelectEntry:H,selectedEntry:i}),d.jsxs("div",{className:`transition-all duration-300 ease-in-out ${s?"ml-96":"ml-0"}`,style:{minHeight:"100vh"},children:[p&&d.jsx("div",{className:"text-center text-gray-600 py-8",children:"Loading document..."}),!p&&!E&&d.jsx("div",{className:"text-center text-gray-600 py-8",children:"Document not found"}),!p&&E&&B.length===0&&d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{style:{padding:"1rem 1.5rem"},children:[d.jsx(oo,{projectId:e,documentId:t,project:f,document:E}),d.jsxs("div",{className:"flex items-center justify-between mt-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("button",{onClick:ye,className:"flex items-center gap-2 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"History"]}),i&&d.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-yellow-100 text-yellow-800 rounded-md border border-yellow-200",children:[w?d.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsx("span",{className:"text-sm font-medium",children:w?"Loading Historical State...":"Viewing Historical State"}),d.jsx("span",{className:"text-xs",children:i&&new Date(i.time).toLocaleString()})]})]}),l&&d.jsx("button",{onClick:()=>H(null),className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Return to Current"})]})]}),(g||j)&&d.jsxs("div",{style:{color:"red",marginBottom:"1rem",padding:"0 1.5rem"},children:[g&&d.jsx("div",{children:g}),j&&d.jsx("div",{children:j})]}),d.jsx("div",{className:"text-center text-gray-600 py-8",children:l?"This historical state has no tokenized content to display.":"No sentences found. Please ensure the document has been tokenized in the Text Editor."})]}),!p&&E&&B.length>0&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{padding:"1rem 1.5rem"},children:[d.jsx(oo,{projectId:e,documentId:t,project:f,document:E}),d.jsxs("div",{className:"flex items-center justify-between mt-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("button",{onClick:ye,className:"flex items-center gap-2 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"History"]}),i&&d.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-yellow-100 text-yellow-800 rounded-md border border-yellow-200",children:[w?d.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 818-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsx("span",{className:"text-sm font-medium",children:w?"Loading Historical State...":"Viewing Historical State"}),d.jsx("span",{className:"text-xs",children:i&&new Date(i.time).toLocaleString()})]})]}),l&&d.jsx("button",{onClick:()=>H(null),className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Return to Current"})]})]}),(g||j)&&d.jsxs("div",{style:{color:"red",marginBottom:"1rem",padding:"0 1.5rem"},children:[g&&d.jsx("div",{children:g}),j&&d.jsx("div",{children:j})]}),n.map((U,A)=>{const R=n.slice(0,A).reduce((L,I)=>L+I.tokens.length,0);return d.jsx(Ny,{sentenceData:U,onAnnotationUpdate:l?null:F,onFeatureDelete:l?null:re,onRelationCreate:l?null:Y,onRelationUpdate:l?null:de,onRelationDelete:l?null:ie,sentenceIndex:A,totalTokensBefore:R,readOnly:l},U.id)})]})]})]})},By=()=>{const{projectId:e,documentId:t}=Xr(),[n,r]=x.useState(!1),{document:s,project:o,loading:i,error:a}=Gd(e,t),l=x.useMemo(()=>{var U,A,R;if(!s)return"";const f=(U=s.textLayers)==null?void 0:U[0],p=f==null?void 0:f.text,g=(A=f==null?void 0:f.tokenLayers)==null?void 0:A[0],k=(g==null?void 0:g.tokens)||[];if(!(p!=null&&p.body)||k.length===0)return"# No tokenized content available";const v=(g==null?void 0:g.spanLayers)||[],b=v.find(L=>L.name==="Lemma"),y=v.find(L=>L.name==="UPOS"),h=v.find(L=>L.name==="XPOS"),m=v.find(L=>L.name==="Features"),w=v.find(L=>L.name==="Sentence"),j=v.find(L=>L.name==="Multi-word Tokens"),C=(R=b==null?void 0:b.relationLayers)==null?void 0:R[0],P=(C==null?void 0:C.relations)||[],E=[...k].sort((L,I)=>{if(L.begin!==I.begin)return L.begin-I.begin;const q=L.precedence??0,Z=I.precedence??0;return q-Z}),O=(w==null?void 0:w.spans)||[],B=new Set(O.map(L=>L.tokens&&L.tokens.length>0?L.tokens[0]:L.begin).filter(L=>L!=null)),F=[];let re=[];for(const L of E)B.has(L.id)&&re.length>0&&(F.push(re),re=[]),re.push(L);re.length>0&&F.push(re),F.length===0&&E.length>0&&F.push(E);const Y=(L,I)=>{if(!(I!=null&&I.spans))return null;const q=I.spans.find(Z=>(Z.tokens||[Z.begin]).includes(L));return(q==null?void 0:q.value)||null},de=L=>m!=null&&m.spans?m.spans.filter(I=>(I.tokens||[I.begin]).includes(L)&&I.value):[],ie=L=>L.length===0?"_":L.map(q=>q.value).sort().join("|"),ye=L=>{if(!(j!=null&&j.spans))return[];const I=L.map(q=>q.id);return j.spans.filter(q=>(q.tokens||[]).some(J=>I.includes(J))).map(q=>{var K;const Z=q.tokens||[],J=Math.min(...Z.map(G=>I.indexOf(G)).filter(G=>G!==-1)),ee=Math.max(...Z.map(G=>I.indexOf(G)).filter(G=>G!==-1)),te=Z.map(G=>L.find(M=>M.id===G)).filter(Boolean).sort((G,M)=>G.begin-M.begin).map(G=>p.body.slice(G.begin,G.end)).join("");return{start:J+1,end:ee+1,form:te,misc:((K=q.metadata)==null?void 0:K.misc)||"_"}}).sort((q,Z)=>q.start-Z.start)},pe=L=>{var te;if(!(b!=null&&b.spans)||!P.length)return{head:"_",deprel:"_"};const I=b.spans.find(K=>(K.tokens||[K.begin]).includes(L));if(!I)return{head:"_",deprel:"_"};const q=P.find(K=>K.target===I.id);if(!q)return{head:"_",deprel:"_"};if(q.source===q.target)return{head:0,deprel:q.value||"_"};const Z=b.spans.find(K=>K.id===q.source);if(!Z)return{head:"_",deprel:"_"};const J=((te=Z.tokens)==null?void 0:te[0])||Z.begin;if(!J)return{head:"_",deprel:"_"};const ee=F.flat().map(K=>K.id);ee.indexOf(J),ee.indexOf(L);let z=0;for(const K of F){const G=K.map(T=>T.id),M=G.indexOf(J);if(G.indexOf(L)!==-1&&M!==-1)return{head:M+1,deprel:q.value||"_"};z+=K.length}return{head:"_",deprel:"_"}},H=[];return H.push(`# newdoc id = ${s.name||"unknown"}`),F.forEach((L,I)=>{I>0&&H.push(""),H.push(`# sent_id = ${s.name||"unknown"}-${I+1}`);let q=!1;if(O.length>0&&L.length>0){const J=L[0].id,ee=O.find(z=>(z.tokens||[z.begin]).includes(J));if(ee&&ee.metadata){const z=ee.metadata;Object.keys(z).sort().forEach(K=>{const G=z[K];K==="text"&&(q=!0),G===!0?H.push(`# ${K}`):H.push(`# ${K} = ${G}`)})}}if(!q){const J=L.map(ee=>p.body.substring(ee.begin,ee.end)).join(" ");H.push(`# text = ${J}`)}const Z=ye(L);L.forEach((J,ee)=>{const z=ee+1,te=Z.filter(D=>D.start===z);for(const D of te){const ne=[`${D.start}-${D.end}`,D.form,"_","_","_","_","_","_","_",D.misc].join("	");H.push(ne)}const K=p.body.substring(J.begin,J.end),G=Y(J.id,b)||"_",M=Y(J.id,y)||"_",N=Y(J.id,h)||"_",T=ie(de(J.id)),{head:S,deprel:$}=pe(J.id),_=S===0||$==="_"?"_":`${S}:${$}`,Q=[z,K,G,M,N,T,S,$,_,"_"].join("	");H.push(Q)})}),H.join(`
`)},[s]),u=async()=>{try{await navigator.clipboard.writeText(l),r(!0),setTimeout(()=>r(!1),2e3)}catch(f){console.error("Failed to copy to clipboard:",f)}},c=()=>{const f=new Blob([l],{type:"text/plain;charset=utf-8"}),p=URL.createObjectURL(f),g=s.createElement("a");g.href=p,g.download=`${(s==null?void 0:s.name)||"document"}.conllu`,s.body.appendChild(g),g.click(),s.body.removeChild(g),URL.revokeObjectURL(p)};return i?d.jsx("div",{className:"text-center text-gray-600 py-8",children:"Loading document..."}):!s||!o?d.jsx("div",{className:"rounded-md bg-red-50 p-4",children:d.jsx("p",{className:"text-sm text-red-800",children:"Document or project not found"})}):d.jsxs("div",{children:[d.jsx(oo,{projectId:e,documentId:t,project:o,document:s}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"CoNLL-U Export"}),a&&d.jsx("div",{className:"rounded-md bg-red-50 p-4 mb-4",children:d.jsx("p",{className:"text-sm text-red-800",children:a})}),d.jsxs("div",{className:"flex gap-3 mb-4",children:[d.jsxs("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),n?"Copied!":"Copy to Clipboard"]}),d.jsxs("button",{onClick:c,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center gap-2",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})}),"Download .conllu"]})]}),d.jsx("div",{className:"border border-gray-300 rounded-md",children:d.jsx("textarea",{className:"w-full p-4 font-mono text-sm bg-gray-50 rounded-md resize-y",value:l,readOnly:!0,rows:20,style:{minHeight:"400px"}})})]})]})};function Dy(){return d.jsx(Ym,{children:d.jsx(uy,{children:d.jsxs(Cm,{children:[d.jsx(it,{path:"/login",element:d.jsx(fy,{})}),d.jsxs(it,{path:"/",element:d.jsx(dy,{children:d.jsx(cy,{})}),children:[d.jsx(it,{index:!0,element:d.jsx(Qa,{to:"/projects",replace:!0})}),d.jsx(it,{path:"profile",element:d.jsx(py,{})}),d.jsx(it,{path:"projects",element:d.jsx(my,{})}),d.jsx(it,{path:"projects/:projectId/documents",element:d.jsx(ky,{})}),d.jsx(it,{path:"projects/:projectId/management",element:d.jsx(yy,{})}),d.jsx(it,{path:"projects/:projectId/documents/:documentId/edit",element:d.jsx(jy,{})}),d.jsx(it,{path:"projects/:projectId/documents/:documentId/annotate",element:d.jsx(Ry,{})}),d.jsx(it,{path:"projects/:projectId/documents/:documentId/export",element:d.jsx(By,{})})]}),d.jsx(it,{path:"*",element:d.jsx(Qa,{to:"/login",replace:!0})})]})})})}Pd(document.getElementById("root")).render(d.jsx(x.StrictMode,{children:d.jsx(Dy,{})}))});export default My();
